<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>fudge.legacy.endl.endlIClasses &mdash; Fudge and GND 1.3 beta documentation</title>
    
    <link rel="stylesheet" href="../../../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '1.3 beta',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../../../../_static/gnd-20121206-favicon.ico"/>
    <link rel="top" title="Fudge and GND 1.3 beta documentation" href="../../../../index.html" />
    <link rel="up" title="Module code" href="../../../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../../index.html">Fudge and GND 1.3 beta documentation</a> &raquo;</li>
          <li><a href="../../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for fudge.legacy.endl.endlIClasses</h1><div class="highlight"><pre>
<span class="c"># &lt;&lt;BEGIN-copyright&gt;&gt;</span>
<span class="c"># &lt;&lt;END-copyright&gt;&gt;</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This module contains all the classes for the various types of ENDL I data.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">copy</span>

<span class="kn">import</span> <span class="nn">endl2dmathClasses</span><span class="o">,</span> <span class="nn">endl2dmathmisc</span><span class="o">,</span> <span class="nn">endl3dmathClasses</span><span class="o">,</span> <span class="nn">endl3dmathmisc</span><span class="o">,</span> <span class="nn">endl4dmathClasses</span><span class="o">,</span> <span class="nn">endl4dmathmisc</span>
<span class="kn">from</span> <span class="nn">fudge.core.math</span> <span class="kn">import</span> <span class="n">fudge2dGrouping</span>
<span class="kn">import</span> <span class="nn">endlmath</span>
<span class="kn">from</span> <span class="nn">fudge.core.utilities</span> <span class="kn">import</span> <span class="n">fudgeExceptions</span>
<span class="kn">from</span> <span class="nn">fudge.vis.gnuplot</span> <span class="kn">import</span> <span class="n">plotbase</span>
<span class="kn">import</span> <span class="nn">endlIClassesParameters</span>
<span class="kn">import</span> <span class="nn">endlNd</span>
<span class="kn">import</span> <span class="nn">endlmisc</span>
<span class="kn">import</span> <span class="nn">endlParameters</span>

<span class="n">normCheckTolerance</span> <span class="o">=</span> <span class="mf">1e-5</span>
<span class="n">fixThresholdMode_None</span> <span class="o">=</span> <span class="n">endlIClassesParameters</span><span class="o">.</span><span class="n">fixThresholdMode_None</span>
<span class="n">fixThresholdMode_RaiseOnly</span> <span class="o">=</span> <span class="n">endlIClassesParameters</span><span class="o">.</span><span class="n">fixThresholdMode_RaiseOnly</span>
<span class="n">fixThresholdMode_All</span> <span class="o">=</span> <span class="n">endlIClassesParameters</span><span class="o">.</span><span class="n">fixThresholdMode_All</span>

<div class="viewcode-block" id="endlAddIObject"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlAddIObject">[docs]</a><span class="k">def</span> <span class="nf">endlAddIObject</span><span class="p">(</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
    <span class="s">&quot;For internal use only.&quot;</span>

    <span class="k">if</span>   <span class="p">(</span> <span class="n">I</span> <span class="o">==</span>   <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="n">endlI0</span><span class="p">(</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span> <span class="n">I</span> <span class="o">==</span>   <span class="mi">7</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="n">endlI7</span><span class="p">(</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span> <span class="n">I</span> <span class="o">==</span>   <span class="mi">9</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="n">endlI9</span><span class="p">(</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span> <span class="n">I</span> <span class="o">==</span>  <span class="mi">10</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="n">endlI10</span><span class="p">(</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span> <span class="n">I</span> <span class="o">==</span>  <span class="mi">11</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="n">endlI11</span><span class="p">(</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span> <span class="n">I</span> <span class="o">==</span>  <span class="mi">12</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="n">endlI12</span><span class="p">(</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span> <span class="n">I</span> <span class="o">==</span>  <span class="mi">13</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="n">endlI13</span><span class="p">(</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span> <span class="n">I</span> <span class="o">==</span>  <span class="mi">20</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="n">endlI20</span><span class="p">(</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span> <span class="n">I</span> <span class="o">==</span>  <span class="mi">80</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="n">endlI80</span><span class="p">(</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span> <span class="n">I</span> <span class="o">==</span>  <span class="mi">89</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="n">endlI89</span><span class="p">(</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span> <span class="n">I</span> <span class="o">==</span>  <span class="mi">90</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="n">endlI90</span><span class="p">(</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span> <span class="n">I</span> <span class="o">==</span>  <span class="mi">91</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="n">endlI91</span><span class="p">(</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span> <span class="n">I</span> <span class="o">==</span>  <span class="mi">92</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="n">endlI92</span><span class="p">(</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span> <span class="n">I</span> <span class="o">==</span> <span class="mi">941</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="n">endlI941</span><span class="p">(</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span> <span class="n">I</span> <span class="o">==</span> <span class="mi">942</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="n">endlI942</span><span class="p">(</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span> <span class="n">I</span> <span class="o">==</span>   <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="n">endlI1</span><span class="p">(</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span> <span class="n">I</span> <span class="o">==</span>  <span class="mi">21</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="n">endlI21</span><span class="p">(</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span> <span class="n">I</span> <span class="o">==</span>  <span class="mi">22</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="n">endlI22</span><span class="p">(</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span> <span class="n">I</span> <span class="o">==</span>  <span class="mi">81</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="n">endlI81</span><span class="p">(</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span> <span class="n">I</span> <span class="o">==</span>  <span class="mi">84</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="n">endlI84</span><span class="p">(</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span> <span class="n">I</span> <span class="o">==</span>   <span class="mi">3</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="n">endlI3</span><span class="p">(</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span> <span class="n">I</span> <span class="o">==</span>   <span class="mi">4</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="n">endlI4</span><span class="p">(</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
    <span class="k">else</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Error in endlIClasses.endlAddIObject: I = </span><span class="si">%d</span><span class="s"> not supported&quot;</span> <span class="o">%</span> <span class="n">I</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI0"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI0">[docs]</a><span class="k">class</span> <span class="nc">endlI0</span><span class="p">(</span> <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="p">,</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class is for the I = 0 data.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the endlI0 class.  See the module endlNd.py for the meanings of</span>
<span class="sd">        f, yo, C, I, S and h. Points must be a valid endl2dmath class data structure.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;crossSection&#39;</span>
        <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variablesUnits</span> <span class="o">=</span> <span class="s">&#39;energy_in[MeV];cross_section[barn]&#39;</span>

<div class="viewcode-block" id="endlI0.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI0.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">arg</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls the endl2dmathmisc.check2dData function and returns a list of endlCheckerObject instances.</span>
<span class="sd">        See endl2dmathmisc.check2dData for meaning of printWarning and printErrors.&quot;&quot;&quot;</span>

        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">n</span><span class="p">,</span> <span class="n">dummy</span><span class="p">,</span> <span class="n">messages2d</span> <span class="o">=</span> <span class="n">endl2dmathmisc</span><span class="o">.</span><span class="n">check2dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">allowZeroX</span> <span class="o">=</span> <span class="n">allowZeroE</span><span class="p">,</span> <span class="n">positiveY</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="n">printWarning</span><span class="p">,</span> \
            <span class="n">printErrors</span> <span class="o">=</span> <span class="n">printErrors</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI0.fixThreshold"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI0.fixThreshold">[docs]</a>    <span class="k">def</span> <span class="nf">fixThreshold</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="mf">10e-3</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode_RaiseOnly</span><span class="p">,</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls endlIClasses.fixThresholdFor2d to fix threshold.&quot;&quot;&quot;</span>

        <span class="n">fixThresholdFor2d</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="n">dThreshold_MeV</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode</span><span class="p">,</span> 
            <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI0.getEMin_EMinNext"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI0.getEMin_EMinNext">[docs]</a>    <span class="k">def</span> <span class="nf">getEMin_EMinNext</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Gets the first two Energy values from self&#39;s data. None is return for any absent value.&quot;&quot;&quot;</span>

        <span class="n">EMin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xMin</span><span class="p">(</span> <span class="p">)</span>
        <span class="n">EMinNext</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EMinNext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">EMinNext</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI0.getThresholdsForChecker"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI0.getThresholdsForChecker">[docs]</a>    <span class="k">def</span> <span class="nf">getThresholdsForChecker</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;For internal use only.&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="n">getThresholdsForChecker2d</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI0.heat"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI0.heat">[docs]</a>    <span class="k">def</span> <span class="nf">heat</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="n">lowerlimit</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">upperlimit</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">interpolationAccuracy</span> <span class="o">=</span> <span class="mf">0.002</span><span class="p">,</span> <span class="n">heatAllPoints</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">doNotThin</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="mf">1e-11</span><span class="p">,</span> 
        <span class="n">heatBelowThreshold</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">removeClosePoints</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">heatAllEDomain</span> <span class="o">=</span> <span class="bp">True</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls crossSectionAdjustForHeatedTarget with self&#39;s data. Returns an endl2dmath</span>
<span class="sd">    instance. See module crossSectionAdjustForHeatedTarget for more details.&quot;&quot;&quot;</span>

        <span class="n">TData</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getTemperature</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">TData</span> <span class="o">&gt;</span> <span class="n">T</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Error in endlI0.heat: temperature  = </span><span class="si">%e</span><span class="s"> must be greater than data&#39;s temperature = </span><span class="si">%e</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">T</span><span class="p">,</span> <span class="n">TData</span> <span class="p">)</span> <span class="p">)</span>
        <span class="n">unheated</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copyData</span><span class="p">(</span> <span class="p">)</span>
        <span class="n">unheated</span><span class="o">.</span><span class="n">trim</span><span class="p">(</span> <span class="p">)</span>
        <span class="n">dT</span> <span class="o">=</span> <span class="n">T</span> <span class="o">-</span> <span class="n">TData</span>
        <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="n">dT</span> <span class="o">&gt;</span> <span class="mf">0.</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">massRatio</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span><span class="o">.</span><span class="n">mass</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span> <span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span><span class="o">.</span><span class="n">mass</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span> <span class="p">)</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">lowerlimit</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">lowerlimit</span> <span class="o">=</span> <span class="s">&quot;oneOverV&quot;</span>
                <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">C</span> <span class="o">==</span> <span class="mi">10</span> <span class="p">)</span> <span class="p">:</span> <span class="n">lowerlimit</span> <span class="o">=</span> <span class="s">&quot;constant&quot;</span>
                <span class="k">elif</span> <span class="p">(</span> <span class="n">unheated</span><span class="o">.</span><span class="n">xMin</span><span class="p">(</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1e-8</span> <span class="p">)</span> <span class="p">:</span> <span class="n">lowerlimit</span> <span class="o">=</span> <span class="s">&quot;threshold&quot;</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">upperlimit</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">upperlimit</span> <span class="o">=</span> <span class="s">&#39;constant&#39;</span>
            <span class="k">if</span><span class="p">(</span> <span class="ow">not</span> <span class="n">heatBelowThreshold</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EMin</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span> <span class="n">unheated</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">EMin</span> <span class="p">)</span>
            <span class="kn">import</span> <span class="nn">crossSectionAdjustForHeatedTarget</span>
            <span class="n">d</span>  <span class="o">=</span> <span class="n">crossSectionAdjustForHeatedTarget</span><span class="o">.</span><span class="n">crossSectionAdjustForHeatedTarget</span><span class="p">(</span> <span class="n">massRatio</span><span class="p">,</span> <span class="n">dT</span><span class="p">,</span> <span class="n">unheated</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">lowerlimit</span> <span class="o">=</span> <span class="n">lowerlimit</span><span class="p">,</span> \
                <span class="n">upperlimit</span> <span class="o">=</span> <span class="n">upperlimit</span><span class="p">,</span> <span class="n">interpolationAccuracy</span> <span class="o">=</span> <span class="n">interpolationAccuracy</span><span class="p">,</span> <span class="n">heatAllPoints</span> <span class="o">=</span> <span class="n">heatAllPoints</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">doNotThin</span> <span class="o">=</span> <span class="n">doNotThin</span><span class="p">,</span>
                <span class="n">heatAllEDomain</span> <span class="o">=</span> <span class="n">heatAllEDomain</span> <span class="p">)</span>
            <span class="n">heated</span> <span class="o">=</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="p">(</span> <span class="n">d</span> <span class="p">)</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">removeClosePoints</span> <span class="p">)</span> <span class="p">:</span> <span class="n">heated</span><span class="o">.</span><span class="n">removeClosePoints</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="n">heated</span> <span class="o">=</span> <span class="n">unheated</span>
        <span class="n">I0</span> <span class="o">=</span> <span class="n">endlI0</span><span class="p">(</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="n">heated</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">dT</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> 
            <span class="n">I0</span><span class="o">.</span><span class="n">setTemperature</span><span class="p">(</span> <span class="n">TData</span> <span class="p">)</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="n">I0</span><span class="o">.</span><span class="n">setTemperature</span><span class="p">(</span> <span class="n">T</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">I0</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI0.set"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI0.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;E (MeV)&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;cross section (barn)&quot;</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="n">checkDataType</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI0.toZAsFrame"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI0.toZAsFrame">[docs]</a>    <span class="k">def</span> <span class="nf">toZAsFrame</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">newProjectileMass</span><span class="p">,</span> <span class="n">newTargetMass</span><span class="p">,</span> <span class="n">halflife</span><span class="p">,</span> <span class="n">bdflsFile</span><span class="p">,</span> <span class="n">ELevel</span> <span class="o">=</span> <span class="mf">0.</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">newI0</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">toZAsFrameMisc</span><span class="p">(</span> <span class="n">endlI0</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">newProjectileMass</span><span class="p">,</span> <span class="n">newTargetMass</span><span class="p">,</span> <span class="n">ELevel</span><span class="p">,</span> <span class="n">halflife</span><span class="p">,</span> <span class="n">bdflsFile</span><span class="p">,</span> <span class="bp">True</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="p">[</span> <span class="n">newI0</span> <span class="p">]</span> <span class="p">)</span>
</div></div>
<div class="viewcode-block" id="endlI7"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI7">[docs]</a><span class="k">class</span> <span class="nc">endlI7</span><span class="p">(</span> <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="p">,</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class is for the I = 7 data.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the endlI7 class.  See the module endlNd.py for the meanings of</span>
<span class="sd">        f, yo, C, I, S and h. Points must be a valid endl2dmath class data structure.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;multiplicity&#39;</span>
        <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variablesUnits</span> <span class="o">=</span> <span class="s">&#39;energy_in[MeV];multiplicity&#39;</span>

<div class="viewcode-block" id="endlI7.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI7.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">arg</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls the endl2dmathmisc.check2dData function and returns a list of endlCheckerObject instances.</span>
<span class="sd">        See endl2dmathmisc.check2dData for meaning of printWarning and printErrors.&quot;&quot;&quot;</span>

        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">n</span><span class="p">,</span> <span class="n">dummy</span><span class="p">,</span> <span class="n">messages2d</span> <span class="o">=</span> <span class="n">endl2dmathmisc</span><span class="o">.</span><span class="n">check2dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">allowZeroX</span> <span class="o">=</span> <span class="n">allowZeroE</span><span class="p">,</span> <span class="n">positiveY</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="n">printWarning</span><span class="p">,</span> \
            <span class="n">printErrors</span> <span class="o">=</span> <span class="n">printErrors</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI7.fixThreshold"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI7.fixThreshold">[docs]</a>    <span class="k">def</span> <span class="nf">fixThreshold</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="mf">10e-3</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode_RaiseOnly</span><span class="p">,</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls endlIClasses.fixThresholdFor2d to fix threshold.&quot;&quot;&quot;</span>

        <span class="n">fixThresholdFor2d</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="n">dThreshold_MeV</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode</span><span class="p">,</span> 
            <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI7.getEMin_EMinNext"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI7.getEMin_EMinNext">[docs]</a>    <span class="k">def</span> <span class="nf">getEMin_EMinNext</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Gets the first two Energy values from self&#39;s data. None is return for any absent value.&quot;&quot;&quot;</span>

        <span class="n">EMin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xMin</span><span class="p">(</span> <span class="p">)</span>
        <span class="n">EMinNext</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EMinNext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">EMinNext</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI7.getThresholdsForChecker"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI7.getThresholdsForChecker">[docs]</a>    <span class="k">def</span> <span class="nf">getThresholdsForChecker</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;For internal use only.&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="n">getThresholdsForChecker2d</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI7.set"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI7.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;E (MeV)&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;nu_bar&quot;</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="n">checkDataType</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span> <span class="p">)</span>
</div></div>
<div class="viewcode-block" id="endlI9"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI9">[docs]</a><span class="k">class</span> <span class="nc">endlI9</span><span class="p">(</span> <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="p">,</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class is for the I = 9 data.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the endlI9 class.  See the module endlNd.py for the meanings of</span>
<span class="sd">        f, yo, C, I, S and h. Points must be a valid endl2dmath class data structure.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;multiplicity&#39;</span>
        <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variablesUnits</span> <span class="o">=</span> <span class="s">&#39;energy_in[MeV];multiplicity&#39;</span>

<div class="viewcode-block" id="endlI9.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI9.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">arg</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls the endl2dmathmisc.check2dData function and returns a list of endlCheckerObject instances.</span>
<span class="sd">        See endl2dmathmisc.check2dData for meaning of printWarning and printErrors.&quot;&quot;&quot;</span>

        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">n</span><span class="p">,</span> <span class="n">dummy</span><span class="p">,</span> <span class="n">messages2d</span> <span class="o">=</span> <span class="n">endl2dmathmisc</span><span class="o">.</span><span class="n">check2dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">allowZeroX</span> <span class="o">=</span> <span class="n">allowZeroE</span><span class="p">,</span> <span class="n">positiveY</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="n">printWarning</span><span class="p">,</span> \
            <span class="n">printErrors</span> <span class="o">=</span> <span class="n">printErrors</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI9.fixThreshold"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI9.fixThreshold">[docs]</a>    <span class="k">def</span> <span class="nf">fixThreshold</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="mf">10e-3</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode_RaiseOnly</span><span class="p">,</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls endlIClasses.fixThresholdFor2d to fix threshold.&quot;&quot;&quot;</span>

        <span class="n">fixThresholdFor2d</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="n">dThreshold_MeV</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode</span><span class="p">,</span>
            <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI9.getEMin_EMinNext"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI9.getEMin_EMinNext">[docs]</a>    <span class="k">def</span> <span class="nf">getEMin_EMinNext</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Gets the first two Energy values from self&#39;s data. None is return for any absent value.&quot;&quot;&quot;</span>

        <span class="n">EMin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xMin</span><span class="p">(</span> <span class="p">)</span>
        <span class="n">EMinNext</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EMinNext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">EMinNext</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI9.getThresholdsForChecker"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI9.getThresholdsForChecker">[docs]</a>    <span class="k">def</span> <span class="nf">getThresholdsForChecker</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;For internal use only.&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="n">getThresholdsForChecker2d</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI9.set"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI9.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;E (MeV)&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;multiplicity&quot;</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="n">checkDataType</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span> <span class="p">)</span>

</div>
<div class="viewcode-block" id="endlI9.toZAsFrame"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI9.toZAsFrame">[docs]</a>    <span class="k">def</span> <span class="nf">toZAsFrame</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">newProjectileMass</span><span class="p">,</span> <span class="n">newTargetMass</span><span class="p">,</span> <span class="n">halflife</span><span class="p">,</span> <span class="n">bdflsFile</span><span class="p">,</span> <span class="n">ELevel</span> <span class="o">=</span> <span class="mf">0.</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">newI9</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">toZAsFrameMisc</span><span class="p">(</span> <span class="n">endlI9</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">newProjectileMass</span><span class="p">,</span> <span class="n">newTargetMass</span><span class="p">,</span> <span class="n">ELevel</span><span class="p">,</span> <span class="n">halflife</span><span class="p">,</span> <span class="n">bdflsFile</span><span class="p">,</span> <span class="bp">True</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="p">[</span> <span class="n">newI9</span> <span class="p">]</span> <span class="p">)</span>
</div></div>
<div class="viewcode-block" id="endlI10"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI10">[docs]</a><span class="k">class</span> <span class="nc">endlI10</span><span class="p">(</span> <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="p">,</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class is for the I = 10 data.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the endlI10 class.  See the module endlNd.py for the meanings of</span>
<span class="sd">        f, yo, C, I, S and h. Points must be a valid endl2dmath class data structure.&quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">fudge</span> <span class="kn">import</span> <span class="n">gnd</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">gnd</span><span class="o">.</span><span class="n">productData</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">energyDepositionToken</span>
        <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variablesUnits</span> <span class="o">=</span> <span class="s">&#39;energy_in[MeV];energy_deposition[MeV]&#39;</span>

<div class="viewcode-block" id="endlI10.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI10.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">arg</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls the endl2dmathmisc.check2dData function and returns a list of endlCheckerObject instances.</span>
<span class="sd">        See endl2dmathmisc.check2dData for meaning of printWarning and printErrors.&quot;&quot;&quot;</span>

        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">n</span><span class="p">,</span> <span class="n">dummy</span><span class="p">,</span> <span class="n">messages2d</span> <span class="o">=</span> <span class="n">endl2dmathmisc</span><span class="o">.</span><span class="n">check2dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">allowZeroX</span> <span class="o">=</span> <span class="n">allowZeroE</span><span class="p">,</span> <span class="n">positiveY</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="n">printWarning</span><span class="p">,</span> \
            <span class="n">printErrors</span> <span class="o">=</span> <span class="n">printErrors</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI10.fixThreshold"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI10.fixThreshold">[docs]</a>    <span class="k">def</span> <span class="nf">fixThreshold</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="mf">10e-3</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode_RaiseOnly</span><span class="p">,</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls endlIClasses.fixThresholdFor2d to fix threshold.&quot;&quot;&quot;</span>

        <span class="n">fixThresholdFor2d</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="n">dThreshold_MeV</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode</span><span class="p">,</span>
            <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI10.getEMin_EMinNext"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI10.getEMin_EMinNext">[docs]</a>    <span class="k">def</span> <span class="nf">getEMin_EMinNext</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Gets the first two Energy values from self&#39;s data. None is return for any absent value.&quot;&quot;&quot;</span>

        <span class="n">EMin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xMin</span><span class="p">(</span> <span class="p">)</span>
        <span class="n">EMinNext</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EMinNext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">EMinNext</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI10.getThresholdsForChecker"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI10.getThresholdsForChecker">[docs]</a>    <span class="k">def</span> <span class="nf">getThresholdsForChecker</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;For internal use only.&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="n">getThresholdsForChecker2d</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI10.set"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI10.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;E (MeV)&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;E to yo (MeV)&quot;</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="n">checkDataType</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span> <span class="p">)</span>
</div></div>
<div class="viewcode-block" id="endlI11"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI11">[docs]</a><span class="k">class</span> <span class="nc">endlI11</span><span class="p">(</span> <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="p">,</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class is for the I = 11 data.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the endlI11 class.  See the module endlNd.py for the meanings of</span>
<span class="sd">        f, yo, C, I, S and h. Points must be a valid endl2dmath class data structure.&quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">fudge</span> <span class="kn">import</span> <span class="n">gnd</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">gnd</span><span class="o">.</span><span class="n">productData</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">energyDepositionToken</span>
        <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variablesUnits</span> <span class="o">=</span> <span class="s">&#39;energy_in[MeV];energy_deposition[MeV]&#39;</span>

<div class="viewcode-block" id="endlI11.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI11.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">arg</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls the endl2dmathmisc.check2dData function and returns a list of endlCheckerObject instances.</span>
<span class="sd">        See endl2dmathmisc.check2dData for meaning of printWarning and printErrors.&quot;&quot;&quot;</span>

        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">n</span><span class="p">,</span> <span class="n">dummy</span><span class="p">,</span> <span class="n">messages2d</span> <span class="o">=</span> <span class="n">endl2dmathmisc</span><span class="o">.</span><span class="n">check2dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">allowZeroX</span> <span class="o">=</span> <span class="n">allowZeroE</span><span class="p">,</span> <span class="n">positiveY</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="n">printWarning</span><span class="p">,</span> \
            <span class="n">printErrors</span> <span class="o">=</span> <span class="n">printErrors</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI11.fixThreshold"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI11.fixThreshold">[docs]</a>    <span class="k">def</span> <span class="nf">fixThreshold</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="mf">10e-3</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode_RaiseOnly</span><span class="p">,</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls endlIClasses.fixThresholdFor2d to fix threshold.&quot;&quot;&quot;</span>

        <span class="n">fixThresholdFor2d</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="n">dThreshold_MeV</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode</span><span class="p">,</span>
            <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI11.getEMin_EMinNext"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI11.getEMin_EMinNext">[docs]</a>    <span class="k">def</span> <span class="nf">getEMin_EMinNext</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Gets the first two Energy values from self&#39;s data. None is return for any absent value.&quot;&quot;&quot;</span>

        <span class="n">EMin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xMin</span><span class="p">(</span> <span class="p">)</span>
        <span class="n">EMinNext</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EMinNext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">EMinNext</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI11.getThresholdsForChecker"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI11.getThresholdsForChecker">[docs]</a>    <span class="k">def</span> <span class="nf">getThresholdsForChecker</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;For internal use only.&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="n">getThresholdsForChecker2d</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI11.set"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI11.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;E (MeV)&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;E to res. (MeV)&quot;</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="n">checkDataType</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span> <span class="p">)</span>
</div></div>
<div class="viewcode-block" id="endlI12"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI12">[docs]</a><span class="k">class</span> <span class="nc">endlI12</span><span class="p">(</span> <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="p">,</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class is for the I = 12, Q(E), data.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the endlI12 class.  See the module endlNd.py for the meanings of</span>
<span class="sd">        f, yo, C, I, S and h. Points must be a valid endl2dmath class data structure.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;energyDependentQ&#39;</span>
        <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variablesUnits</span> <span class="o">=</span> <span class="s">&#39;energy_in[MeV];Q[MeV]&#39;</span>

<div class="viewcode-block" id="endlI12.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI12.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">arg</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls the endl2dmathmisc.check2dData function and returns a list of endlCheckerObject instances.</span>
<span class="sd">        See endl2dmathmisc.check2dData for meaning of printWarning and printErrors.&quot;&quot;&quot;</span>

        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">n</span><span class="p">,</span> <span class="n">dummy</span><span class="p">,</span> <span class="n">messages2d</span> <span class="o">=</span> <span class="n">endl2dmathmisc</span><span class="o">.</span><span class="n">check2dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">allowZeroX</span> <span class="o">=</span> <span class="n">allowZeroE</span><span class="p">,</span> <span class="n">positiveY</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="n">printWarning</span><span class="p">,</span> \
            <span class="n">printErrors</span> <span class="o">=</span> <span class="n">printErrors</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI12.fixThreshold"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI12.fixThreshold">[docs]</a>    <span class="k">def</span> <span class="nf">fixThreshold</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="mf">10e-3</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode_RaiseOnly</span><span class="p">,</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls endlIClasses.fixThresholdFor2d to fix threshold.&quot;&quot;&quot;</span>

        <span class="n">fixThresholdFor2d</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="n">dThreshold_MeV</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode</span><span class="p">,</span>
            <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI12.getEMin_EMinNext"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI12.getEMin_EMinNext">[docs]</a>    <span class="k">def</span> <span class="nf">getEMin_EMinNext</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Gets the first two Energy values from self&#39;s data. None is return for any absent value.&quot;&quot;&quot;</span>

        <span class="n">EMin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xMin</span><span class="p">(</span> <span class="p">)</span>
        <span class="n">EMinNext</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EMinNext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">EMinNext</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI12.getThresholdsForChecker"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI12.getThresholdsForChecker">[docs]</a>    <span class="k">def</span> <span class="nf">getThresholdsForChecker</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;For internal use only.&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="n">getThresholdsForChecker2d</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI12.set"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI12.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;E (MeV)&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;Q (MeV)&quot;</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="n">checkDataType</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span> <span class="p">)</span>
</div></div>
<div class="viewcode-block" id="endlI13"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI13">[docs]</a><span class="k">class</span> <span class="nc">endlI13</span><span class="p">(</span> <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="p">,</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class is for the I = 13 data.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the endlI13 class.  See the module endlNd.py for the meanings of</span>
<span class="sd">        f, yo, C, I, S and h. Points must be a valid endl2dmath class data structure.&quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">fudge</span> <span class="kn">import</span> <span class="n">gnd</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">gnd</span><span class="o">.</span><span class="n">productData</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">momentumDepositionToken</span>
        <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variablesUnits</span> <span class="o">=</span> <span class="s">&#39;energy_in[MeV];momentum_deposition[MeV/c]&#39;</span>

<div class="viewcode-block" id="endlI13.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI13.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">arg</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls the endl2dmathmisc.check2dData function and returns a list of endlCheckerObject instances.</span>
<span class="sd">        See endl2dmathmisc.check2dData for meaning of printWarning and printErrors.&quot;&quot;&quot;</span>

        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">n</span><span class="p">,</span> <span class="n">dummy</span><span class="p">,</span> <span class="n">messages2d</span> <span class="o">=</span> <span class="n">endl2dmathmisc</span><span class="o">.</span><span class="n">check2dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">allowZeroX</span> <span class="o">=</span> <span class="n">allowZeroE</span><span class="p">,</span> <span class="n">positiveY</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="n">printWarning</span><span class="p">,</span> \
            <span class="n">printErrors</span> <span class="o">=</span> <span class="n">printErrors</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI13.fixThreshold"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI13.fixThreshold">[docs]</a>    <span class="k">def</span> <span class="nf">fixThreshold</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="mf">10e-3</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode_RaiseOnly</span><span class="p">,</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls endlIClasses.fixThresholdFor2d to fix threshold.&quot;&quot;&quot;</span>

        <span class="n">fixThresholdFor2d</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="n">dThreshold_MeV</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode</span><span class="p">,</span>
            <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI13.getEMin_EMinNext"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI13.getEMin_EMinNext">[docs]</a>    <span class="k">def</span> <span class="nf">getEMin_EMinNext</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Gets the first two Energy values from self&#39;s data. None is return for any absent value.&quot;&quot;&quot;</span>

        <span class="n">EMin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xMin</span><span class="p">(</span> <span class="p">)</span>
        <span class="n">EMinNext</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EMinNext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">EMinNext</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI13.getThresholdsForChecker"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI13.getThresholdsForChecker">[docs]</a>    <span class="k">def</span> <span class="nf">getThresholdsForChecker</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;For internal use only.&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="n">getThresholdsForChecker2d</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI13.set"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI13.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;E (MeV)&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;momentum (MeV/c)&quot;</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="n">checkDataType</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span> <span class="p">)</span>
</div></div>
<div class="viewcode-block" id="endlI80"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI80">[docs]</a><span class="k">class</span> <span class="nc">endlI80</span><span class="p">(</span> <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="p">,</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class is for the I = 80 data.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the endlI80 class.  See the module endlNd.py for the meanings of</span>
<span class="sd">        f, yo, C, I, S and h. Points must be a valid endl2dmath class data structure.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>

<div class="viewcode-block" id="endlI80.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI80.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">arg</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls the endl2dmathmisc.check2dData function and returns a list of endlCheckerObject instances.</span>
<span class="sd">        See endl2dmathmisc.check2dData for meaning of printWarning and printErrors.&quot;&quot;&quot;</span>

        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">n</span><span class="p">,</span> <span class="n">dummy</span><span class="p">,</span> <span class="n">messages2d</span> <span class="o">=</span> <span class="n">endl2dmathmisc</span><span class="o">.</span><span class="n">check2dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">allowZeroX</span> <span class="o">=</span> <span class="n">allowZeroE</span><span class="p">,</span> <span class="n">positiveY</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="n">printWarning</span><span class="p">,</span> \
            <span class="n">printErrors</span> <span class="o">=</span> <span class="n">printErrors</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI80.set"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI80.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;E (MeV)&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;T ave&#39;d rates (barn * cm/sh)&quot;</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="n">checkDataType</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span> <span class="p">)</span>
</div></div>
<div class="viewcode-block" id="endlI89"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI89">[docs]</a><span class="k">class</span> <span class="nc">endlI89</span><span class="p">(</span> <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="p">,</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class is for the I = 89 data.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the endlI89 class.  See the module endlNd.py for the meanings of</span>
<span class="sd">        f, yo, C, I, S and h. Points must be a valid endl2dmath class data structure.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">89</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>

<div class="viewcode-block" id="endlI89.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI89.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">arg</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls the endl2dmathmisc.check2dData function and returns a list of endlCheckerObject instances.</span>
<span class="sd">        See endl2dmathmisc.check2dData for meaning of printWarning and printErrors.&quot;&quot;&quot;</span>

        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">n</span><span class="p">,</span> <span class="n">dummy</span><span class="p">,</span> <span class="n">messages2d</span> <span class="o">=</span> <span class="n">endl2dmathmisc</span><span class="o">.</span><span class="n">check2dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">allowZeroX</span> <span class="o">=</span> <span class="n">allowZeroE</span><span class="p">,</span> <span class="n">positiveY</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="n">printWarning</span><span class="p">,</span> \
            <span class="n">printErrors</span> <span class="o">=</span> <span class="n">printErrors</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI89.set"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI89.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;E (MeV)&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;multiplicity tn&quot;</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="n">checkDataType</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span> <span class="p">)</span>
</div></div>
<div class="viewcode-block" id="endlI90"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI90">[docs]</a><span class="k">class</span> <span class="nc">endlI90</span><span class="p">(</span> <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="p">,</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class is for the I = 90 data.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the endlI90 class.  See the module endlNd.py for the meanings of</span>
<span class="sd">        f, yo, C, I, S and h. Points must be a valid endl2dmath class data structure.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>

<div class="viewcode-block" id="endlI90.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI90.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">arg</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls the endl2dmathmisc.check2dData function and returns a list of endlCheckerObject instances.</span>
<span class="sd">        See endl2dmathmisc.check2dData for meaning of printWarning and printErrors.&quot;&quot;&quot;</span>

        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">n</span><span class="p">,</span> <span class="n">dummy</span><span class="p">,</span> <span class="n">messages2d</span> <span class="o">=</span> <span class="n">endl2dmathmisc</span><span class="o">.</span><span class="n">check2dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">allowZeroX</span> <span class="o">=</span> <span class="n">allowZeroE</span><span class="p">,</span> <span class="n">positiveY</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="n">printWarning</span><span class="p">,</span> \
            <span class="n">printErrors</span> <span class="o">=</span> <span class="n">printErrors</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI90.set"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI90.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;E (MeV)&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;T ave&#39;d E to yo (MeV)&quot;</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="n">checkDataType</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span> <span class="p">)</span>
</div></div>
<div class="viewcode-block" id="endlI91"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI91">[docs]</a><span class="k">class</span> <span class="nc">endlI91</span><span class="p">(</span> <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="p">,</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class is for the I = 91 data.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the endlI91 class.  See the module endlNd.py for the meanings of</span>
<span class="sd">        f, yo, C, I, S and h. Points must be a valid endl2dmath class data structure.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>

<div class="viewcode-block" id="endlI91.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI91.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">arg</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls the endl2dmathmisc.check2dData function and returns a list of endlCheckerObject instances.</span>
<span class="sd">        See endl2dmathmisc.check2dData for meaning of printWarning and printErrors.&quot;&quot;&quot;</span>

        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">n</span><span class="p">,</span> <span class="n">dummy</span><span class="p">,</span> <span class="n">messages2d</span> <span class="o">=</span> <span class="n">endl2dmathmisc</span><span class="o">.</span><span class="n">check2dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">allowZeroX</span> <span class="o">=</span> <span class="n">allowZeroE</span><span class="p">,</span> <span class="n">positiveY</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="n">printWarning</span><span class="p">,</span> \
            <span class="n">printErrors</span> <span class="o">=</span> <span class="n">printErrors</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI91.set"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI91.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;E (MeV)&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;T ave&#39;d E to res. (MeV)&quot;</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="n">checkDataType</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span> <span class="p">)</span>
</div></div>
<div class="viewcode-block" id="endlI92"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI92">[docs]</a><span class="k">class</span> <span class="nc">endlI92</span><span class="p">(</span> <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="p">,</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class is for the I = 92 data.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the endlI92 class.  See the module endlNd.py for the meanings of</span>
<span class="sd">        f, yo, C, I, S and h. Points must be a valid endl2dmath class data structure.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">92</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>

<div class="viewcode-block" id="endlI92.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI92.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">arg</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls the endl2dmathmisc.check2dData function and returns a list of endlCheckerObject instances.</span>
<span class="sd">        See endl2dmathmisc.check2dData for meaning of printWarning and printErrors.&quot;&quot;&quot;</span>

        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">n</span><span class="p">,</span> <span class="n">dummy</span><span class="p">,</span> <span class="n">messages2d</span> <span class="o">=</span> <span class="n">endl2dmathmisc</span><span class="o">.</span><span class="n">check2dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">allowZeroX</span> <span class="o">=</span> <span class="n">allowZeroE</span><span class="p">,</span> <span class="n">positiveY</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="n">printWarning</span><span class="p">,</span> \
            <span class="n">printErrors</span> <span class="o">=</span> <span class="n">printErrors</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI92.set"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI92.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;T (MeV)&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;T ave&#39;d total E (MeV)&quot;</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="n">checkDataType</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span> <span class="p">)</span>
</div></div>
<div class="viewcode-block" id="endlI941"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI941">[docs]</a><span class="k">class</span> <span class="nc">endlI941</span><span class="p">(</span> <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="p">,</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class is for the I = 941 data.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the endlI941 class.  See the module endlNd.py for the meanings of</span>
<span class="sd">        f, yo, C, I, S and h. Points must be a valid endl2dmath class data structure.&quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">fudge</span> <span class="kn">import</span> <span class="n">gnd</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">gnd</span><span class="o">.</span><span class="n">productData</span><span class="o">.</span><span class="n">distributions</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">pointwiseFormToken</span>
        <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">941</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variablesUnits</span> <span class="o">=</span> <span class="s">&#39;energy_in[MeV];form_factor&#39;</span>

<div class="viewcode-block" id="endlI941.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI941.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">arg</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls the endl2dmathmisc.check2dData function and returns a list of endlCheckerObject instances.</span>
<span class="sd">        See endl2dmathmisc.check2dData for meaning of printWarning and printErrors.&quot;&quot;&quot;</span>

        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">n</span><span class="p">,</span> <span class="n">dummy</span><span class="p">,</span> <span class="n">messages2d</span> <span class="o">=</span> <span class="n">endl2dmathmisc</span><span class="o">.</span><span class="n">check2dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">allowZeroX</span> <span class="o">=</span> <span class="n">allowZeroE</span><span class="p">,</span> <span class="n">positiveY</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="n">printWarning</span><span class="p">,</span> \
            <span class="n">printErrors</span> <span class="o">=</span> <span class="n">printErrors</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI941.set"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI941.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;E (MeV)&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;form factor&quot;</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="n">checkDataType</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI941.toInterpolation"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI941.toInterpolation">[docs]</a>    <span class="k">def</span> <span class="nf">toInterpolation</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">interpolation</span><span class="p">,</span> <span class="n">accuracy</span><span class="p">,</span> <span class="n">diSectionMax</span> <span class="o">=</span> <span class="mi">3</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">interpolation</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolation</span> <span class="o">==</span> <span class="mi">3</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">endlI941</span><span class="p">(</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span>
                <span class="n">data</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">newData</span> <span class="o">=</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="o">.</span><span class="n">toInterpolation</span><span class="p">(</span> <span class="n">data</span><span class="p">,</span> <span class="n">interpolation</span><span class="p">,</span> <span class="n">accuracy</span><span class="p">,</span> <span class="n">diSectionMax</span> <span class="o">=</span> <span class="n">diSectionMax</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">data</span> <span class="o">!=</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span> <span class="n">newData</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="p">]</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">newData</span> <span class="p">)</span>
</div></div>
<div class="viewcode-block" id="endlI942"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI942">[docs]</a><span class="k">class</span> <span class="nc">endlI942</span><span class="p">(</span> <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="p">,</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class is for the I = 942 data.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the endlI942 class.  See the module endlNd.py for the meanings of</span>
<span class="sd">        f, yo, C, I, S and h. Points must be a valid endl2dmath class data structure.&quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">fudge</span> <span class="kn">import</span> <span class="n">gnd</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">gnd</span><span class="o">.</span><span class="n">productData</span><span class="o">.</span><span class="n">distributions</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">pointwiseFormToken</span>
        <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">942</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variablesUnits</span> <span class="o">=</span> <span class="s">&#39;energy_in[MeV];scattering_function&#39;</span>

<div class="viewcode-block" id="endlI942.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI942.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">arg</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls the endl2dmathmisc.check2dData function and returns a list of endlCheckerObject instances.</span>
<span class="sd">        See endl2dmathmisc.check2dData for meaning of printWarning and printErrors.&quot;&quot;&quot;</span>

        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">n</span><span class="p">,</span> <span class="n">dummy</span><span class="p">,</span> <span class="n">messages2d</span> <span class="o">=</span> <span class="n">endl2dmathmisc</span><span class="o">.</span><span class="n">check2dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">allowZeroX</span> <span class="o">=</span> <span class="n">allowZeroE</span><span class="p">,</span> <span class="n">positiveY</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="n">printWarning</span><span class="p">,</span> \
            <span class="n">printErrors</span> <span class="o">=</span> <span class="n">printErrors</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI942.set"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI942.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;E (MeV)&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;scattering function&quot;</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="n">checkDataType</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI942.toInterpolation"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI942.toInterpolation">[docs]</a>    <span class="k">def</span> <span class="nf">toInterpolation</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">interpolation</span><span class="p">,</span> <span class="n">accuracy</span><span class="p">,</span> <span class="n">diSectionMax</span> <span class="o">=</span> <span class="mi">3</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">interpolation</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolation</span> <span class="o">==</span> <span class="mi">3</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">endlI942</span><span class="p">(</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span>
                <span class="n">data</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">newData</span> <span class="o">=</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="o">.</span><span class="n">toInterpolation</span><span class="p">(</span> <span class="n">data</span><span class="p">,</span> <span class="n">interpolation</span><span class="p">,</span> <span class="n">accuracy</span><span class="p">,</span> <span class="n">diSectionMax</span> <span class="o">=</span> <span class="n">diSectionMax</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">data</span> <span class="o">!=</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span> <span class="n">newData</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="p">]</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">newData</span> <span class="p">)</span>
</div></div>
<div class="viewcode-block" id="endlI951"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI951">[docs]</a><span class="k">class</span> <span class="nc">endlI951</span><span class="p">(</span> <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="p">,</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span> <span class="p">)</span> <span class="p">:</span> <span class="c"># Special I = 951 for NADS (i.e., sigma * v)</span>
    <span class="sd">&quot;&quot;&quot;This class is for the I = 951 data. Special I value for NADS.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the endlI951 class.  See the module endlNd.py for the meanings of</span>
<span class="sd">        f, yo, C, I, S and h. Points must be a valid endl2dmath class data structure.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">951</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>

<div class="viewcode-block" id="endlI951.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI951.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">arg</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls the endl2dmathmisc.check2dData function and returns a list of endlCheckerObject instances.</span>
<span class="sd">        See endl2dmathmisc.check2dData for meaning of printWarning and printErrors.&quot;&quot;&quot;</span>

        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">n</span><span class="p">,</span> <span class="n">dummy</span><span class="p">,</span> <span class="n">messages2d</span> <span class="o">=</span> <span class="n">endl2dmathmisc</span><span class="o">.</span><span class="n">check2dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">allowZeroX</span> <span class="o">=</span> <span class="n">allowZeroE</span><span class="p">,</span> <span class="n">positiveY</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="n">printWarning</span><span class="p">,</span> \
            <span class="n">printErrors</span> <span class="o">=</span> <span class="n">printErrors</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messages2d</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI951.set"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI951.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;E (MeV)&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;cross section * v (barn * cm/sec)&quot;</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="n">checkDataType</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span> <span class="p">)</span>
</div></div>
<div class="viewcode-block" id="endlI1"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI1">[docs]</a><span class="k">class</span> <span class="nc">endlI1</span><span class="p">(</span> <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="p">,</span> <span class="n">endl3dmathClasses</span><span class="o">.</span><span class="n">endl3dmath</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class is for the I = 1 data.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the endlI1 class.  See the module endlNd.py for the meanings of</span>
<span class="sd">        f, yo, C, I, S and h. Points must be a valid endl3dmath class data structure.&quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">fudge</span> <span class="kn">import</span> <span class="n">gnd</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">gnd</span><span class="o">.</span><span class="n">productData</span><span class="o">.</span><span class="n">distributions</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">pointwiseFormToken</span>
        <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">i2</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variablesUnits</span> <span class="o">=</span> <span class="s">&#39;energy_in[MeV];mu;P(mu|energy_in)&#39;</span>

<div class="viewcode-block" id="endlI1.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI1.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">normTolerance</span> <span class="o">=</span> <span class="mf">1e-5</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">arg</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Checks to see that the data is consistance with I = 1 data and returns a list of </span>
<span class="sd">        endlCheckerObject instances. Also, calls the endl3dmathmisc.check3dData function. </span>
<span class="sd">        See endl3dmathmisc.check3dData for meaning of printWarning and printErrors.&quot;&quot;&quot;</span>

        <span class="n">normTolerance</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span> <span class="n">normTolerance</span><span class="p">,</span> <span class="n">normCheckTolerance</span> <span class="p">)</span>
        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">d2</span> <span class="o">=</span> <span class="n">endlmath</span><span class="o">.</span><span class="n">ZSum</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">E</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">d2</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="nb">abs</span><span class="p">(</span> <span class="mf">1.</span> <span class="o">-</span> <span class="n">y</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="n">normTolerance</span> <span class="p">)</span> <span class="p">:</span> <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s">&#39;endlI1.check: bad normalize = </span><span class="si">%.8e</span><span class="s"> for E = </span><span class="si">%e</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">y</span><span class="p">,</span> <span class="n">E</span> <span class="p">)</span> <span class="p">)</span>
        <span class="n">messages</span> <span class="o">+=</span> <span class="n">endl3dmathmisc</span><span class="o">.</span><span class="n">check3dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">allowNegativeX</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">allowZeroX</span> <span class="o">=</span> <span class="n">allowZeroE</span><span class="p">,</span> <span class="n">allowNegativeY</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">allowZeroY</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> \
            <span class="n">positiveZ</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">E</span><span class="p">,</span> <span class="n">muP</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">muP</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">1.</span> <span class="p">)</span> <span class="p">:</span> <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s">&#39;endlI1.check: mu = </span><span class="si">%.8e</span><span class="s"> &lt; -1 for E = </span><span class="si">%e</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">muP</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">E</span> <span class="p">)</span> <span class="p">)</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">muP</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">1.</span> <span class="p">)</span> <span class="p">:</span> <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s">&#39;endlI1.check: mu = </span><span class="si">%.8e</span><span class="s"> &gt; 1 for E = </span><span class="si">%e</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">muP</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">E</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">messages</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messages</span> <span class="p">)</span> <span class="p">]</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI1.fixThreshold"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI1.fixThreshold">[docs]</a>    <span class="k">def</span> <span class="nf">fixThreshold</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="mf">10e-3</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode_RaiseOnly</span><span class="p">,</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls endlIClasses.fixThresholdFor3d to fix threshold.&quot;&quot;&quot;</span>

        <span class="n">fixThresholdFor3d</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="n">dThreshold_MeV</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode</span><span class="p">,</span>
            <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI1.getEMin_EMinNext"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI1.getEMin_EMinNext">[docs]</a>    <span class="k">def</span> <span class="nf">getEMin_EMinNext</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Gets the first two Energy values from self&#39;s data. None is return for any absent value.&quot;&quot;&quot;</span>

        <span class="n">EMin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xMin</span><span class="p">(</span> <span class="p">)</span>
        <span class="n">EMinNext</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EMinNext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">EMinNext</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI1.getThresholdsForChecker"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI1.getThresholdsForChecker">[docs]</a>    <span class="k">def</span> <span class="nf">getThresholdsForChecker</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;For internal use only.&quot;</span>

        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="p">[</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="p">[</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span>
        <span class="k">return</span> <span class="p">[]</span>
</div>
<div class="viewcode-block" id="endlI1.getEData"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI1.getEData">[docs]</a>    <span class="k">def</span> <span class="nf">getEData</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">E</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns an endl2dmath object for the data at incident energy E. If E is outside the</span>
<span class="sd">        domain of the data, then None is returned.  If the requested E is not a point in the data </span>
<span class="sd">        then linear interpolation is performed. &quot;&quot;&quot;</span>

        <span class="n">EmuP</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">EmuP</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span><span class="p">(</span> <span class="bp">None</span> <span class="p">)</span>
        <span class="n">nE</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span> <span class="n">EmuP</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">nE</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span><span class="p">(</span> <span class="bp">None</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">E</span> <span class="o">&lt;</span> <span class="n">EmuP</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">E</span> <span class="o">&gt;</span> <span class="n">EmuP</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span><span class="p">(</span> <span class="bp">None</span> <span class="p">)</span>
        <span class="n">EPrior</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">muPPrior</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">for</span> <span class="n">E_</span><span class="p">,</span> <span class="n">muP_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">E_</span> <span class="o">&gt;=</span> <span class="n">E</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">muP</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">E_</span> <span class="o">==</span> <span class="n">E</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="k">for</span> <span class="n">mu</span><span class="p">,</span> <span class="n">P</span> <span class="ow">in</span> <span class="n">muP_</span> <span class="p">:</span> <span class="n">muP</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">mu</span><span class="p">,</span> <span class="n">P</span> <span class="p">]</span> <span class="p">)</span>
                    <span class="k">return</span><span class="p">(</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="p">(</span> <span class="n">muP</span> <span class="p">)</span> <span class="p">)</span>
                <span class="k">return</span><span class="p">(</span> <span class="p">(</span> <span class="p">(</span> <span class="n">E</span> <span class="o">-</span> <span class="n">EPrior</span> <span class="p">)</span> <span class="o">*</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="p">(</span> <span class="n">muP_</span> <span class="p">)</span> <span class="o">+</span> <span class="p">(</span> <span class="n">E_</span> <span class="o">-</span> <span class="n">E</span> <span class="p">)</span> <span class="o">*</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="p">(</span> <span class="n">muPPrior</span> <span class="p">)</span> <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="n">E_</span> <span class="o">-</span> <span class="n">EPrior</span> <span class="p">)</span> <span class="p">)</span>
            <span class="n">EPrior</span> <span class="o">=</span> <span class="n">E_</span>
            <span class="n">muPPrior</span> <span class="o">=</span> <span class="n">muP_</span>
</div>
<div class="viewcode-block" id="endlI1.normalize"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI1.normalize">[docs]</a>    <span class="k">def</span> <span class="nf">normalize</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Normalizes the data so that the integral P(E, mu ) dmu = 1.&quot;&quot;&quot;</span>

        <span class="n">d2</span> <span class="o">=</span> <span class="n">endlmath</span><span class="o">.</span><span class="n">ZSum</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">x_zy</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">d2</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">s</span> <span class="o">!=</span> <span class="mf">0.</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">for</span> <span class="n">yz</span> <span class="ow">in</span> <span class="n">x_zy</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">:</span> <span class="n">yz</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">yz</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="n">s</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="endlI1.runningMuSum"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI1.runningMuSum">[docs]</a>    <span class="k">def</span> <span class="nf">runningMuSum</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Does a running sum of the mu data, returning an endl3dmath object of the results.&quot;&quot;&quot;</span>

        <span class="n">d3</span> <span class="o">=</span> <span class="n">endlmath</span><span class="o">.</span><span class="n">runningZSum</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="s">&quot;running Sum of P( E, mu ) vs mu&quot;</span> <span class="p">)</span>
        <span class="k">return</span> <span class="n">d3</span>
</div>
<div class="viewcode-block" id="endlI1.setEData"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI1.setEData">[docs]</a>    <span class="k">def</span> <span class="nf">setEData</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">E</span><span class="p">,</span> <span class="n">muP</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;This method adds muP at E. If E is in self than its distribution is over-written; otherwise, a new E is added.&quot;&quot;&quot;</span>

        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">muP_</span> <span class="o">=</span> <span class="n">endl2dmathmisc</span><span class="o">.</span><span class="n">get2dmathData</span><span class="p">(</span> <span class="n">muP</span><span class="p">,</span> <span class="s">&quot;setEData&quot;</span><span class="p">,</span> <span class="s">&quot;what ever&quot;</span> <span class="p">)</span> 
        <span class="n">muP</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">mu</span><span class="p">,</span> <span class="n">P</span> <span class="ow">in</span> <span class="n">muP_</span> <span class="p">:</span> <span class="n">muP</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">mu</span><span class="p">,</span> <span class="n">P</span> <span class="p">]</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">E_</span><span class="p">,</span> <span class="n">muP_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">E</span> <span class="o">&lt;=</span> <span class="n">E_</span> <span class="p">)</span> <span class="p">:</span> <span class="k">break</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">E</span> <span class="p">)</span> <span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">muP</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span> <span class="n">i</span><span class="p">,</span> <span class="p">[</span> <span class="n">E</span><span class="p">,</span> <span class="n">muP</span> <span class="p">]</span> <span class="p">)</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">E</span><span class="p">,</span> <span class="n">muP</span> <span class="p">]</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI1.set"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI1.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;E (MeV)&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;mu&quot;</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="s">&quot;pdf(E,mu) vs mu&quot;</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="mi">0</span>  <span class="p">)</span> <span class="p">:</span>

        <span class="n">endl3dmathClasses</span><span class="o">.</span><span class="n">endl3dmath</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="n">checkDataType</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="n">zLabel</span>
            <span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI1.toZAsFrame"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI1.toZAsFrame">[docs]</a>    <span class="k">def</span> <span class="nf">toZAsFrame</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">newProjectileMass</span><span class="p">,</span> <span class="n">newTargetMass</span><span class="p">,</span> <span class="n">halflife</span><span class="p">,</span> <span class="n">bdflsFile</span><span class="p">,</span> <span class="n">ELevel</span> <span class="o">=</span> <span class="mf">0.</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">newI1</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">toZAsFrameMisc</span><span class="p">(</span> <span class="n">endlI1</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">newProjectileMass</span><span class="p">,</span> <span class="n">newTargetMass</span><span class="p">,</span> <span class="n">ELevel</span><span class="p">,</span> <span class="n">halflife</span><span class="p">,</span> <span class="n">bdflsFile</span><span class="p">,</span> <span class="bp">True</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="p">[</span> <span class="n">newI1</span> <span class="p">]</span> <span class="p">)</span>
</div></div>
<div class="viewcode-block" id="endlI21"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI21">[docs]</a><span class="k">class</span> <span class="nc">endlI21</span><span class="p">(</span> <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="p">,</span> <span class="n">endl3dmathClasses</span><span class="o">.</span><span class="n">endl3dmath</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class is for the I = 21 data.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the endlI21 class.  See the module endlNd.py for the meanings of</span>
<span class="sd">        f, yo, C, I, S and h. Points must be a valid endl3dmath class data structure.&quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">fudge</span> <span class="kn">import</span> <span class="n">gnd</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">form</span> <span class="o">=</span> <span class="n">gnd</span><span class="o">.</span><span class="n">productData</span><span class="o">.</span><span class="n">distributions</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">pointwiseFormToken</span>
        <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">i2</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>

<div class="viewcode-block" id="endlI21.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI21.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">arg</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Checks to see that the data is consistance with I = 21 data and returns a list of </span>
<span class="sd">        endlCheckerObject instances. Also, calls the endl3dmathmisc.check3dData function. </span>
<span class="sd">        See endl3dmathmisc.check3dData for meaning of printWarning and printErrors.&quot;&quot;&quot;</span>

        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="n">endl3dmathmisc</span><span class="o">.</span><span class="n">check3dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">allowNegativeX</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">allowZeroX</span> <span class="o">=</span> <span class="n">allowZeroE</span><span class="p">,</span> <span class="n">allowNegativeY</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">positiveZ</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> \
            <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">messages</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messages</span> <span class="p">)</span> <span class="p">]</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI21.fixThreshold"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI21.fixThreshold">[docs]</a>    <span class="k">def</span> <span class="nf">fixThreshold</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="mf">10e-3</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode_RaiseOnly</span><span class="p">,</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls endlIClasses.fixThresholdFor3d to fix threshold.&quot;&quot;&quot;</span>

        <span class="n">fixThresholdFor3d</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="n">dThreshold_MeV</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode</span><span class="p">,</span>
            <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI21.getEMin_EMinNext"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI21.getEMin_EMinNext">[docs]</a>    <span class="k">def</span> <span class="nf">getEMin_EMinNext</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Gets the first two Energy values from self&#39;s data. None is return for any absent value.&quot;&quot;&quot;</span>

        <span class="n">EMin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xMin</span><span class="p">(</span> <span class="p">)</span>
        <span class="n">EMinNext</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EMinNext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">EMinNext</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI21.set"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI21.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;E (MeV)&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;E&#39; (MeV)&quot;</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="s">&quot;pdf(E,E&#39;) vs E&#39; (1/MeV)&quot;</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">endl3dmathClasses</span><span class="o">.</span><span class="n">endl3dmath</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="n">checkDataType</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="n">zLabel</span><span class="p">,</span>
            <span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span> <span class="p">)</span>
</div></div>
<div class="viewcode-block" id="endlI22"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI22">[docs]</a><span class="k">class</span> <span class="nc">endlI22</span><span class="p">(</span> <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="p">,</span> <span class="n">endl3dmathClasses</span><span class="o">.</span><span class="n">endl3dmath</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class is for the I = 22 data.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the endlI22 class.  See the module endlNd.py for the meanings of</span>
<span class="sd">        f, yo, C, I, S and h. Points must be a valid endl3dmath class data structure.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">i2</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>

<div class="viewcode-block" id="endlI22.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI22.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">arg</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Checks to see that the data is consistance with I = 22 data and returns a list of </span>
<span class="sd">        endlCheckerObject instances. Also, calls the endl3dmathmisc.check3dData function. </span>
<span class="sd">        See endl3dmathmisc.check3dData for meaning of printWarning and printErrors.&quot;&quot;&quot;</span>

        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="n">endl3dmathmisc</span><span class="o">.</span><span class="n">check3dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">allowNegativeX</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">allowZeroX</span> <span class="o">=</span> <span class="n">allowZeroE</span><span class="p">,</span> <span class="n">allowNegativeY</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">positiveZ</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> \
            <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">E</span><span class="p">,</span> <span class="n">muP</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">muP</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.</span> <span class="p">)</span> <span class="p">:</span> <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s">&#39;endlI22.check: 1 - mu = </span><span class="si">%.8e</span><span class="s"> &lt; 0 for E = </span><span class="si">%e</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">muP</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">E</span> <span class="p">)</span> <span class="p">)</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">muP</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">2.</span> <span class="p">)</span> <span class="p">:</span> <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s">&#39;endlI22.check: 1 - mu = </span><span class="si">%.8e</span><span class="s"> &gt; 2 for E = </span><span class="si">%e</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">muP</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">E</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">messages</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messages</span> <span class="p">)</span> <span class="p">]</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI22.fixThreshold"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI22.fixThreshold">[docs]</a>    <span class="k">def</span> <span class="nf">fixThreshold</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="mf">10e-3</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode_RaiseOnly</span><span class="p">,</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls endlIClasses.fixThresholdFor3d to fix threshold.&quot;&quot;&quot;</span>

        <span class="n">fixThresholdFor3d</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="n">dThreshold_MeV</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode</span><span class="p">,</span>
            <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI22.getEMin_EMinNext"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI22.getEMin_EMinNext">[docs]</a>    <span class="k">def</span> <span class="nf">getEMin_EMinNext</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Gets the first two Energy values from self&#39;s data. None is return for any absent value.&quot;&quot;&quot;</span>

        <span class="n">EMin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xMin</span><span class="p">(</span> <span class="p">)</span>
        <span class="n">EMinNext</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EMinNext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">EMinNext</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI22.set"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI22.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;E (MeV)&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;x = 1 - mu&quot;</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="s">&quot;pdf(E,x) vs x&quot;</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">endl3dmathClasses</span><span class="o">.</span><span class="n">endl3dmath</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="n">checkDataType</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="n">zLabel</span><span class="p">,</span> 
            <span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span> <span class="p">)</span>
</div></div>
<div class="viewcode-block" id="endlI81"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI81">[docs]</a><span class="k">class</span> <span class="nc">endlI81</span><span class="p">(</span> <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="p">,</span> <span class="n">endl3dmathClasses</span><span class="o">.</span><span class="n">endl3dmath</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class is for the I = 81 data.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the endlI81 class.  See the module endlNd.py for the meanings of</span>
<span class="sd">        f, yo, C, I, S and h. Points must be a valid endl3dmath class data structure.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">81</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">i2</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>

<div class="viewcode-block" id="endlI81.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI81.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">arg</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Checks to see that the data is consistance with I = 81 data and returns a list of </span>
<span class="sd">        endlCheckerObject instances. Also, calls the endl3dmathmisc.check3dData function. </span>
<span class="sd">        See endl3dmathmisc.check3dData for meaning of printWarning and printErrors.&quot;&quot;&quot;</span>

        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="n">endl3dmathmisc</span><span class="o">.</span><span class="n">check3dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">allowNegativeX</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">allowZeroX</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">allowNegativeY</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">allowZeroY</span> <span class="o">=</span> <span class="n">allowZeroE</span><span class="p">,</span> \
            <span class="n">positiveZ</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">messages</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messages</span> <span class="p">)</span> <span class="p">]</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI81.set"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI81.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;T (MeV)&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;E (MeV)&quot;</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="s">&quot;cross section (T,E)&quot;</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">endl3dmathClasses</span><span class="o">.</span><span class="n">endl3dmath</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="n">checkDataType</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="n">zLabel</span><span class="p">,</span>
            <span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span> <span class="p">)</span>
</div></div>
<div class="viewcode-block" id="endlI84"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI84">[docs]</a><span class="k">class</span> <span class="nc">endlI84</span><span class="p">(</span> <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="p">,</span> <span class="n">endl3dmathClasses</span><span class="o">.</span><span class="n">endl3dmath</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class is for the I = 84 data.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the endlI84 class.  See the module endlNd.py for the meanings of</span>
<span class="sd">        f, yo, C, I, S and h. Points must be a valid endl3dmath class data structure.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">84</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">i2</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>

<div class="viewcode-block" id="endlI84.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI84.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">arg</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Checks to see that the data is consistance with I = 84 data and returns a list of </span>
<span class="sd">        endlCheckerObject instances. Also, calls the endl3dmathmisc.check3dData function. </span>
<span class="sd">        See endl3dmathmisc.check3dData for meaning of printWarning and printErrors.&quot;&quot;&quot;</span>

        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="n">endl3dmathmisc</span><span class="o">.</span><span class="n">check3dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">allowNegativeX</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">allowZeroX</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">allowNegativeY</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">positiveZ</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> \
            <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">messages</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messages</span> <span class="p">)</span> <span class="p">]</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI84.set"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI84.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;E (MeV)&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;E&#39; (MeV)&quot;</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="s">&quot;f(T,E&#39;)&quot;</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">endl3dmathClasses</span><span class="o">.</span><span class="n">endl3dmath</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="n">checkDataType</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="n">zLabel</span><span class="p">,</span>
            <span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span> <span class="p">)</span>
</div></div>
<div class="viewcode-block" id="endlI952"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI952">[docs]</a><span class="k">class</span> <span class="nc">endlI952</span><span class="p">(</span> <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="p">,</span> <span class="n">endl3dmathClasses</span><span class="o">.</span><span class="n">endl3dmath</span> <span class="p">)</span> <span class="p">:</span> <span class="c"># Special I = 952 for NADS (i.e., total P(E,E&#39;) )</span>
    <span class="sd">&quot;&quot;&quot;This class is for the I = 952 data. Special I value for NADS.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the endlI952 class.  See the module endlNd.py for the meanings of</span>
<span class="sd">        f, yo, C, I, S and h. Points must be a valid endl3dmath class data structure.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">952</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>

<div class="viewcode-block" id="endlI952.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI952.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">arg</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Checks to see that the data is consistance with I = 952 data and returns a list of </span>
<span class="sd">        endlCheckerObject instances. Also, calls the endl3dmathmisc.check3dData function. </span>
<span class="sd">        See endl3dmathmisc.check3dData for meaning of printWarning and printErrors.&quot;&quot;&quot;</span>

        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="n">endl3dmathmisc</span><span class="o">.</span><span class="n">check3dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">allowNegativeX</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">allowNegativeY</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">positiveZ</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> \
            <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">messages</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messages</span> <span class="p">)</span> <span class="p">]</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI952.set"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI952.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;E (MeV)&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;E&#39; (MeV)&quot;</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="s">&quot;P(E,E&#39;)&quot;</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">endl3dmathClasses</span><span class="o">.</span><span class="n">endl3dmath</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="n">checkDataType</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="n">zLabel</span><span class="p">,</span>
            <span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span> <span class="p">)</span>
</div></div>
<div class="viewcode-block" id="endlI3"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI3">[docs]</a><span class="k">class</span> <span class="nc">endlI3</span><span class="p">(</span> <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="p">,</span> <span class="n">endl4dmathClasses</span><span class="o">.</span><span class="n">endl4dmath</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class is for the I = 3 data.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the endlI3 class.  See the module endlNd.py for the meanings of</span>
<span class="sd">        f, yo, C, I, S and h. Points must be a valid endl4dmath class data structure.&quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">fudge</span> <span class="kn">import</span> <span class="n">gnd</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">gnd</span><span class="o">.</span><span class="n">productData</span><span class="o">.</span><span class="n">distributions</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">pointwiseFormToken</span>
        <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">i2</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">i3</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xInterpolation</span> <span class="o">=</span> <span class="s">&#39;linear,linear,unitbase:x:linear,unitbase:y:linear&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variablesUnits</span> <span class="o">=</span> <span class="s">&#39;energy_in[MeV];mu;energy_out[MeV];pdf(energy_out|mu,energy_in)&#39;</span>

<div class="viewcode-block" id="endlI3.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI3.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">normTolerance</span> <span class="o">=</span> <span class="mf">1e-5</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">arg</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Checks to see that the data is consistance with I = 3 data and returns a list of</span>
<span class="sd">        endlCheckerObject instances. Also, calls the endl4dmathmisc.check4dData function.</span>
<span class="sd">        See endl4dmathmisc.check4dData for meaning of printWarning and printErrors.&quot;&quot;&quot;</span>

        <span class="n">normTolerance</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span> <span class="n">normTolerance</span><span class="p">,</span> <span class="n">normCheckTolerance</span> <span class="p">)</span>
        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">Q</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getQ</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">:</span> <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s">&#39;endlI3.check: (E, mu, Ep, P) data len = </span><span class="si">%d</span><span class="s"> &lt; 2&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">E</span><span class="p">,</span> <span class="n">muEpP</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">muEpP</span> <span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">:</span> <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s">&#39;endlI3.check: (mu, Ep, P) data len = </span><span class="si">%d</span><span class="s"> &lt; 2 for E = </span><span class="si">%e</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">muEpP</span> <span class="p">),</span> <span class="n">E</span> <span class="p">)</span> <span class="p">)</span>
            <span class="k">for</span> <span class="n">mu</span><span class="p">,</span> <span class="n">EpP</span> <span class="ow">in</span> <span class="n">muEpP</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">EpP</span> <span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">:</span> <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s">&#39;endlI3.check: Ep, P len = </span><span class="si">%d</span><span class="s"> &lt; 2 for E = </span><span class="si">%e</span><span class="s"> and mu = </span><span class="si">%e</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">EpP</span> <span class="p">),</span> <span class="n">E</span><span class="p">,</span> <span class="n">mu</span> <span class="p">)</span> <span class="p">)</span>
                <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">C</span> <span class="o">&gt;=</span> <span class="mi">50</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">C</span> <span class="o">&lt;</span> <span class="mi">58</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">continue</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">EpP</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">E</span> <span class="o">+</span> <span class="n">Q</span> <span class="p">)</span> <span class="p">:</span> <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s">&quot;endlI3.check: E&#39; = </span><span class="si">%.8e</span><span class="s"> &gt; E + Q = </span><span class="si">%e</span><span class="s"> for E = </span><span class="si">%e</span><span class="s">, mu = </span><span class="si">%e</span><span class="s">&quot;</span> <span class="o">%</span> \
                    <span class="p">(</span> <span class="n">EpP</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">E</span> <span class="o">+</span> <span class="n">Q</span><span class="p">,</span> <span class="n">E</span><span class="p">,</span> <span class="n">mu</span> <span class="p">)</span> <span class="p">)</span>
            <span class="n">d2</span> <span class="o">=</span> <span class="n">endlmath</span><span class="o">.</span><span class="n">ZSum</span><span class="p">(</span> <span class="n">muEpP</span> <span class="p">)</span>
            <span class="k">for</span> <span class="n">mu</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">d2</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="nb">abs</span><span class="p">(</span> <span class="mf">1.</span> <span class="o">-</span> <span class="n">y</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="n">normTolerance</span> <span class="p">)</span> <span class="p">:</span> <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s">&#39;endlI3.check: bad normalize = </span><span class="si">%.8e</span><span class="s"> for E = </span><span class="si">%e</span><span class="s"> and mu = </span><span class="si">%e</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">y</span><span class="p">,</span> <span class="n">E</span><span class="p">,</span> <span class="n">mu</span> <span class="p">)</span> <span class="p">)</span>
        <span class="n">messages</span> <span class="o">+=</span> <span class="n">endl4dmathmisc</span><span class="o">.</span><span class="n">check4dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">allowNegativeT</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">allowZeroT</span> <span class="o">=</span> <span class="n">allowZeroE</span><span class="p">,</span> <span class="n">allowNegativeX</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">allowZeroX</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> \
            <span class="n">allowNegativeY</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">positiveZ</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="n">printWarning</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="n">printErrors</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span> \
            <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">messages</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messages</span> <span class="p">)</span> <span class="p">]</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI3.copyData"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI3.copyData">[docs]</a>    <span class="k">def</span> <span class="nf">copyData</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns an endlI3 instance - that is a copy, and not a reference - of self.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">endlI3</span><span class="p">(</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="n">endl4dmathClasses</span><span class="o">.</span><span class="n">endl4dmath</span><span class="o">.</span><span class="n">copyData</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI3.fixThreshold"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI3.fixThreshold">[docs]</a>    <span class="k">def</span> <span class="nf">fixThreshold</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="mf">10e-3</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode_RaiseOnly</span><span class="p">,</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls endlIClasses.fixThresholdFor4d to fix threshold.&quot;&quot;&quot;</span>

        <span class="n">fixThresholdFor4d</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="n">dThreshold_MeV</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode</span><span class="p">,</span>
            <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI3.getMuEpPAtE"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI3.getMuEpPAtE">[docs]</a>    <span class="k">def</span> <span class="nf">getMuEpPAtE</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">E</span><span class="p">,</span> <span class="n">extrapolation</span> <span class="o">=</span> <span class="n">endl3dmathmisc</span><span class="o">.</span><span class="n">noExtrapolation</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns an endl3dmath object of P&#39;( mu, E&#39; ) = P( E, mu, E&#39; ).</span>
<span class="sd">    E is compare to the incident energies in self and is considered to be a match if the</span>
<span class="sd">    difference is less than relEps. Also see muEpP.&quot;&quot;&quot;</span>

        <span class="n">MuEpP</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span><span class="p">(</span> <span class="n">MuEpP</span> <span class="p">)</span>
        <span class="k">while</span><span class="p">(</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="p">)</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">E</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">MuEpP</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">break</span>
            <span class="k">elif</span><span class="p">(</span> <span class="n">E</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">extrapolation</span> <span class="o">==</span> <span class="n">endl3dmathmisc</span><span class="o">.</span><span class="n">flatExtrapolation</span> <span class="p">)</span> <span class="p">:</span> <span class="n">MuEpP</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span> <span class="p">:</span>
                    <span class="n">E1</span><span class="p">,</span> <span class="n">MuEpP1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">E2</span><span class="p">,</span> <span class="n">MuEpP2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="n">MuEpP1</span> <span class="o">=</span> <span class="n">endl3dmathClasses</span><span class="o">.</span><span class="n">endl3dmath</span><span class="p">(</span> <span class="n">MuEpP1</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span>
                    <span class="n">MuEpP2</span> <span class="o">=</span> <span class="n">endl3dmathClasses</span><span class="o">.</span><span class="n">endl3dmath</span><span class="p">(</span> <span class="n">MuEpP2</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span>
                    <span class="n">f</span> <span class="o">=</span> <span class="p">(</span> <span class="n">E2</span> <span class="o">-</span> <span class="n">E</span> <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="n">E2</span> <span class="o">-</span> <span class="n">E1</span> <span class="p">)</span>
                    <span class="n">g</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">f</span>
                    <span class="n">mu1Min</span><span class="p">,</span> <span class="n">mu1Max</span> <span class="o">=</span> <span class="n">MuEpP1</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">MuEpP1</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">mu2Min</span><span class="p">,</span> <span class="n">mu2Max</span> <span class="o">=</span> <span class="n">MuEpP2</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">MuEpP2</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">muMin</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span> <span class="o">-</span><span class="mf">1.</span><span class="p">,</span> <span class="n">mu1Min</span> <span class="o">+</span> <span class="n">g</span> <span class="o">*</span> <span class="p">(</span> <span class="n">mu2Min</span> <span class="o">-</span> <span class="n">mu1Min</span> <span class="p">)</span> <span class="p">)</span>        <span class="c"># We are going to use unit-base interpolation of mu.</span>
                    <span class="n">muMax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span>  <span class="mf">1.</span><span class="p">,</span> <span class="n">mu1Max</span> <span class="o">+</span> <span class="n">g</span> <span class="o">*</span> <span class="p">(</span> <span class="n">mu2Max</span> <span class="o">-</span> <span class="n">mu1Max</span> <span class="p">)</span> <span class="p">)</span>        <span class="c"># However, must be careful to handle case where mu ranges from</span>
                    <span class="n">dMu1</span> <span class="o">=</span> <span class="p">(</span> <span class="n">mu1Max</span> <span class="o">-</span> <span class="n">mu1Min</span> <span class="p">)</span>                                  <span class="c"># -1 to 1 inclusively.</span>
                    <span class="n">mus</span> <span class="o">=</span> <span class="p">[</span> <span class="n">muMax</span> <span class="o">*</span> <span class="p">(</span> <span class="p">(</span> <span class="n">mu1Max</span> <span class="o">-</span> <span class="n">mu</span> <span class="p">)</span> <span class="o">/</span> <span class="n">dMu1</span> <span class="p">)</span> <span class="o">+</span> <span class="n">muMin</span> <span class="o">*</span> <span class="p">(</span> <span class="p">(</span> <span class="n">mu</span> <span class="o">-</span> <span class="n">mu1Min</span> <span class="p">)</span> <span class="o">/</span> <span class="n">dMu1</span> <span class="p">)</span> <span class="k">for</span> <span class="n">mu</span><span class="p">,</span> <span class="n">EpP</span> <span class="ow">in</span> <span class="n">MuEpP1</span><span class="o">.</span><span class="n">data</span> <span class="p">]</span>
                    <span class="n">dMu2</span> <span class="o">=</span> <span class="p">(</span> <span class="n">mu2Max</span> <span class="o">-</span> <span class="n">mu2Min</span> <span class="p">)</span>
                    <span class="k">for</span> <span class="n">mu</span><span class="p">,</span> <span class="n">EpP</span> <span class="ow">in</span> <span class="n">MuEpP2</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
                        <span class="n">doIt</span> <span class="o">=</span> <span class="bp">True</span>
                        <span class="n">mup</span> <span class="o">=</span> <span class="n">muMax</span> <span class="o">*</span> <span class="p">(</span> <span class="p">(</span> <span class="n">mu2Max</span> <span class="o">-</span> <span class="n">mu</span> <span class="p">)</span> <span class="o">/</span> <span class="n">dMu2</span> <span class="p">)</span> <span class="o">+</span> <span class="n">muMin</span> <span class="o">*</span> <span class="p">(</span> <span class="p">(</span> <span class="n">mu</span> <span class="o">-</span> <span class="n">mu2Min</span> <span class="p">)</span> <span class="o">/</span> <span class="n">dMu2</span> <span class="p">)</span>
                        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">mus</span> <span class="p">:</span>
                            <span class="k">if</span><span class="p">(</span> <span class="nb">abs</span><span class="p">(</span> <span class="n">m</span> <span class="o">-</span> <span class="n">mup</span> <span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-14</span> <span class="p">)</span> <span class="p">:</span> <span class="n">doIt</span> <span class="o">=</span> <span class="bp">False</span>
                        <span class="k">if</span><span class="p">(</span> <span class="n">doIt</span> <span class="p">)</span> <span class="p">:</span> <span class="n">mus</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">mup</span> <span class="p">)</span>
                    <span class="n">mus</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span> <span class="p">)</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">mus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="k">while</span><span class="p">(</span> <span class="n">mus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span> <span class="p">:</span> <span class="k">del</span> <span class="n">mus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">mus</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">mus</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="k">while</span><span class="p">(</span> <span class="n">mus</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span> <span class="k">del</span> <span class="n">mus</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">mus</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>
                    <span class="n">MuEpP</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="n">dMu</span> <span class="o">=</span> <span class="n">muMax</span> <span class="o">-</span> <span class="n">muMin</span>
                    <span class="k">for</span> <span class="n">mu</span> <span class="ow">in</span> <span class="n">mus</span> <span class="p">:</span>
                        <span class="n">mu1</span> <span class="o">=</span> <span class="n">mu1Min</span> <span class="o">*</span> <span class="p">(</span> <span class="p">(</span> <span class="n">muMax</span> <span class="o">-</span> <span class="n">mu</span> <span class="p">)</span> <span class="o">/</span> <span class="n">dMu</span> <span class="p">)</span> <span class="o">+</span> <span class="n">mu1Max</span> <span class="o">*</span> <span class="p">(</span> <span class="p">(</span> <span class="n">mu</span> <span class="o">-</span> <span class="n">muMin</span> <span class="p">)</span> <span class="o">/</span> <span class="n">dMu</span> <span class="p">)</span>
                        <span class="n">mu2</span> <span class="o">=</span> <span class="n">mu2Min</span> <span class="o">*</span> <span class="p">(</span> <span class="p">(</span> <span class="n">muMax</span> <span class="o">-</span> <span class="n">mu</span> <span class="p">)</span> <span class="o">/</span> <span class="n">dMu</span> <span class="p">)</span> <span class="o">+</span> <span class="n">mu2Max</span> <span class="o">*</span> <span class="p">(</span> <span class="p">(</span> <span class="n">mu</span> <span class="o">-</span> <span class="n">muMin</span> <span class="p">)</span> <span class="o">/</span> <span class="n">dMu</span> <span class="p">)</span>
                        <span class="n">d</span> <span class="o">=</span> <span class="n">f</span> <span class="o">*</span> <span class="n">MuEpP1</span><span class="o">.</span><span class="n">getAtX</span><span class="p">(</span> <span class="n">mu1</span><span class="p">,</span> <span class="n">unitBase</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">endl2dmathObject</span> <span class="o">=</span> <span class="bp">True</span> <span class="p">)</span> \
                            <span class="o">+</span> <span class="n">g</span> <span class="o">*</span> <span class="n">MuEpP2</span><span class="o">.</span><span class="n">getAtX</span><span class="p">(</span> <span class="n">mu2</span><span class="p">,</span> <span class="n">unitBase</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">endl2dmathObject</span> <span class="o">=</span> <span class="bp">True</span> <span class="p">)</span>
                        <span class="n">MuEpP</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">mu</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">data</span> <span class="p">]</span> <span class="p">)</span>
                <span class="k">break</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">i</span> <span class="o">==</span> <span class="n">n</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="n">extrapolation</span> <span class="o">==</span> <span class="n">endl3dmathmisc</span><span class="o">.</span><span class="n">flatExtrapolation</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="n">MuEpP</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span><span class="p">(</span> <span class="ow">not</span><span class="p">(</span> <span class="n">MuEpP</span> <span class="ow">is</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="n">MuEpP</span> <span class="o">=</span> <span class="n">endl3dmathClasses</span><span class="o">.</span><span class="n">endl3dmath</span><span class="p">(</span> <span class="n">MuEpP</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;mu&quot;</span><span class="p">,</span>
            <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;E&#39;&quot;</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="s">&quot;P(mu,E&#39;) per E&#39; (1/MeV)&quot;</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">MuEpP</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI3.getEMin_EMinNext"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI3.getEMin_EMinNext">[docs]</a>    <span class="k">def</span> <span class="nf">getEMin_EMinNext</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Gets the first two Energy values from self&#39;s data. None is return for any absent value.&quot;&quot;&quot;</span>

        <span class="n">EMin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tMin</span><span class="p">(</span> <span class="p">)</span>
        <span class="n">EMinNext</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EMinNext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">EMinNext</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI3.getThresholdsForChecker"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI3.getThresholdsForChecker">[docs]</a>    <span class="k">def</span> <span class="nf">getThresholdsForChecker</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;For internal use only.&quot;</span>

        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="p">[</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="p">[</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span>
        <span class="k">return</span> <span class="p">[]</span>
</div>
<div class="viewcode-block" id="endlI3.E"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI3.E">[docs]</a>    <span class="k">def</span> <span class="nf">E</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">i</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Returns the (i+1)^th incident energy value as a float or None if i is out-of-range.&quot;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="nb">float</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
        <span class="k">return</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="endlI3.EIndexMu"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI3.EIndexMu">[docs]</a>    <span class="k">def</span> <span class="nf">EIndexMu</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">iE</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">unitBase</span> <span class="o">=</span> <span class="bp">True</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns an endl2dmath object that is the interpolation of self&#39;s data at mu for energy index iE.&quot;&quot;&quot;</span>

        <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">iE</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">iE</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">Error in endlI3.EIndexMu: energy index iE = </span><span class="si">%d</span><span class="s"> out of range.&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span> <span class="p">)</span>
        <span class="n">MuEpP</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">iE</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span><span class="p">(</span>   <span class="n">mu</span> <span class="o">&lt;=</span> <span class="n">MuEpP</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">MuEpP</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span><span class="p">(</span> <span class="n">mu</span> <span class="o">&gt;=</span> <span class="n">MuEpP</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">MuEpP</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">endl3dmathmisc</span><span class="o">.</span><span class="n">interpolate3d</span><span class="p">(</span> <span class="n">mu</span><span class="p">,</span> <span class="n">MuEpP</span><span class="p">,</span> <span class="n">unitBase</span> <span class="o">=</span> <span class="n">unitBase</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="p">(</span> <span class="n">data</span> <span class="p">)</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI3.EMax"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI3.EMax">[docs]</a>    <span class="k">def</span> <span class="nf">EMax</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Returns the last incident energy value for self. Returns None if data is empty.&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">tMax</span><span class="p">(</span> <span class="p">)</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI3.EMin"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI3.EMin">[docs]</a>    <span class="k">def</span> <span class="nf">EMin</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Returns the first incident energy value for self. Returns None if data is empty.&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">tMin</span><span class="p">(</span> <span class="p">)</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI3.muEpP"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI3.muEpP">[docs]</a>    <span class="k">def</span> <span class="nf">muEpP</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">E</span><span class="p">,</span> <span class="n">relEps</span> <span class="o">=</span> <span class="mf">1e-5</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns an endl3dmath object of P&#39;( mu, E&#39; ) = P( E, mu, E&#39; ).</span>
<span class="sd">    E is compare to the incident energies in self and is considered to be a match if the</span>
<span class="sd">    difference is less than relEps. Also see getMuEpPAtE.&quot;&quot;&quot;</span>

        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="n">n</span> <span class="p">)</span> <span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nb">abs</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">E</span> <span class="p">)</span> <span class="o">&lt;=</span> <span class="n">relEps</span> <span class="p">)</span> <span class="p">:</span>       <span class="c"># ???? needs interpolation.</span>
                <span class="k">return</span> <span class="n">endl3dmathClasses</span><span class="o">.</span><span class="n">endl3dmath</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;mu&quot;</span><span class="p">,</span>
                    <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;E&#39;&quot;</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="s">&quot;P(mu,E&#39;) per E&#39; (1/MeV)&quot;</span> <span class="p">)</span>
        <span class="k">return</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="endlI3.mapMuEpPToGrid"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI3.mapMuEpPToGrid">[docs]</a>    <span class="k">def</span> <span class="nf">mapMuEpPToGrid</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">E</span><span class="p">,</span> <span class="n">relEps</span> <span class="o">=</span> <span class="mf">1e-5</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;P( E = E, mu, E&#39; ) with mu, and E&#39; mapped to a grid determine from</span>
<span class="sd">    the mu and E&#39; points.  Returns a endl3dmath object of list[ u, list[ E&#39;, P( u, E&#39; ) ] ].</span>
<span class="sd">    See muEpP( ) for meaning of relEps.&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">trim</span><span class="p">(</span> <span class="n">d</span> <span class="p">)</span> <span class="p">:</span>

            <span class="n">d</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span> <span class="p">)</span>
            <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">e</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">d</span> <span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">e</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">i</span> <span class="p">)</span>
                    <span class="n">e</span> <span class="o">=</span> <span class="n">i</span>
            <span class="k">return</span><span class="p">(</span> <span class="n">a</span> <span class="p">)</span>

        <span class="n">d3i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">muEpP</span><span class="p">(</span> <span class="n">E</span><span class="p">,</span> <span class="n">relEps</span> <span class="p">)</span>                       <span class="c"># Get 3-d data (u, E&#39;, P).</span>
        <span class="k">if</span> <span class="p">(</span> <span class="n">d3i</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="bp">None</span>
        <span class="n">EpGrid</span> <span class="o">=</span> <span class="p">[]</span>                                         <span class="c"># All E&#39; points.</span>
        <span class="n">EpL</span> <span class="o">=</span> <span class="p">[]</span>                                            <span class="c"># Lower E&#39; end point of data for all u.</span>
        <span class="n">EpU</span> <span class="o">=</span> <span class="p">[]</span>                                            <span class="c"># Upper E&#39; end point of data for all u.</span>
        <span class="k">for</span> <span class="n">u_etal</span> <span class="ow">in</span> <span class="n">d3i</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span> <span class="n">u_etal</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>  <span class="o">!=</span> <span class="mf">0.</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EpL</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">u_etal</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span> <span class="n">u_etal</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mf">0.</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EpU</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">u_etal</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
            <span class="k">for</span> <span class="n">etal</span> <span class="ow">in</span> <span class="n">u_etal</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">:</span> <span class="n">EpGrid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">etal</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
        <span class="n">EpGrid</span> <span class="o">=</span> <span class="n">trim</span><span class="p">(</span> <span class="n">EpGrid</span> <span class="p">)</span>                             <span class="c"># Sort and remove redundant Ep points.</span>
        <span class="n">EpLU</span> <span class="o">=</span> <span class="p">[]</span>                                           <span class="c"># Additional E points to add to make end-points go to 0.</span>
        <span class="n">EpL</span> <span class="o">=</span> <span class="n">trim</span><span class="p">(</span> <span class="n">EpL</span> <span class="p">)</span>                                   <span class="c"># Sort and remove redundant EpL points.</span>
        <span class="n">EpL</span> <span class="o">=</span> <span class="n">EpL</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>                                       <span class="c"># Do not need the lowest global E point.</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">Ep</span> <span class="ow">in</span> <span class="n">EpL</span> <span class="p">:</span>
            <span class="k">while</span> <span class="p">(</span> <span class="n">EpGrid</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Ep</span> <span class="p">)</span> <span class="p">:</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="n">Ep</span> <span class="o">-</span> <span class="n">EpGrid</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">endlParameters</span><span class="o">.</span><span class="n">endlEpsx</span> <span class="o">*</span> <span class="n">Ep</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EpLU</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">Ep</span> <span class="o">*</span> <span class="p">(</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">endlParameters</span><span class="o">.</span><span class="n">endlEpsx</span> <span class="p">)</span> <span class="p">)</span>
        <span class="n">EpU</span> <span class="o">=</span> <span class="n">trim</span><span class="p">(</span> <span class="n">EpU</span> <span class="p">)</span>
        <span class="n">EpU</span> <span class="o">=</span> <span class="n">EpU</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">EpU</span><span class="o">.</span><span class="n">reverse</span><span class="p">(</span> <span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span> <span class="n">EpGrid</span> <span class="p">)</span> <span class="o">-</span> <span class="mi">2</span>
        <span class="k">for</span> <span class="n">Ep</span> <span class="ow">in</span> <span class="n">EpU</span> <span class="p">:</span>
            <span class="k">while</span> <span class="p">(</span> <span class="n">EpGrid</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Ep</span> <span class="p">)</span> <span class="p">:</span> <span class="n">i</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="n">EpGrid</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">Ep</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">endlParameters</span><span class="o">.</span><span class="n">endlEpsx</span> <span class="o">*</span> <span class="n">Ep</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EpLU</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">Ep</span> <span class="o">*</span> <span class="p">(</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">endlParameters</span><span class="o">.</span><span class="n">endlEpsx</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span> <span class="n">EpLU</span> <span class="o">!=</span> <span class="p">[]</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EpGrid</span> <span class="o">=</span> <span class="n">EpGrid</span> <span class="o">+</span> <span class="n">EpLU</span>
        <span class="n">EpGrid</span> <span class="o">=</span> <span class="n">trim</span><span class="p">(</span> <span class="n">EpGrid</span> <span class="p">)</span>
        <span class="n">d3o</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">u_etal</span> <span class="ow">in</span> <span class="n">d3i</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>                            <span class="c"># Loop over all u.</span>
            <span class="n">d2</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">E1</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="n">etal</span> <span class="o">=</span> <span class="n">u_etal</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">EP</span> <span class="o">=</span> <span class="n">etal</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">E</span> <span class="ow">in</span> <span class="n">EpGrid</span> <span class="p">:</span>                               <span class="c"># Loop over E&#39; grid.</span>
                <span class="n">P</span> <span class="o">=</span> <span class="mf">0.</span>
                <span class="k">if</span> <span class="p">(</span> <span class="n">E</span> <span class="o">==</span> <span class="n">EP</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span>                         <span class="c"># E&#39; is a Grid energy.</span>
                    <span class="n">E1</span> <span class="o">=</span> <span class="n">E</span>
                    <span class="n">P1</span> <span class="o">=</span> <span class="n">EP</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">P</span> <span class="o">=</span> <span class="n">P1</span>
                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span> <span class="n">etal</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="n">EP</span> <span class="o">=</span> <span class="n">etal</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="k">else</span> <span class="p">:</span>
                        <span class="n">E1</span> <span class="o">=</span> <span class="bp">None</span>
                <span class="k">elif</span> <span class="p">(</span> <span class="n">E1</span> <span class="o">!=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>                       <span class="c"># Interpolate.</span>
                    <span class="n">P</span> <span class="o">=</span> <span class="p">(</span> <span class="n">EP</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span> <span class="n">E</span> <span class="o">-</span> <span class="n">E1</span> <span class="p">)</span> <span class="o">+</span> <span class="n">P1</span> <span class="o">*</span> <span class="p">(</span> <span class="n">EP</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">E</span> <span class="p">)</span> <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="n">EP</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">E1</span> <span class="p">)</span>
                <span class="n">d2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">E</span><span class="p">,</span> <span class="n">P</span> <span class="p">]</span> <span class="p">)</span>
            <span class="n">d3o</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">u_etal</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">d2</span> <span class="p">]</span> <span class="p">)</span>
        <span class="k">return</span> <span class="n">endl3dmathClasses</span><span class="o">.</span><span class="n">endl3dmath</span><span class="p">(</span> <span class="n">d3o</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;mu&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;E&#39;&quot;</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="s">&quot;Probability&quot;</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI3.normalize"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI3.normalize">[docs]</a>    <span class="k">def</span> <span class="nf">normalize</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Normalizes the data so that the integral P(E, mu, E&#39;) dE&#39; = 1.&quot;</span>

        <span class="k">for</span> <span class="n">E_Data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>                   <span class="c"># Loop for each E.</span>
            <span class="k">for</span> <span class="n">mu_Data</span> <span class="ow">in</span> <span class="n">E_Data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">:</span>              <span class="c"># Loop for each mu.</span>
                <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">Ep0</span> <span class="o">=</span> <span class="bp">None</span>
                <span class="k">for</span> <span class="n">Data</span> <span class="ow">in</span> <span class="n">mu_Data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">:</span>            <span class="c"># Loop for each E&#39;.</span>
                    <span class="n">Ep1</span> <span class="o">=</span> <span class="n">Data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">C1</span> <span class="o">=</span> <span class="n">Data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="n">Ep0</span> <span class="o">!=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">s</span> <span class="o">+=</span> <span class="p">(</span> <span class="n">Ep1</span> <span class="o">-</span> <span class="n">Ep0</span> <span class="p">)</span> <span class="o">*</span> <span class="p">(</span> <span class="n">C1</span> <span class="o">+</span> <span class="n">C0</span> <span class="p">)</span>
                    <span class="n">Ep0</span> <span class="o">=</span> <span class="n">Ep1</span>
                    <span class="n">C0</span> <span class="o">=</span> <span class="n">C1</span>
                <span class="n">s</span> <span class="o">/=</span> <span class="mf">2.</span>
                <span class="k">for</span> <span class="n">Data</span> <span class="ow">in</span> <span class="n">mu_Data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">s</span> <span class="o">!=</span> <span class="mf">0.</span> <span class="p">)</span> <span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/=</span> <span class="n">s</span>    <span class="c"># Loop for each E&#39;.</span>
</div>
<div class="viewcode-block" id="endlI3.convertToI4"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI3.convertToI4">[docs]</a>    <span class="k">def</span> <span class="nf">convertToI4</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">i1</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">lmax</span><span class="o">=</span><span class="mi">0</span> <span class="p">):</span>
        <span class="s">&quot;Converts the self and the I=1 data given as an argument to an endlI4 instance where the new object has Legendre orders 0, 1, ..., lmax&quot;</span>

        <span class="kn">from</span> <span class="nn">fudge.core.math.xData</span> <span class="kn">import</span> <span class="n">LegendreSeries</span>

        <span class="c"># Set up the I=4 file, especially the header crap</span>
        <span class="n">dummy</span> <span class="o">=</span> <span class="n">endlI3</span><span class="p">(</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="p">[]</span> <span class="p">)</span>
        <span class="n">dummy</span><span class="o">.</span><span class="n">setI</span><span class="p">(</span> <span class="mi">4</span> <span class="p">)</span>
        <span class="n">i4</span> <span class="o">=</span> <span class="n">endlI4</span><span class="p">(</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="n">dummy</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="p">[]</span> <span class="p">)</span>
        <span class="n">endlmisc</span><span class="o">.</span><span class="n">copyEndlHeader</span><span class="p">(</span> <span class="n">i4</span><span class="p">,</span> <span class="bp">self</span> <span class="p">)</span>

        <span class="c"># Loop through l&#39;s expanding the product of the I=1 and I=3 files into Legendre polynomials</span>
        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="n">lmax</span><span class="o">+</span><span class="mi">1</span> <span class="p">):</span>
            <span class="n">thisLTerm</span> <span class="o">=</span> <span class="n">endl3dmathClasses</span><span class="o">.</span><span class="n">endl3dmath</span><span class="p">()</span>
            <span class="n">legPoly</span> <span class="o">=</span> <span class="n">endl2dmathmisc</span><span class="o">.</span><span class="n">convertFunctionToLinLin</span><span class="p">(</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">l</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">*</span> <span class="n">LegendreSeries</span><span class="o">.</span><span class="n">Legendre</span><span class="p">(</span> <span class="n">l</span><span class="p">,</span> <span class="n">x</span> <span class="p">),</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1e-4</span> <span class="p">)</span>
            <span class="k">for</span> <span class="n">iE</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="nb">len</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span> <span class="p">):</span>
                <span class="n">E</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">E</span><span class="p">(</span> <span class="n">iE</span> <span class="p">)</span>
                <span class="n">i1_muP</span> <span class="o">=</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="n">i1</span><span class="o">.</span><span class="n">data</span><span class="p">[</span> <span class="n">iE</span> <span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> 
                <span class="n">i3_muEpP</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">muEpP</span><span class="p">(</span> <span class="n">E</span><span class="p">,</span> <span class="n">relEps</span> <span class="o">=</span> <span class="mf">1e-5</span> <span class="p">)</span>
                <span class="c"># collect list of Ep values</span>
                <span class="n">EpList</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">muEpPpair</span> <span class="ow">in</span> <span class="n">i3_muEpP</span><span class="o">.</span><span class="n">data</span><span class="p">:</span> <span class="n">EpList</span> <span class="o">+=</span> <span class="nb">filter</span><span class="p">(</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">EpList</span><span class="p">,</span> <span class="p">[</span> <span class="n">EpP</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">EpP</span> <span class="ow">in</span> <span class="n">muEpPpair</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">]</span> <span class="p">)</span>
                <span class="n">EpList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
                <span class="c"># Integrate in mu for each Ep value</span>
                <span class="n">EpP</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">Ep</span> <span class="ow">in</span> <span class="n">EpList</span> <span class="p">:</span>
                    <span class="n">i3_muP</span> <span class="o">=</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span> <span class="n">x</span><span class="p">,</span> <span class="n">i3_muEpP</span><span class="o">.</span><span class="n">getValue</span><span class="p">(</span> <span class="n">x</span><span class="p">,</span> <span class="n">Ep</span> <span class="p">)</span> <span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">i3_muEpP</span><span class="o">.</span><span class="n">xArray</span><span class="p">()</span> <span class="p">]</span> <span class="p">)</span>
                    <span class="n">P</span> <span class="o">=</span> <span class="n">i1_muP</span><span class="o">.</span><span class="n">integrateThreeFunctions</span><span class="p">(</span> <span class="n">i3_muP</span><span class="p">,</span> <span class="n">legPoly</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span> <span class="p">)</span>
                    <span class="n">EpP</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">Ep</span><span class="p">,</span> <span class="n">P</span> <span class="p">]</span> <span class="p">)</span>
                <span class="n">thisLTerm</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">E</span><span class="p">,</span> <span class="n">EpP</span> <span class="p">]</span> <span class="p">)</span>
            <span class="n">i4</span><span class="o">.</span><span class="n">setlData</span><span class="p">(</span> <span class="n">l</span><span class="p">,</span> <span class="n">thisLTerm</span> <span class="p">)</span>    
        <span class="k">return</span> <span class="n">i4</span>
</div>
<div class="viewcode-block" id="endlI3.reduceToEEpP"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI3.reduceToEEpP">[docs]</a>    <span class="k">def</span> <span class="nf">reduceToEEpP</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Integrates the mu dimension, returning an endl3dmath object of list[ E, list[ E&#39;, P( E, E&#39; ) ] ].&quot;</span>

        <span class="n">d3</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">e_etal</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mapMuEpPToGrid</span><span class="p">(</span> <span class="n">e_etal</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">relEps</span> <span class="o">=</span> <span class="mf">1e-14</span> <span class="p">)</span>
            <span class="n">u</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">for</span> <span class="n">u_etal</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span> <span class="n">u</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="n">d3p</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">etal</span> <span class="ow">in</span> <span class="n">u_etal</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">:</span> <span class="n">d3p</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">etal</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">etal</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">0.</span> <span class="p">]</span> <span class="p">)</span>
                <span class="k">else</span> <span class="p">:</span>
                    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">for</span> <span class="n">etal</span> <span class="ow">in</span> <span class="n">u_etal</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">:</span>
                        <span class="n">dd</span> <span class="o">=</span> <span class="n">d3p</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                        <span class="n">dd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">dd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span> <span class="n">etal</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">dd</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="o">*</span> <span class="p">(</span> <span class="n">u_etal</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">u</span> <span class="p">)</span>
                        <span class="n">dd</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">etal</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">u</span> <span class="o">=</span> <span class="n">u_etal</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">d2</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">d3p</span> <span class="p">:</span> <span class="n">d2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">d</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">/</span> <span class="mf">2.</span> <span class="p">]</span> <span class="p">)</span>
            <span class="n">d3</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">e_etal</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">d2</span> <span class="p">]</span> <span class="p">)</span>
        <span class="k">return</span> <span class="n">endl3dmathClasses</span><span class="o">.</span><span class="n">endl3dmath</span><span class="p">(</span> <span class="n">d3</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;E&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;E&#39;&quot;</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="s">&quot;Probability&quot;</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI3.reduceToEMuP"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI3.reduceToEMuP">[docs]</a>    <span class="k">def</span> <span class="nf">reduceToEMuP</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">normalize</span> <span class="o">=</span> <span class="bp">False</span> <span class="p">)</span> <span class="p">:</span>                          <span class="c"># class endlI3</span>
        <span class="s">&quot;Integrates the E&#39; dimension, returning an unnormalized (normalize = False) or normalized (normalize = True) endlI1 object.&quot;</span>

        <span class="n">d3</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">e_etal</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="n">d2</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">u_etal</span> <span class="ow">in</span> <span class="n">e_etal</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">:</span>
                <span class="n">Ep1</span> <span class="o">=</span> <span class="bp">None</span>
                <span class="k">for</span> <span class="n">etal</span> <span class="ow">in</span> <span class="n">u_etal</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">:</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="n">Ep1</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">else</span> <span class="p">:</span>
                        <span class="n">s</span> <span class="o">+=</span> <span class="p">(</span> <span class="n">etal</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">P1</span> <span class="p">)</span> <span class="o">*</span> <span class="p">(</span> <span class="n">etal</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">Ep1</span> <span class="p">)</span>
                    <span class="n">Ep1</span> <span class="o">=</span> <span class="n">etal</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">P1</span> <span class="o">=</span> <span class="n">etal</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">d2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">u_etal</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">s</span> <span class="o">/</span> <span class="mf">2.</span> <span class="p">]</span> <span class="p">)</span>
            <span class="n">d3</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">e_etal</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">d2</span> <span class="p">]</span> <span class="p">)</span>
        <span class="n">dummy</span> <span class="o">=</span> <span class="n">endlI3</span><span class="p">(</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="p">[]</span> <span class="p">)</span>
        <span class="n">dummy</span><span class="o">.</span><span class="n">setI</span><span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>
        <span class="n">I1</span> <span class="o">=</span> <span class="n">endlI1</span><span class="p">(</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="n">dummy</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="n">d3</span> <span class="p">)</span>
        <span class="n">endlmisc</span><span class="o">.</span><span class="n">copyEndlHeader</span><span class="p">(</span> <span class="n">I1</span><span class="p">,</span> <span class="bp">self</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">normalize</span> <span class="p">)</span> <span class="p">:</span> <span class="n">I1</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">return</span> <span class="n">I1</span>
</div>
<div class="viewcode-block" id="endlI3.runningEpSum"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI3.runningEpSum">[docs]</a>    <span class="k">def</span> <span class="nf">runningEpSum</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Does a running sum of the E&#39; data, returning an endl4dmath object of the results.&quot;&quot;&quot;</span>

        <span class="n">d4</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">E_uEpP</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="n">d3</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">u_EpP</span> <span class="ow">in</span> <span class="n">E_uEpP</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">:</span>
                <span class="n">d3</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">u_EpP</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">endlmath</span><span class="o">.</span><span class="n">runningYSum</span><span class="p">(</span> <span class="n">u_EpP</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span><span class="o">.</span><span class="n">data</span> <span class="p">]</span> <span class="p">)</span>
            <span class="n">d4</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">E_uEpP</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">d3</span> <span class="p">]</span> <span class="p">)</span>
        <span class="k">return</span> <span class="n">endl4dmathClasses</span><span class="o">.</span><span class="n">endl4dmath</span><span class="p">(</span> <span class="n">d4</span><span class="p">,</span> <span class="n">tLabel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tLabel</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span><span class="p">,</span>
            <span class="n">zLabel</span> <span class="o">=</span> <span class="s">&quot;running Sum of P( E, mu, E&#39; ) vs E&#39;&quot;</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI3.plot"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI3.plot">[docs]</a>    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">E</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">xMin</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">xMax</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">yMin</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">yMax</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">zMin</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">zMax</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> \
        <span class="n">xyzlog</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tLabel</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> \
        <span class="n">xrot</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">zrot</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>                                                                <span class="c"># class endlI3</span>
        <span class="sd">&quot;&quot;&quot;Plots the data.  If E = None uses 4d plotting otherwise uses 3d plotting for the requested E.</span>

<span class="sd">xyzlog values and meaning::</span>
<span class="sd">    xyzlog   plot-type for x-y-z axis</span>
<span class="sd">   -----------------------------------</span>
<span class="sd">      0     linear-linear-linear</span>
<span class="sd">      1     log-linear-linear</span>
<span class="sd">      2     linear-log-linear</span>
<span class="sd">      3     log-log-linear</span>
<span class="sd">      4     linear-linear-log</span>
<span class="sd">      5     log-linear-log</span>
<span class="sd">      6     linear-log-log</span>
<span class="sd">      7     log-log-log&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="n">tLabel</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">tLabel</span> <span class="o">!=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">tLabel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tLabel</span>
        <span class="k">if</span> <span class="p">(</span> <span class="n">xLabel</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span> <span class="o">!=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span>
        <span class="k">if</span> <span class="p">(</span> <span class="n">yLabel</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span> <span class="o">!=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span>
        <span class="k">if</span> <span class="p">(</span> <span class="n">zLabel</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">zLabel</span> <span class="o">!=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zLabel</span>

        <span class="k">if</span> <span class="p">(</span> <span class="n">E</span> <span class="o">!=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">iE</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="n">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">for</span> <span class="n">E_xyz</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="p">(</span> <span class="nb">abs</span><span class="p">(</span> <span class="n">E</span> <span class="o">-</span> <span class="n">E_xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">&lt;</span> <span class="n">E</span> <span class="o">*</span> <span class="mf">1e-8</span> <span class="p">)</span> <span class="p">:</span> <span class="n">iE</span> <span class="o">=</span> <span class="n">i</span>
            <span class="k">if</span> <span class="p">(</span> <span class="n">iE</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Error in endlI3.plot: E value not found&quot;</span> <span class="p">)</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="n">plotbase</span><span class="o">.</span><span class="n">parsePlotOptions</span><span class="p">(</span> <span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">,</span> <span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span><span class="p">,</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> \
                <span class="n">zMin</span> <span class="o">=</span> <span class="n">zMin</span><span class="p">,</span> <span class="n">zMax</span> <span class="o">=</span> <span class="n">zMax</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="n">zLabel</span><span class="p">,</span> <span class="n">xrot</span> <span class="o">=</span> <span class="n">xrot</span><span class="p">,</span> <span class="n">zrot</span> <span class="o">=</span> <span class="n">zrot</span> <span class="p">)</span>
            <span class="n">endl4dmathmisc</span><span class="o">.</span><span class="n">plot3dFrom4d</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">iE</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">xyzlog</span> <span class="o">=</span> <span class="n">xyzlog</span> <span class="p">)</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="n">endl4dmathClasses</span><span class="o">.</span><span class="n">endl4dmath</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">xMin</span> <span class="o">=</span> <span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span> <span class="o">=</span> <span class="n">xMax</span><span class="p">,</span> <span class="n">yMin</span> <span class="o">=</span> <span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span> <span class="o">=</span> <span class="n">yMax</span><span class="p">,</span> <span class="n">zMin</span> <span class="o">=</span> <span class="n">zMin</span><span class="p">,</span> <span class="n">zMax</span> <span class="o">=</span> <span class="n">zMax</span><span class="p">,</span> <span class="n">xyzlog</span> <span class="o">=</span> <span class="n">xyzlog</span><span class="p">,</span> \
                <span class="n">tLabel</span> <span class="o">=</span> <span class="n">tLabel</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="n">title</span><span class="p">,</span> <span class="n">tScaleLabel</span> <span class="o">=</span> <span class="s">&quot;Incident Energy&quot;</span><span class="p">,</span> <span class="n">xrot</span> <span class="o">=</span> <span class="n">xrot</span><span class="p">,</span> <span class="n">zrot</span> <span class="o">=</span> <span class="n">zrot</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI3.set"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI3.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tLabel</span> <span class="o">=</span> <span class="s">&quot;E (MeV)&quot;</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;mu&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;E&#39; (MeV)&quot;</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="s">&quot;pdf(E,mu,E&#39;) vs E&#39; (1/MeV)&quot;</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">endl4dmathClasses</span><span class="o">.</span><span class="n">endl4dmath</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="n">checkDataType</span><span class="p">,</span> <span class="n">tLabel</span> <span class="o">=</span> <span class="n">tLabel</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="n">zLabel</span><span class="p">,</span>
            <span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span> <span class="p">)</span>
</div></div>
<div class="viewcode-block" id="endlI4"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI4">[docs]</a><span class="k">class</span> <span class="nc">endlI4</span><span class="p">(</span> <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="p">,</span> <span class="n">endl4dmathClasses</span><span class="o">.</span><span class="n">endl4dmath</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class is for the I = 4 data.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the endlI4 class.  See the module endlNd.py for the meanings of</span>
<span class="sd">        f, yo, C, I, S and h. Points must be a valid endl4dmath class data structure.&quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">fudge</span> <span class="kn">import</span> <span class="n">gnd</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">gnd</span><span class="o">.</span><span class="n">productData</span><span class="o">.</span><span class="n">distributions</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">pointwiseFormToken</span>
        <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">i0</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">i1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i2</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i3</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xInterpolation</span> <span class="o">=</span> <span class="s">&#39;none,linear,unitbase:x:linear,unitbase:y:linear&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variablesUnits</span> <span class="o">=</span> <span class="s">&#39;l;energy_in[MeV];energy_out[MeV];C_l(energy_out|energy_in)&#39;</span>

<div class="viewcode-block" id="endlI4.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI4.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">normTolerance</span> <span class="o">=</span> <span class="mf">1e-5</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">arg</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Checks to see that the data is consistance with I = 4 data and returns a list of</span>
<span class="sd">        endlCheckerObject instances. Also, calls the endl4dmathmisc.check4dData function.</span>
<span class="sd">        See endl4dmathmisc.check4dData for meaning of printWarning and printErrors.&quot;&quot;&quot;</span>

        <span class="n">normTolerance</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span> <span class="n">normTolerance</span><span class="p">,</span> <span class="n">normCheckTolerance</span> <span class="p">)</span>
        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">Q</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getQ</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">l</span><span class="p">,</span> <span class="n">EEpP</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">EEpP</span> <span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">:</span> <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s">&#39;endlI4.check: (E, Ep, P) data len = </span><span class="si">%d</span><span class="s"> &lt; 2 for l = </span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">EEpP</span> <span class="p">),</span> <span class="n">l</span> <span class="p">)</span> <span class="p">)</span>
            <span class="k">for</span> <span class="n">E</span><span class="p">,</span> <span class="n">EpP</span> <span class="ow">in</span> <span class="n">EEpP</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">EpP</span> <span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">:</span> <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s">&#39;endlI4.check: Ep, P len = </span><span class="si">%d</span><span class="s"> &lt; 2 for l = </span><span class="si">%d</span><span class="s"> and E = </span><span class="si">%e</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">EpP</span> <span class="p">),</span> <span class="n">l</span><span class="p">,</span> <span class="n">E</span> <span class="p">)</span> <span class="p">)</span>
                <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">C</span> <span class="o">&gt;=</span> <span class="mi">50</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">C</span> <span class="o">&lt;</span> <span class="mi">58</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">continue</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">EpP</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">E</span> <span class="o">+</span> <span class="n">Q</span> <span class="p">)</span> <span class="p">:</span> <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s">&quot;endlI4.check: E&#39; = </span><span class="si">%.8e</span><span class="s"> &gt; E + Q = </span><span class="si">%e</span><span class="s"> for l = </span><span class="si">%.0f</span><span class="s">, E = </span><span class="si">%e</span><span class="s">&quot;</span> <span class="o">%</span> \
                    <span class="p">(</span> <span class="n">EpP</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">E</span> <span class="o">+</span> <span class="n">Q</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">E</span> <span class="p">)</span> <span class="p">)</span>
        <span class="n">d2</span> <span class="o">=</span> <span class="n">endlmath</span><span class="o">.</span><span class="n">ZSum</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">E</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">d2</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="nb">abs</span><span class="p">(</span> <span class="mf">1.</span> <span class="o">-</span> <span class="n">y</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="n">normTolerance</span> <span class="p">)</span> <span class="p">:</span> <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s">&#39;endlI4.check: bad normalize = </span><span class="si">%.8e</span><span class="s"> for l = 0 and E = </span><span class="si">%e</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">y</span><span class="p">,</span> <span class="n">E</span> <span class="p">)</span> <span class="p">)</span>
        <span class="n">messages</span> <span class="o">+=</span> <span class="n">endl4dmathmisc</span><span class="o">.</span><span class="n">check4dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">allowNegativeT</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">allowZeroT</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">allowNegativeX</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">allowZeroX</span> <span class="o">=</span> <span class="n">allowZeroE</span><span class="p">,</span> \
            <span class="n">allowNegativeY</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">positiveZ</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="n">printWarning</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="n">printErrors</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span> \
            <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">messages</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messages</span> <span class="p">)</span> <span class="p">]</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI4.convertToI1I3"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI4.convertToI1I3">[docs]</a>    <span class="k">def</span> <span class="nf">convertToI1I3</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">nMu</span> <span class="o">=</span> <span class="mi">21</span><span class="p">,</span> <span class="n">lMax</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;This methods converts the I = 4 data into the endl I = 1 and I = 3 data using nMu equally spaced mu values.</span>
<span class="sd">        This method calls convertToUI3. The returned value is the tuple (I1, I3).&quot;&quot;&quot;</span>

        <span class="n">I3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convertToUI3</span><span class="p">(</span> <span class="n">nMu</span> <span class="o">=</span> <span class="n">nMu</span><span class="p">,</span> <span class="n">lMax</span> <span class="o">=</span> <span class="n">lMax</span> <span class="p">)</span>
        <span class="n">I1Data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">E</span><span class="p">,</span> <span class="n">muEpP</span> <span class="ow">in</span> <span class="n">I3</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="n">I1MuP</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">mu</span><span class="p">,</span> <span class="n">EpP</span> <span class="ow">in</span> <span class="n">muEpP</span> <span class="p">:</span>
                <span class="n">I1MuP</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">mu</span><span class="p">,</span> <span class="n">endlmath</span><span class="o">.</span><span class="n">YSum</span><span class="p">(</span> <span class="n">EpP</span> <span class="p">)</span> <span class="p">]</span> <span class="p">)</span>
            <span class="n">I1Data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">E</span><span class="p">,</span> <span class="n">I1MuP</span> <span class="p">]</span> <span class="p">)</span>
        <span class="n">dummy</span> <span class="o">=</span> <span class="n">endlI4</span><span class="p">(</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="p">[]</span> <span class="p">)</span>
        <span class="n">dummy</span><span class="o">.</span><span class="n">setI</span><span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>
        <span class="n">I1</span> <span class="o">=</span> <span class="n">endlI1</span><span class="p">(</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="n">dummy</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="n">I1Data</span> <span class="p">)</span>
        <span class="n">I1</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span> <span class="p">)</span>
        <span class="n">I3</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">I1</span><span class="p">,</span> <span class="n">I3</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI4.convertToUI3"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI4.convertToUI3">[docs]</a>    <span class="k">def</span> <span class="nf">convertToUI3</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">nMu</span> <span class="o">=</span> <span class="mi">21</span><span class="p">,</span> <span class="n">lMax</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;This methods converts the I = 4 data into unnormalized I = 3 data using nMu equally spaced mu </span>
<span class="sd">        values.  Note that the data is not normalized; hence, the normalized method should be called on the</span>
<span class="sd">        returned object. This method will only convert up to Legendre order l = min( lMax, LegendreSeries.maxLegendreOrder ) </span>
<span class="sd">        of self&#39;s data.&quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">fudge.core.math.xData</span> <span class="kn">import</span> <span class="n">LegendreSeries</span>

        <span class="k">if</span><span class="p">(</span> <span class="n">lMax</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">lMax</span> <span class="o">=</span> <span class="n">LegendreSeries</span><span class="o">.</span><span class="n">maxLegendreOrder</span>
        <span class="n">lMax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span> <span class="n">lMax</span><span class="p">,</span> <span class="n">LegendreSeries</span><span class="o">.</span><span class="n">maxLegendreOrder</span> <span class="p">)</span> <span class="p">)</span>
            
        <span class="n">I3Data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">mu_EpP</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">E_EpP</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">:</span>
                <span class="n">EpPm1</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">EpPp1</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">EpP</span> <span class="ow">in</span> <span class="n">E_EpP</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">:</span>
                    <span class="n">EpPm1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">EpP</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">EpP</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">]</span> <span class="p">)</span>
                    <span class="n">EpPp1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">EpP</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">EpP</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">]</span> <span class="p">)</span>
                <span class="n">I3Data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">E_EpP</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span> <span class="p">[</span> <span class="o">-</span><span class="mf">1.</span><span class="p">,</span> <span class="n">EpPm1</span> <span class="p">],</span> <span class="p">[</span> <span class="mf">1.</span><span class="p">,</span> <span class="n">EpPp1</span> <span class="p">]</span> <span class="p">]</span> <span class="p">]</span> <span class="p">)</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="n">EArray</span> <span class="o">=</span> <span class="p">[]</span>                                 <span class="c"># Array of incident energies</span>
            <span class="k">for</span> <span class="n">E</span><span class="p">,</span> <span class="n">EpP</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">:</span> <span class="n">EArray</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">E</span> <span class="p">)</span>
            <span class="k">for</span> <span class="n">l</span><span class="p">,</span> <span class="n">EEpP</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>                   <span class="c"># Check that all l&#39;s have the same incident energies</span>
                <span class="k">if</span> <span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">EEpP</span> <span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span> <span class="n">EArray</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Error in endlI4.convertToUI3: incident energies do not align&quot;</span> <span class="p">)</span>
                <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">E</span><span class="p">,</span> <span class="n">EpP</span> <span class="ow">in</span> <span class="n">EEpP</span> <span class="p">:</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="n">E</span> <span class="o">!=</span> <span class="n">EArray</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Error in endlI4.convertToUI3: incident energies do not align (l = </span><span class="si">%d</span><span class="s">)&quot;</span> <span class="o">%</span> <span class="n">l</span> <span class="p">)</span>
                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">muArray</span> <span class="o">=</span> <span class="p">[]</span>                                <span class="c"># Array of mus</span>
            <span class="n">rMu</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span> <span class="n">nMu</span> <span class="p">)</span>
            <span class="n">s</span> <span class="o">=</span> <span class="mf">2.</span> <span class="o">/</span> <span class="p">(</span> <span class="n">nMu</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">)</span>
            <span class="k">for</span> <span class="n">iu</span> <span class="ow">in</span> <span class="n">rMu</span> <span class="p">:</span> <span class="n">muArray</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="o">-</span><span class="mf">1.</span> <span class="o">+</span> <span class="n">s</span> <span class="o">*</span> <span class="n">iu</span> <span class="p">)</span>
            <span class="n">muArray</span><span class="p">[</span><span class="n">nMu</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.</span>
            <span class="n">l_LArray</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">l</span><span class="p">,</span> <span class="n">EEpP</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">l</span> <span class="o">&gt;</span> <span class="n">lMax</span> <span class="p">)</span> <span class="p">:</span> <span class="k">break</span>
                <span class="n">LArray</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">mu</span> <span class="ow">in</span> <span class="n">muArray</span> <span class="p">:</span> <span class="n">LArray</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">LegendreSeries</span><span class="o">.</span><span class="n">Legendre</span><span class="p">(</span> <span class="n">l</span><span class="p">,</span> <span class="n">mu</span> <span class="p">)</span> <span class="p">)</span>
                <span class="n">l_LArray</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">LArray</span> <span class="p">)</span>
            <span class="n">iE</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">for</span> <span class="n">E</span> <span class="ow">in</span> <span class="n">EArray</span> <span class="p">:</span>
                <span class="n">iE</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">Ep_Array</span> <span class="o">=</span> <span class="p">[]</span>                           <span class="c"># Construct E&#39; grid for E.</span>
                <span class="k">for</span> <span class="n">l</span><span class="p">,</span> <span class="n">EEpP</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">l</span> <span class="o">&gt;</span> <span class="n">lMax</span> <span class="p">)</span> <span class="p">:</span> <span class="k">break</span>
                    <span class="k">for</span> <span class="n">Ep</span><span class="p">,</span> <span class="n">P</span> <span class="ow">in</span> <span class="n">EEpP</span><span class="p">[</span><span class="n">iE</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">:</span>
                        <span class="k">if</span> <span class="p">(</span> <span class="n">Ep</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">Ep_Array</span> <span class="p">)</span> <span class="p">:</span> <span class="n">Ep_Array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">Ep</span> <span class="p">)</span>
                <span class="n">Ep_Array</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span> <span class="p">)</span>
                <span class="n">mu_EpP</span> <span class="o">=</span> <span class="p">[]</span>                             <span class="c"># Construct mu, [ E&#39;, P ] grid</span>
                <span class="k">for</span> <span class="n">mu</span> <span class="ow">in</span> <span class="n">muArray</span> <span class="p">:</span>
                    <span class="n">EpP</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">Ep</span> <span class="ow">in</span> <span class="n">Ep_Array</span> <span class="p">:</span> <span class="n">EpP</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">Ep</span><span class="p">,</span> <span class="mf">0.</span> <span class="p">]</span> <span class="p">)</span>
                    <span class="n">mu_EpP</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">mu</span><span class="p">,</span> <span class="n">EpP</span> <span class="p">]</span> <span class="p">)</span>
                <span class="n">iEp</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
                <span class="k">for</span> <span class="n">Ep</span> <span class="ow">in</span> <span class="n">Ep_Array</span> <span class="p">:</span>
                    <span class="n">iEp</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">il</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
                    <span class="k">for</span> <span class="n">l</span><span class="p">,</span> <span class="n">EEpP</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
                        <span class="k">if</span><span class="p">(</span> <span class="n">l</span> <span class="o">&gt;</span> <span class="n">lMax</span> <span class="p">)</span> <span class="p">:</span> <span class="k">break</span>
                        <span class="n">il</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="n">iEpP</span> <span class="o">=</span> <span class="mi">0</span>
                        <span class="n">EpP_</span> <span class="o">=</span> <span class="n">EEpP</span><span class="p">[</span><span class="n">iE</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">for</span> <span class="n">EpP</span> <span class="ow">in</span> <span class="n">EpP_</span> <span class="p">:</span>
                            <span class="k">if</span> <span class="p">(</span> <span class="n">Ep</span> <span class="o">&lt;=</span> <span class="n">EpP</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span> <span class="k">break</span>
                            <span class="n">iEpP</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="k">if</span> <span class="p">(</span> <span class="n">Ep</span> <span class="o">==</span> <span class="n">EpP_</span><span class="p">[</span><span class="n">iEpP</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span>
                            <span class="n">P</span> <span class="o">=</span> <span class="n">EpP_</span><span class="p">[</span><span class="n">iEpP</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">else</span> <span class="p">:</span>
                            <span class="n">P</span> <span class="o">=</span> <span class="p">(</span> <span class="n">EpP_</span><span class="p">[</span><span class="n">iEpP</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span> <span class="n">EpP_</span><span class="p">[</span><span class="n">iEpP</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>  <span class="o">-</span> <span class="n">Ep</span> <span class="p">)</span> <span class="o">+</span> <span class="n">EpP_</span><span class="p">[</span><span class="n">iEpP</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span> <span class="n">Ep</span> <span class="o">-</span> <span class="n">EpP_</span><span class="p">[</span><span class="n">iEpP</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="o">/</span> \
                                <span class="p">(</span> <span class="n">EpP_</span><span class="p">[</span><span class="n">iEpP</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">EpP_</span><span class="p">[</span><span class="n">iEpP</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
                        <span class="k">for</span> <span class="n">iu</span> <span class="ow">in</span> <span class="n">rMu</span> <span class="p">:</span> <span class="n">mu_EpP</span><span class="p">[</span><span class="n">iu</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="n">iEp</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="n">P</span> <span class="o">*</span> <span class="n">l_LArray</span><span class="p">[</span><span class="n">il</span><span class="p">][</span><span class="n">iu</span><span class="p">]</span>
                <span class="n">I3Data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">E</span><span class="p">,</span> <span class="n">mu_EpP</span> <span class="p">]</span> <span class="p">)</span>
        <span class="n">dummy</span> <span class="o">=</span> <span class="n">endlI4</span><span class="p">(</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="p">[]</span> <span class="p">)</span>
        <span class="n">dummy</span><span class="o">.</span><span class="n">setI</span><span class="p">(</span> <span class="mi">3</span> <span class="p">)</span>
        <span class="n">I3</span> <span class="o">=</span> <span class="n">endlI3</span><span class="p">(</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="n">dummy</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="n">I3Data</span> <span class="p">)</span>
        <span class="n">endlmisc</span><span class="o">.</span><span class="n">copyEndlHeader</span><span class="p">(</span> <span class="n">I3</span><span class="p">,</span> <span class="bp">self</span> <span class="p">)</span>
        <span class="k">return</span> <span class="n">I3</span>
</div>
<div class="viewcode-block" id="endlI4.copyData"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI4.copyData">[docs]</a>    <span class="k">def</span> <span class="nf">copyData</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns an endlI4 instance that is a copy, and not a reference, of self.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">endlI4</span><span class="p">(</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="n">endl4dmathClasses</span><span class="o">.</span><span class="n">endl4dmath</span><span class="o">.</span><span class="n">copyData</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI4.EMax"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI4.EMax">[docs]</a>    <span class="k">def</span> <span class="nf">EMax</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Returns the last incident energy value for self. Returns None if data is empty.&quot;</span>

        <span class="n">EMax</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">for</span> <span class="n">l</span><span class="p">,</span> <span class="n">EEpP</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">EMax</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">EEpP</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EMax</span> <span class="o">=</span> <span class="n">EEpP</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">EEpP</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EMax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span> <span class="n">EMax</span><span class="p">,</span> <span class="n">EEpP</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">EMax</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI4.EMin"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI4.EMin">[docs]</a>    <span class="k">def</span> <span class="nf">EMin</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Returns the first incident energy value for self. Returns None if data is empty.&quot;</span>

        <span class="n">EMin</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">for</span> <span class="n">l</span><span class="p">,</span> <span class="n">EEpP</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">EMin</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">EEpP</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EMin</span> <span class="o">=</span> <span class="n">EEpP</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">EEpP</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EMin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">EEpP</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">EMin</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI4.fixThreshold"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI4.fixThreshold">[docs]</a>    <span class="k">def</span> <span class="nf">fixThreshold</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="mf">10e-3</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode_RaiseOnly</span><span class="p">,</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls endlIClasses.fixThresholdFor3d to fix threshold for each l-order data.&quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">l</span><span class="p">,</span> <span class="n">EEpP</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">endl3dmathClasses</span><span class="o">.</span><span class="n">endl3dmath</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="n">EEpP</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span>
            <span class="n">fixThresholdFor3d</span><span class="p">(</span> <span class="n">d</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="n">dThreshold_MeV</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">realSelf</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode</span><span class="p">,</span>
                <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI4.getEMin_EMinNext"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI4.getEMin_EMinNext">[docs]</a>    <span class="k">def</span> <span class="nf">getEMin_EMinNext</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Gets the first two Energy values from self&#39;s data. None is return for any absent value.&quot;&quot;&quot;</span>

        <span class="n">EMin</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">EMinNext</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">for</span> <span class="n">l</span><span class="p">,</span> <span class="n">EEpP</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span> <span class="n">EEpP</span> <span class="p">)</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">EMin_</span> <span class="o">=</span> <span class="n">EEpP</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">EMin</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">EMin_</span> <span class="o">&lt;</span> <span class="n">EMin</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EMin</span> <span class="o">=</span> <span class="n">EMin_</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="n">EMinNext_</span> <span class="o">=</span> <span class="n">EEpP</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">EMinNext</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">EMinNext_</span> <span class="o">&lt;</span> <span class="n">EMinNext</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EMinNext</span> <span class="o">=</span> <span class="n">EMinNext_</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">EMinNext</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI4.getlData"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI4.getlData">[docs]</a>    <span class="k">def</span> <span class="nf">getlData</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">l</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns an endl3dmath object for the data at Legendre order l. If l is outside the domain of the data, then None is returned.&quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">l_</span><span class="p">,</span> <span class="n">EEpP</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">l_</span> <span class="o">==</span> <span class="n">l</span> <span class="p">)</span> <span class="p">:</span> 
                <span class="n">label</span> <span class="o">=</span> <span class="s">&#39;l = </span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">l</span>
                <span class="k">if</span><span class="p">(</span> <span class="nb">hasattr</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="s">&#39;label&#39;</span> <span class="p">)</span> <span class="p">:</span> <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">+</span> <span class="s">&#39; for l = </span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">l</span>
                <span class="k">return</span><span class="p">(</span> <span class="n">endl3dmathClasses</span><span class="o">.</span><span class="n">endl3dmath</span><span class="p">(</span> <span class="n">EEpP</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zLabel</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="n">label</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="bp">None</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI4.getl_EData"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI4.getl_EData">[docs]</a>    <span class="k">def</span> <span class="nf">getl_EData</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">E</span><span class="p">,</span> <span class="n">unitBase</span> <span class="o">=</span> <span class="bp">True</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns an endl2dmath object for the data at Legendre order l and incident energy E. If l or E is outside the</span>
<span class="sd">        domain of the data, then None is returned.  If the requested E is not a point in the data then linear interpolation </span>
<span class="sd">        is performed. If unitBase is true, the Ep, P(l,E,Ep) data are unit based linear interpolated.&quot;&quot;&quot;</span>

        <span class="n">EEpP</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getlData</span><span class="p">(</span> <span class="n">l</span> <span class="p">)</span><span class="o">.</span><span class="n">data</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">EEpP</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span><span class="p">(</span> <span class="bp">None</span> <span class="p">)</span>
        <span class="n">nE</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span> <span class="n">EEpP</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">nE</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span><span class="p">(</span> <span class="bp">None</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">E</span> <span class="o">&lt;</span> <span class="n">EEpP</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">E</span> <span class="o">&gt;</span> <span class="n">EEpP</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span><span class="p">(</span> <span class="bp">None</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="p">(</span> <span class="n">endl3dmathmisc</span><span class="o">.</span><span class="n">interpolate3d</span><span class="p">(</span> <span class="n">E</span><span class="p">,</span> <span class="n">EEpP</span><span class="p">,</span> <span class="n">unitBase</span> <span class="o">=</span> <span class="n">unitBase</span> <span class="p">),</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zLabel</span> <span class="p">)</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI4.setlData"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI4.setlData">[docs]</a>    <span class="k">def</span> <span class="nf">setlData</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">EEpP</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Set data for Legendre order l to EEpP. EEpP can be an endl3dmath object or a suitable python list. The l-value</span>
<span class="sd">        must be an existing l-value or one greater than the current maximum l-value.&quot;&quot;&quot;</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">endl3dmathmisc</span><span class="o">.</span><span class="n">get3dmathData</span><span class="p">(</span> <span class="n">EEpP</span><span class="p">,</span> <span class="s">&#39;endlI4.setlData&#39;</span><span class="p">,</span> <span class="s">&#39;EEpP&#39;</span> <span class="p">)</span>
        <span class="n">nl</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">l</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">l</span> <span class="o">&gt;</span> <span class="n">nl</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">Error in endlI4.setlData: l = </span><span class="si">%d</span><span class="s"> must be between 0 to lMax + 1 (= </span><span class="si">%d</span><span class="s">) inclusive.&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">l</span><span class="p">,</span> <span class="n">nl</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">l</span> <span class="o">==</span> <span class="n">nl</span> <span class="p">)</span> <span class="p">:</span>                         <span class="c"># Adding the next l order.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">l</span><span class="p">,</span> <span class="n">data</span> <span class="p">]</span> <span class="p">)</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span> <span class="n">nl</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">l</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
                    <span class="k">return</span>
</div>
<div class="viewcode-block" id="endlI4.setl_EData"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI4.setl_EData">[docs]</a>    <span class="k">def</span> <span class="nf">setl_EData</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">E</span><span class="p">,</span> <span class="n">EpP</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Set data for Legendre order l and incident energy E to EpP. EpP can be an endl2dmath object or a suitable python list.</span>
<span class="sd">        The l-value must be an existing l-value or one greater than the current maximum l-value.&quot;&quot;&quot;</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">endl2dmathmisc</span><span class="o">.</span><span class="n">get2dmathData</span><span class="p">(</span> <span class="n">EpP</span><span class="p">,</span> <span class="s">&#39;endlI4.setl_EData&#39;</span><span class="p">,</span> <span class="s">&#39;EpP&#39;</span> <span class="p">)</span>
        <span class="n">nl</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">l</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">l</span> <span class="o">&gt;</span> <span class="n">nl</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">Error in endlI4.setl_EData: l = </span><span class="si">%d</span><span class="s"> must be between 0 to lMax + 1 (= </span><span class="si">%d</span><span class="s">) inclusive.&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">l</span><span class="p">,</span> <span class="n">nl</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">l</span> <span class="o">==</span> <span class="n">nl</span> <span class="p">)</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">l</span><span class="p">,</span> <span class="p">[</span> <span class="p">[</span> <span class="n">E</span><span class="p">,</span> <span class="n">data</span> <span class="p">]</span> <span class="p">]</span> <span class="p">]</span> <span class="p">)</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="k">for</span> <span class="n">l_</span><span class="p">,</span> <span class="n">EEpP</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">l</span> <span class="o">==</span> <span class="n">l_</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="n">nE</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span> <span class="n">EEpP</span> <span class="p">)</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">nE</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="n">EEpP</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">E</span><span class="p">,</span> <span class="n">data</span> <span class="p">]</span> <span class="p">)</span>
                    <span class="k">elif</span><span class="p">(</span> <span class="n">E</span> <span class="o">&lt;</span> <span class="n">EEpP</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="n">EEpP</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span> <span class="n">E</span><span class="p">,</span> <span class="n">data</span> <span class="p">]</span> <span class="p">)</span>
                    <span class="k">elif</span><span class="p">(</span> <span class="n">E</span> <span class="o">&gt;</span> <span class="n">EEpP</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="n">EEpP</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">E</span><span class="p">,</span> <span class="n">data</span> <span class="p">]</span> <span class="p">)</span>
                    <span class="k">else</span> <span class="p">:</span>
                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span> <span class="n">nE</span> <span class="p">)</span> <span class="p">:</span>
                            <span class="k">if</span><span class="p">(</span> <span class="n">E</span> <span class="o">&lt;=</span> <span class="n">EEpP</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span> <span class="k">break</span>
                        <span class="k">if</span><span class="p">(</span> <span class="n">E</span> <span class="o">==</span> <span class="n">EEpP</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span>
                            <span class="n">EEpP</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
                        <span class="k">else</span> <span class="p">:</span>
                            <span class="n">EEpP</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span> <span class="n">i</span><span class="p">,</span> <span class="p">[</span> <span class="n">E</span><span class="p">,</span> <span class="n">data</span> <span class="p">]</span> <span class="p">)</span>
                    <span class="k">return</span>
</div>
<div class="viewcode-block" id="endlI4.getThresholdsForChecker"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI4.getThresholdsForChecker">[docs]</a>    <span class="k">def</span> <span class="nf">getThresholdsForChecker</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;For internal use only.&quot;</span>

        <span class="n">thresholds</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">l</span><span class="p">,</span> <span class="n">EAndOthers</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">EAndOthers</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">thresholds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">EAndOthers</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
        <span class="k">return</span> <span class="n">thresholds</span>
</div>
<div class="viewcode-block" id="endlI4.l"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI4.l">[docs]</a>    <span class="k">def</span> <span class="nf">l</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">i</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the (i+1)^th Legendre l-value (e.g., self.l( 0 ) returns the first l-value) or None if i is out-of-range.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="endlI4.normalize"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI4.normalize">[docs]</a>    <span class="k">def</span> <span class="nf">normalize</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">doL_0_Only</span> <span class="o">=</span> <span class="bp">True</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Normalizes the l = 0 data so that the integral P(l = 0, E, E&#39;) dE&#39; = 1. If doL_0_Only is true, then only the</span>
<span class="sd">        l = 0 component is normalizes. Otherwise, the l = 0 sum is used to normalize all orders. The return value the tuple</span>
<span class="sd">        (n0, nm) where n0 (nm) is the number of sum that are zero (negative).&quot;&quot;&quot;</span>

        <span class="n">n0</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">nm</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">iE</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">for</span> <span class="n">d0</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">:</span>         <span class="c"># Loop for each E.</span>
                <span class="n">iE</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">Ep0</span> <span class="o">=</span> <span class="bp">None</span>
                <span class="k">for</span> <span class="n">d1</span> <span class="ow">in</span> <span class="n">d0</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">:</span>               <span class="c"># Loop for each E&#39;.</span>
                    <span class="n">Ep1</span> <span class="o">=</span> <span class="n">d1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">C1</span> <span class="o">=</span> <span class="n">d1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="n">Ep0</span> <span class="o">!=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">s</span> <span class="o">+=</span> <span class="p">(</span> <span class="n">Ep1</span> <span class="o">-</span> <span class="n">Ep0</span> <span class="p">)</span> <span class="o">*</span> <span class="p">(</span> <span class="n">C1</span> <span class="o">+</span> <span class="n">C0</span> <span class="p">)</span>
                    <span class="n">Ep0</span> <span class="o">=</span> <span class="n">Ep1</span>
                    <span class="n">C0</span> <span class="o">=</span> <span class="n">C1</span>
                <span class="n">s</span> <span class="o">/=</span> <span class="mf">2.</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">s</span> <span class="o">==</span> <span class="mf">0.</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="n">n0</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">s</span> <span class="o">=</span> <span class="mf">1.</span>
                <span class="k">elif</span><span class="p">(</span> <span class="n">s</span> <span class="o">&lt;</span> <span class="mf">0.</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="n">nm</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">for</span> <span class="n">d1</span> <span class="ow">in</span> <span class="n">d0</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">:</span> <span class="n">d1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/=</span> <span class="n">s</span>    <span class="c"># Loop for each E&#39;.</span>
                <span class="k">if</span><span class="p">(</span> <span class="ow">not</span> <span class="n">doL_0_Only</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="k">for</span> <span class="n">l</span><span class="p">,</span> <span class="n">EEpP</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
                        <span class="k">if</span><span class="p">(</span> <span class="n">l</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="k">continue</span>
                        <span class="n">EpP</span> <span class="o">=</span> <span class="n">EEpP</span><span class="p">[</span><span class="n">iE</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>               <span class="c"># Note, index of iE and E not checked. </span>
                        <span class="k">for</span> <span class="n">d1</span> <span class="ow">in</span> <span class="n">EpP</span> <span class="p">:</span> <span class="n">d1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/=</span> <span class="n">s</span>      <span class="c"># Loop for each E&#39;.</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">n0</span><span class="p">,</span> <span class="n">nm</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI4.plot"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI4.plot">[docs]</a>    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">l</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">xMin</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">xMax</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">yMin</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">yMax</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">zMin</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">zMax</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> \
        <span class="n">xyzlog</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tLabel</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> \
        <span class="n">xrot</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">zrot</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Plots the data for Legendre order l.</span>

<span class="sd">xyzlog values and meaning::</span>
<span class="sd">    xyzlog   plot-type for x-y-z axis</span>
<span class="sd">   -----------------------------------</span>
<span class="sd">      0     linear-linear-linear</span>
<span class="sd">      1     log-linear-linear</span>
<span class="sd">      2     linear-log-linear</span>
<span class="sd">      3     log-log-linear</span>
<span class="sd">      4     linear-linear-log</span>
<span class="sd">      5     log-linear-log</span>
<span class="sd">      6     linear-log-log</span>
<span class="sd">      7     log-log-log&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="n">tLabel</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">tLabel</span> <span class="o">!=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">tLabel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tLabel</span>
        <span class="k">if</span> <span class="p">(</span> <span class="n">xLabel</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span> <span class="o">!=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span>
        <span class="k">if</span> <span class="p">(</span> <span class="n">yLabel</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span> <span class="o">!=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span>
        <span class="k">if</span> <span class="p">(</span> <span class="n">zLabel</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">zLabel</span> <span class="o">!=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zLabel</span>

        <span class="k">if</span> <span class="p">(</span> <span class="n">l</span> <span class="o">!=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="n">plotbase</span><span class="o">.</span><span class="n">parsePlotOptions</span><span class="p">(</span> <span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">,</span> <span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span><span class="p">,</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> \
                <span class="n">zMin</span> <span class="o">=</span> <span class="n">zMin</span><span class="p">,</span> <span class="n">zMax</span> <span class="o">=</span> <span class="n">zMax</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="n">zLabel</span><span class="p">,</span> <span class="n">xrot</span> <span class="o">=</span> <span class="n">xrot</span><span class="p">,</span> <span class="n">zrot</span> <span class="o">=</span> <span class="n">zrot</span> <span class="p">)</span>
            <span class="n">endl4dmathmisc</span><span class="o">.</span><span class="n">plot3dFrom4d</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">xyzlog</span> <span class="o">=</span> <span class="n">xyzlog</span> <span class="p">)</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="n">endl4dmathClasses</span><span class="o">.</span><span class="n">endl4dmath</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">xMin</span> <span class="o">=</span> <span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span> <span class="o">=</span> <span class="n">xMax</span><span class="p">,</span> <span class="n">yMin</span> <span class="o">=</span> <span class="n">yMin</span><span class="p">,</span> <span class="n">yMax</span> <span class="o">=</span> <span class="n">yMax</span><span class="p">,</span> <span class="n">zMin</span> <span class="o">=</span> <span class="n">zMin</span><span class="p">,</span> <span class="n">zMax</span> <span class="o">=</span> <span class="n">zMax</span><span class="p">,</span> \
                <span class="n">xyzlog</span> <span class="o">=</span> <span class="n">xyzlog</span><span class="p">,</span> <span class="n">tLabel</span> <span class="o">=</span> <span class="n">tLabel</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="n">title</span><span class="p">,</span> <span class="n">tScaleLabel</span> <span class="o">=</span> <span class="s">&quot;&#39;l order&#39;&quot;</span><span class="p">,</span> \
                <span class="n">xrot</span> <span class="o">=</span> <span class="n">xrot</span><span class="p">,</span> <span class="n">zrot</span> <span class="o">=</span> <span class="n">zrot</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI4.reduceToEEpP"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI4.reduceToEEpP">[docs]</a>    <span class="k">def</span> <span class="nf">reduceToEEpP</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;reduceToEEpP( )\n    Returns the l = 0 term as an endl3dmath object of list[ E, list[ E&#39;, P( E, E&#39; ) ] ].</span>
<span class="sd">    Note, the l = 0 term is P( E, E&#39; ).&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">endl3dmathClasses</span><span class="o">.</span><span class="n">endl3dmath</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;E&quot;</span><span class="p">,</span>
            <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;E&#39;&quot;</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="s">&quot;Probability( E, E&#39; )&quot;</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI4.set"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI4.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tLabel</span> <span class="o">=</span> <span class="s">&quot;l&quot;</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;E (MeV)&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;E&#39; (MeV)&quot;</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="s">&quot;Legendre coef. C_l(E,E&#39;) vs E&#39; (1/MeV)&quot;</span><span class="p">,</span>
        <span class="n">interpolation</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">endl4dmathClasses</span><span class="o">.</span><span class="n">endl4dmath</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="n">checkDataType</span><span class="p">,</span> <span class="n">tLabel</span> <span class="o">=</span> <span class="n">tLabel</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="n">zLabel</span><span class="p">,</span>
            <span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI4.toString"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI4.toString">[docs]</a>    <span class="k">def</span> <span class="nf">toString</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">format</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns a string with the data in the order (E, E&#39;, l, P) as required by ENDL.&quot;&quot;&quot;</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">string4dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">i0</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">i1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i2</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i3</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">fmt0</span> <span class="o">=</span> <span class="n">format</span><span class="p">,</span> <span class="n">fmt1</span> <span class="o">=</span> <span class="n">format</span><span class="p">,</span> <span class="n">fmt2</span> <span class="o">=</span> <span class="n">format</span><span class="p">,</span> <span class="n">fmt3</span> <span class="o">=</span> <span class="n">format</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">s</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI4.toZAsFrame"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI4.toZAsFrame">[docs]</a>    <span class="k">def</span> <span class="nf">toZAsFrame</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">newProjectileMass</span><span class="p">,</span> <span class="n">newTargetMass</span><span class="p">,</span> <span class="n">halflife</span><span class="p">,</span> <span class="n">bdflsFile</span><span class="p">,</span> <span class="n">ELevel</span> <span class="o">=</span> <span class="mf">0.</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">newI4</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">toZAsFrameMisc</span><span class="p">(</span> <span class="n">endlI4</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">newProjectileMass</span><span class="p">,</span> <span class="n">newTargetMass</span><span class="p">,</span> <span class="n">ELevel</span><span class="p">,</span> <span class="n">halflife</span><span class="p">,</span> <span class="n">bdflsFile</span><span class="p">,</span> <span class="bp">False</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">l</span><span class="p">,</span> <span class="n">EEpP_</span> <span class="ow">in</span> <span class="n">newI4</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="k">for</span> <span class="n">EEpP</span> <span class="ow">in</span> <span class="n">EEpP_</span> <span class="p">:</span> <span class="n">EEpP</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*=</span> <span class="n">r</span>
        <span class="k">return</span><span class="p">(</span> <span class="p">[</span> <span class="n">newI4</span> <span class="p">]</span> <span class="p">)</span>
</div></div>
<div class="viewcode-block" id="endlI20"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI20">[docs]</a><span class="k">class</span> <span class="nc">endlI20</span><span class="p">(</span> <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="p">,</span> <span class="n">endl4dmathClasses</span><span class="o">.</span><span class="n">endl4dmath</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class is for the I = 20 data. I 20 data is unresolved resonance probability table data which</span>
<span class="sd">    has four columns. These columns are 1) s incident energy, 2) Temperature, 3) probability and </span>
<span class="sd">    4) cross section.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the endlI20 class.  See the module endlNd.py for the meanings of</span>
<span class="sd">        f, yo, C, I, S and h. Points must be a valid endl4dmath class data structure.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;URRProbabilityTable&#39;</span>
        <span class="n">endlNd</span><span class="o">.</span><span class="n">endlNd</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">i0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i1</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i2</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">i3</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variablesUnits</span> <span class="o">=</span> <span class="s">&#39;energy_in[MeV];temperature[keV];probability;cross_section[barn]&#39;</span>

<div class="viewcode-block" id="endlI20.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI20.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">normTolerance</span> <span class="o">=</span> <span class="mf">1e-4</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">arg</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Checks to see that the data is consistance with I = 20 data and returns a list of</span>
<span class="sd">        endlCheckerObject instances. Also, calls the endl4dmathmisc.check4dData function.</span>
<span class="sd">        See endl4dmathmisc.check4dData for meaning of printWarning and printErrors.&quot;&quot;&quot;</span>

        <span class="n">normTolerance</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span> <span class="n">normTolerance</span><span class="p">,</span> <span class="n">normCheckTolerance</span> <span class="p">)</span>
        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">E</span><span class="p">,</span> <span class="n">TPXsec</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">TPXsec</span> <span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span> <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s">&#39;endlI20.check: (T, P, Xsec) data len = </span><span class="si">%d</span><span class="s"> &lt; 1 for E = </span><span class="si">%e</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">EPXsec</span> <span class="p">),</span> <span class="n">E</span> <span class="p">)</span> <span class="p">)</span>
            <span class="k">for</span> <span class="n">T</span><span class="p">,</span> <span class="n">PXsec</span> <span class="ow">in</span> <span class="n">TPXsec</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">PXsec</span> <span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span> 
                    <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s">&#39;endlI20.check: (P, Xsec) len = </span><span class="si">%d</span><span class="s"> &lt; 1 for E = </span><span class="si">%e</span><span class="s"> and T = </span><span class="si">%e</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">PXsec</span> <span class="p">),</span> <span class="n">E</span><span class="p">,</span> <span class="n">T</span> <span class="p">)</span> <span class="p">)</span>
                <span class="k">else</span> <span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">PXsec</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s">&#39;endlI20.check: bad normalize = </span><span class="si">%.8e</span><span class="s"> for E = </span><span class="si">%e</span><span class="s"> and T = </span><span class="si">%e</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">PXsec</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">E</span><span class="p">,</span> <span class="n">T</span> <span class="p">)</span> <span class="p">)</span>
                    <span class="n">PPrior</span> <span class="o">=</span> <span class="mf">0.</span>
                    <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">for</span> <span class="n">P</span><span class="p">,</span> <span class="n">Xsec</span> <span class="ow">in</span> <span class="n">PXsec</span> <span class="p">:</span>
                        <span class="k">if</span><span class="p">(</span> <span class="n">Xsec</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s">&#39;endlI20.check: negative cross section = </span><span class="si">%e</span><span class="s"> for E = </span><span class="si">%e</span><span class="s"> and T = </span><span class="si">%e</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">Xsec</span><span class="p">,</span> <span class="n">E</span><span class="p">,</span> <span class="n">T</span> <span class="p">)</span> <span class="p">)</span>
                        <span class="k">if</span><span class="p">(</span> <span class="n">PPrior</span> <span class="o">&gt;</span> <span class="n">P</span> <span class="p">)</span> <span class="p">:</span> <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s">&#39;endlI20.check: bad cdf (p[i-1] = </span><span class="si">%e</span><span class="s"> &gt; p[i] = </span><span class="si">%e</span><span class="s"> for E = </span><span class="si">%e</span><span class="s"> and T = </span><span class="si">%e</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">PPrior</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">E</span><span class="p">,</span> <span class="n">T</span> <span class="p">)</span> <span class="p">)</span>
                        <span class="nb">sum</span> <span class="o">+=</span> <span class="p">(</span> <span class="n">P</span> <span class="o">-</span> <span class="n">PPrior</span> <span class="p">)</span> <span class="o">*</span> <span class="n">Xsec</span>
                        <span class="n">PPrior</span> <span class="o">=</span> <span class="n">P</span>
                    <span class="k">if</span><span class="p">(</span> <span class="nb">abs</span><span class="p">(</span><span class="n">P</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">normTolerance</span> <span class="p">)</span> <span class="p">:</span> <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s">&#39;endlI20.check: bad probability normalization = </span><span class="si">%e</span><span class="s"> for E = </span><span class="si">%e</span><span class="s"> and T = </span><span class="si">%e</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">P</span><span class="p">,</span> <span class="n">E</span><span class="p">,</span> <span class="n">T</span> <span class="p">)</span> <span class="p">)</span>
                    <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="nb">sum</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">sum</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">normTolerance</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> 
                        <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s">&#39;endlI20.check: bad normalization = </span><span class="si">%e</span><span class="s"> for E = </span><span class="si">%e</span><span class="s"> and T = </span><span class="si">%e</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="nb">sum</span><span class="p">,</span> <span class="n">E</span><span class="p">,</span> <span class="n">T</span> <span class="p">)</span> <span class="p">)</span>
        <span class="n">messages</span> <span class="o">+=</span> <span class="n">endl4dmathmisc</span><span class="o">.</span><span class="n">check4dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">allowNegativeT</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">allowZeroT</span> <span class="o">=</span> <span class="n">allowZeroE</span><span class="p">,</span> <span class="n">allowNegativeX</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">allowZeroX</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> \
            <span class="n">allowSameY</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">allowNegativeY</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">positiveZ</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="n">printWarning</span><span class="p">,</span> <span class="n">printErrors</span> <span class="o">=</span> <span class="n">printErrors</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span> \
            <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">messages</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">messages</span> <span class="p">)</span> <span class="p">]</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI20.copyData"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI20.copyData">[docs]</a>    <span class="k">def</span> <span class="nf">copyData</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns an endlI20 instance that is a copy, and not a reference, of self.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">endlI20</span><span class="p">(</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="n">endl4dmathClasses</span><span class="o">.</span><span class="n">endl4dmath</span><span class="o">.</span><span class="n">copyData</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI20.normalize"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI20.normalize">[docs]</a>    <span class="k">def</span> <span class="nf">normalize</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Normalizes the data so that the cdf&#39;s are 1.&quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">E</span><span class="p">,</span> <span class="n">TPXsec</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="k">for</span> <span class="n">T</span><span class="p">,</span> <span class="n">PXsecs</span> <span class="ow">in</span> <span class="n">TPXsec</span> <span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="mf">1.</span> <span class="o">/</span> <span class="n">PXsec</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">PXsec</span> <span class="ow">in</span> <span class="n">PXsecs</span> <span class="p">:</span> <span class="n">PXsec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/=</span> <span class="n">n</span>
                <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">P</span><span class="p">,</span> <span class="n">Xsec</span> <span class="ow">in</span> <span class="n">PXsecs</span> <span class="p">:</span> <span class="n">n</span> <span class="o">+=</span> <span class="n">P</span> <span class="o">*</span> <span class="n">Xsec</span> 
                <span class="k">if</span><span class="p">(</span> <span class="n">n</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="k">for</span> <span class="n">PXsec</span> <span class="ow">in</span> <span class="n">PXsecs</span> <span class="p">:</span> <span class="n">PXsec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/=</span> <span class="n">n</span>
</div>
<div class="viewcode-block" id="endlI20.set"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI20.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tLabel</span> <span class="o">=</span> <span class="s">&quot;E (MeV)&quot;</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;Temperature (keV)&quot;</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;probability&quot;</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="s">&quot;cross section (barn)&quot;</span><span class="p">,</span>
        <span class="n">interpolation</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>

        <span class="n">endl4dmathClasses</span><span class="o">.</span><span class="n">endl4dmath</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">checkDataType</span> <span class="o">=</span> <span class="n">checkDataType</span><span class="p">,</span> <span class="n">tLabel</span> <span class="o">=</span> <span class="n">tLabel</span><span class="p">,</span> <span class="n">xLabel</span> <span class="o">=</span> <span class="n">xLabel</span><span class="p">,</span> <span class="n">yLabel</span> <span class="o">=</span> <span class="n">yLabel</span><span class="p">,</span> <span class="n">zLabel</span> <span class="o">=</span> <span class="n">zLabel</span><span class="p">,</span>
            <span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">numberOfEnergies</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">numberOfTemperatures</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">numberOfProbabilities</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">data</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">numberOfEnergies</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">numberOfTemperatures</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">numberOfProbabilities</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlI20.toString"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.endlI20.toString">[docs]</a>    <span class="k">def</span> <span class="nf">toString</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">format</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns a string with the data in the order (E, T, P, Xsec) as required by ENDL.&quot;&quot;&quot;</span>

        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">string4dData</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">i0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i1</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i2</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">i3</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">fmt0</span> <span class="o">=</span> <span class="n">format</span><span class="p">,</span> <span class="n">fmt1</span> <span class="o">=</span> <span class="n">format</span><span class="p">,</span> <span class="n">fmt2</span> <span class="o">=</span> <span class="n">format</span><span class="p">,</span> <span class="n">fmt3</span> <span class="o">=</span> <span class="n">format</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">s</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="p">)</span>
</div></div>
<div class="viewcode-block" id="getThresholdsForChecker2d"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.getThresholdsForChecker2d">[docs]</a><span class="k">def</span> <span class="nf">getThresholdsForChecker2d</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>

    <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="p">[</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span>
    <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="p">[</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span>
    <span class="k">return</span> <span class="p">[]</span>
</div>
<div class="viewcode-block" id="fixThresholdTest"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.fixThresholdTest">[docs]</a><span class="k">def</span> <span class="nf">fixThresholdTest</span><span class="p">(</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span><span class="p">,</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">EMin_</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="p">)</span> <span class="p">:</span>

    <span class="k">if</span><span class="p">(</span> <span class="n">fixThresholdMode</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode_RaiseOnly</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">fixThresholdMode</span> <span class="o">==</span> <span class="n">fixThresholdMode_None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span><span class="p">(</span> <span class="bp">False</span> <span class="p">)</span>
    <span class="k">elif</span><span class="p">(</span> <span class="n">fixThresholdMode</span> <span class="o">==</span> <span class="n">fixThresholdMode_RaiseOnly</span> <span class="p">)</span> <span class="p">:</span>
        <span class="n">fixThreshold</span> <span class="o">=</span> <span class="n">threshold</span> <span class="o">-</span> <span class="n">EMin_</span> <span class="o">&gt;</span> <span class="n">dThreshold_MeV</span>
    <span class="k">else</span> <span class="p">:</span>
        <span class="n">fixThreshold</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span> <span class="n">threshold</span> <span class="o">-</span> <span class="n">EMin_</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="n">dThreshold_MeV</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">fixThreshold</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">EMin_</span> <span class="o">&lt;</span> <span class="n">EMin</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span><span class="p">(</span> <span class="bp">True</span> <span class="p">)</span>
    <span class="k">return</span><span class="p">(</span> <span class="bp">False</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="fixThresholdFor2d"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.fixThresholdFor2d">[docs]</a><span class="k">def</span> <span class="nf">fixThresholdFor2d</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode_RaiseOnly</span><span class="p">,</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="p">)</span> <span class="p">:</span>

    <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">EMin</span> <span class="o">&gt;</span> <span class="n">threshold</span> <span class="p">)</span> <span class="p">:</span> <span class="n">threshold</span> <span class="o">=</span> <span class="n">EMin</span>
    <span class="n">EMin_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xMin</span><span class="p">(</span> <span class="p">)</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">fixThresholdTest</span><span class="p">(</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span><span class="p">,</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">EMin_</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
        <span class="n">dE</span> <span class="o">=</span> <span class="n">threshold</span> <span class="o">-</span> <span class="n">EMin_</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">abs</span><span class="p">(</span> <span class="n">dE</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&#39;Moving threshold </span><span class="si">%e</span><span class="s"> by </span><span class="si">%e</span><span class="s"> for ZA = </span><span class="si">%d</span><span class="s">, </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">dE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="sb">`self`</span> <span class="p">)</span> <span class="p">)</span>
        <span class="n">ELast</span> <span class="o">=</span> <span class="n">EMin_</span> <span class="o">+</span> <span class="mf">1.</span>                                 <span class="c"># Make sure the first point is always done.</span>
        <span class="k">for</span> <span class="n">Ey</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">Ey</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">ELast</span> <span class="p">)</span> <span class="p">:</span> <span class="k">break</span>
            <span class="n">Ey</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="n">dE</span>
            <span class="n">ELast</span> <span class="o">=</span> <span class="n">Ey</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="fixThresholdFor3d"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.fixThresholdFor3d">[docs]</a><span class="k">def</span> <span class="nf">fixThresholdFor3d</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">realSelf</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode_RaiseOnly</span><span class="p">,</span>
        <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="p">)</span> <span class="p">:</span>

    <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">EMin</span> <span class="o">&gt;</span> <span class="n">threshold</span> <span class="p">)</span> <span class="p">:</span> <span class="n">threshold</span> <span class="o">=</span> <span class="n">EMin</span>
    <span class="n">EMin_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xMin</span><span class="p">(</span> <span class="p">)</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">fixThresholdTest</span><span class="p">(</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span><span class="p">,</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">EMin_</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
        <span class="n">self_</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">realSelf</span> <span class="o">!=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">self_</span> <span class="o">=</span> <span class="n">realSelf</span>
        <span class="n">dE</span> <span class="o">=</span> <span class="n">threshold</span> <span class="o">-</span> <span class="n">EMin_</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">abs</span><span class="p">(</span> <span class="n">dE</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&#39;Moving threshold </span><span class="si">%e</span><span class="s"> by </span><span class="si">%e</span><span class="s"> for ZA = </span><span class="si">%d</span><span class="s">, </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">dE</span><span class="p">,</span> <span class="n">self_</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="sb">`self_`</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">dE</span> <span class="o">&gt;</span> <span class="mf">0.</span> <span class="p">)</span> <span class="p">:</span>                                     <span class="c"># Move lower data up.</span>
            <span class="n">ELast</span> <span class="o">=</span> <span class="n">EMin_</span> <span class="o">+</span> <span class="mf">1.</span>                              <span class="c"># Make sure the first point is always done.</span>
            <span class="n">firstPass</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">EyzPrepend</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">for</span> <span class="n">Eyz</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">Eyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">ELast</span> <span class="p">)</span> <span class="p">:</span> <span class="k">break</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">firstPass</span> <span class="ow">and</span> <span class="p">(</span> <span class="n">Eyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">1.2</span> <span class="o">*</span> <span class="n">EMin</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&#39;Prepending </span><span class="si">%d</span><span class="s"> </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">self_</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="sb">`self_`</span> <span class="p">)</span> <span class="p">)</span>
                    <span class="n">yz</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">Eyz</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">:</span>
                        <span class="n">yz</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="p">]</span> <span class="p">)</span>
                    <span class="n">EyzPrepend</span> <span class="o">=</span> <span class="p">[</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">yz</span> <span class="p">]</span>
                <span class="k">else</span> <span class="p">:</span>
                    <span class="n">Eyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="n">dE</span>
                <span class="n">firstPass</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="n">ELast</span> <span class="o">=</span> <span class="n">Eyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">EyzPrepend</span> <span class="o">!=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EyzPrepend</span> <span class="p">)</span>
        <span class="k">else</span> <span class="p">:</span>                                              <span class="c"># Create point at threshold.</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">I</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span> <span class="n">threshold</span><span class="p">,</span> <span class="p">[</span> <span class="p">[</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span> <span class="p">],</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span> <span class="p">]</span> <span class="p">]</span> <span class="p">]</span> <span class="p">)</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&#39;Creating data at threshold not supported for </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="sb">`self`</span> <span class="p">)</span>
                <span class="k">return</span>
</div>
<div class="viewcode-block" id="fixThresholdFor4d"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.fixThresholdFor4d">[docs]</a><span class="k">def</span> <span class="nf">fixThresholdFor4d</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode_RaiseOnly</span><span class="p">,</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="p">)</span> <span class="p">:</span>

    <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">EMin</span> <span class="o">&gt;</span> <span class="n">threshold</span> <span class="p">)</span> <span class="p">:</span> <span class="n">threshold</span> <span class="o">=</span> <span class="n">EMin</span>
    <span class="n">EMin_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">EMin</span><span class="p">(</span> <span class="p">)</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">fixThresholdTest</span><span class="p">(</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">dThreshold_MeV</span><span class="p">,</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">EMin_</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
        <span class="n">dE</span> <span class="o">=</span> <span class="n">threshold</span> <span class="o">-</span> <span class="n">EMin_</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">abs</span><span class="p">(</span> <span class="n">dE</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&#39;Moving threshold </span><span class="si">%e</span><span class="s"> by </span><span class="si">%e</span><span class="s"> for ZA = </span><span class="si">%d</span><span class="s">, </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">dE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="sb">`self`</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">dE</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>                                      <span class="c"># Move lower data up.</span>
            <span class="n">ELast</span> <span class="o">=</span> <span class="n">EMin_</span> <span class="o">+</span> <span class="mf">1.</span>                              <span class="c"># Make sure the first point is always done.</span>
            <span class="k">for</span> <span class="n">Exyz</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">Exyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">ELast</span> <span class="p">)</span> <span class="p">:</span> <span class="k">break</span>
                <span class="n">Exyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="n">dE</span>
                <span class="n">ELast</span> <span class="o">=</span> <span class="n">Exyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span> <span class="p">:</span>                                              <span class="c"># Create point at threshold.</span>
            <span class="n">Eps</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">],</span> <span class="p">[</span> <span class="mf">1e-9</span><span class="p">,</span> <span class="mf">2e9</span> <span class="p">]</span> <span class="p">]</span>
            <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">I</span> <span class="o">==</span> <span class="mi">3</span> <span class="p">)</span> <span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span> <span class="n">threshold</span><span class="p">,</span> <span class="p">[</span> <span class="p">[</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">Eps</span> <span class="p">],</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Eps</span> <span class="p">]</span> <span class="p">]</span> <span class="p">]</span> <span class="p">)</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&#39;Creating data at threshold not supported for </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="sb">`self`</span> <span class="p">)</span>
                <span class="k">return</span>
</div>
<div class="viewcode-block" id="I1sToCommonGrids"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.I1sToCommonGrids">[docs]</a><span class="k">def</span> <span class="nf">I1sToCommonGrids</span><span class="p">(</span> <span class="n">I1List</span><span class="p">,</span> <span class="n">muGridPerE</span> <span class="o">=</span> <span class="bp">True</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This routine takes a list of I = 1 data and puts their E and mu data onto a common grid. Note, this function may add</span>
<span class="sd">    points for which integral( d_mu P(E,mu) ) = 0 and not 1 (that is, the normalization method may fail).&quot;&quot;&quot;</span>

    <span class="n">Es</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">muGrids</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">muMasterGrid</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">I1</span> <span class="ow">in</span> <span class="n">I1List</span> <span class="p">:</span>
        <span class="k">for</span> <span class="n">E</span><span class="p">,</span> <span class="n">muP</span> <span class="ow">in</span> <span class="n">I1</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">E</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">Es</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">Es</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">E</span> <span class="p">)</span>
                <span class="n">muGrids</span><span class="p">[</span><span class="n">E</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">muGrid</span> <span class="o">=</span> <span class="n">muGrids</span><span class="p">[</span><span class="n">E</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">mu</span><span class="p">,</span> <span class="n">P</span> <span class="ow">in</span> <span class="n">muP</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">mu</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">muGrid</span> <span class="p">)</span> <span class="p">:</span> <span class="n">muGrid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">mu</span> <span class="p">)</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">mu</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">muMasterGrid</span> <span class="p">)</span> <span class="p">:</span> <span class="n">muMasterGrid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">mu</span> <span class="p">)</span>
    <span class="n">Es</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span> <span class="p">)</span>
    <span class="k">for</span> <span class="n">E</span> <span class="ow">in</span> <span class="n">Es</span> <span class="p">:</span> <span class="n">muGrids</span><span class="p">[</span><span class="n">E</span><span class="p">]</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span> <span class="p">)</span>
    <span class="n">muMasterGrid</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span> <span class="p">)</span>
    <span class="n">thisMuGrid</span> <span class="o">=</span> <span class="n">muMasterGrid</span>
    <span class="k">for</span> <span class="n">I1</span> <span class="ow">in</span> <span class="n">I1List</span> <span class="p">:</span>
        <span class="n">EMin</span><span class="p">,</span> <span class="n">EMax</span> <span class="o">=</span> <span class="n">I1</span><span class="o">.</span><span class="n">xMin</span><span class="p">(</span> <span class="p">),</span> <span class="n">I1</span><span class="o">.</span><span class="n">xMax</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">EMin</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">EMax</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span> <span class="s">&#39;I = 1 data does not contain at least two energy points: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="sb">`I1`</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">E</span> <span class="ow">in</span> <span class="n">Es</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">muGridPerE</span> <span class="p">)</span> <span class="p">:</span> <span class="n">thisMuGrid</span> <span class="o">=</span> <span class="n">muGrids</span><span class="p">[</span><span class="n">E</span><span class="p">]</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">EMin</span> <span class="o">&lt;=</span> <span class="n">E</span> <span class="o">&lt;=</span> <span class="n">EMax</span> <span class="p">)</span> <span class="p">:</span> 
                <span class="n">muP</span> <span class="o">=</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="p">(</span> <span class="n">I1</span><span class="o">.</span><span class="n">getEData</span><span class="p">(</span> <span class="n">E</span> <span class="p">)</span> <span class="p">)</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="n">muP</span> <span class="o">=</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="p">(</span> <span class="p">[</span> <span class="p">[</span> <span class="n">thisMuGrid</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span> <span class="p">],</span> <span class="p">[</span> <span class="n">thisMuGrid</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span> <span class="p">]</span> <span class="p">]</span> <span class="p">)</span>
            <span class="k">for</span> <span class="n">mu</span> <span class="ow">in</span> <span class="n">thisMuGrid</span> <span class="p">:</span> <span class="n">muP</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span> <span class="n">mu</span><span class="p">,</span> <span class="n">muP</span><span class="o">.</span><span class="n">getValue</span><span class="p">(</span> <span class="n">mu</span> <span class="p">)</span> <span class="p">)</span>
            <span class="n">I1</span><span class="o">.</span><span class="n">setEData</span><span class="p">(</span> <span class="n">E</span><span class="p">,</span> <span class="n">muP</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="toZAsFrameMisc"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlIClasses.toZAsFrameMisc">[docs]</a><span class="k">def</span> <span class="nf">toZAsFrameMisc</span><span class="p">(</span> <span class="n">endlI</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">newProjectileMass</span><span class="p">,</span> <span class="n">newTargetMass</span><span class="p">,</span> <span class="n">ELevel</span><span class="p">,</span> <span class="n">halflife</span><span class="p">,</span> <span class="n">bdflsFile</span><span class="p">,</span> <span class="n">firstParameterEIn</span> <span class="p">)</span> <span class="p">:</span>

    <span class="kn">import</span> <span class="nn">endl2</span>
    <span class="n">h</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span> <span class="n">old</span><span class="o">.</span><span class="n">h</span> <span class="p">)</span>
    <span class="n">new</span> <span class="o">=</span> <span class="n">endlI</span><span class="p">(</span> <span class="bp">None</span><span class="p">,</span> <span class="n">old</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="n">old</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">old</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="n">old</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">points</span> <span class="o">=</span> <span class="n">old</span><span class="o">.</span><span class="n">copyData</span><span class="p">(</span> <span class="p">),</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span> <span class="p">)</span> 
    <span class="n">new</span><span class="o">.</span><span class="n">setZA</span><span class="p">(</span> <span class="n">endl2</span><span class="o">.</span><span class="n">yoToZA</span><span class="p">(</span> <span class="n">old</span><span class="o">.</span><span class="n">getYi</span><span class="p">(</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span>
    <span class="n">new</span><span class="o">.</span><span class="n">setYi</span><span class="p">(</span> <span class="n">endl2</span><span class="o">.</span><span class="n">ZAToYo</span><span class="p">(</span> <span class="n">old</span><span class="o">.</span><span class="n">getZA</span><span class="p">(</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span>
    <span class="n">new</span><span class="o">.</span><span class="n">setMass</span><span class="p">(</span> <span class="n">newTargetMass</span> <span class="p">)</span>
    <span class="n">new</span><span class="o">.</span><span class="n">setELevel</span><span class="p">(</span> <span class="n">ELevel</span> <span class="p">)</span>
    <span class="n">new</span><span class="o">.</span><span class="n">setHalflife</span><span class="p">(</span> <span class="n">halflife</span> <span class="p">)</span>
    <span class="n">new</span><span class="o">.</span><span class="n">setX1</span><span class="p">(</span> <span class="mf">0.</span> <span class="p">)</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">newProjectileMass</span> <span class="o">/</span> <span class="n">newTargetMass</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">firstParameterEIn</span> <span class="p">)</span> <span class="p">:</span>
        <span class="k">for</span> <span class="n">xy</span> <span class="ow">in</span> <span class="n">new</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span> <span class="n">xy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*=</span> <span class="n">r</span>
    <span class="k">return</span><span class="p">(</span> <span class="n">new</span><span class="p">,</span> <span class="n">r</span> <span class="p">)</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../../index.html">
              <img class="logo" src="../../../../_static/gnd.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../../index.html">Fudge and GND 1.3 beta documentation</a> &raquo;</li>
          <li><a href="../../../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, B.Beck, D. Brown, C. Mattoon, N. Patel, N. Summers.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>