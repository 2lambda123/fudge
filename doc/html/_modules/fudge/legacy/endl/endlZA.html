
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>fudge.legacy.endl.endlZA &mdash; Fudge and GND 1.2 beta documentation</title>
    
    <link rel="stylesheet" href="../../../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '1.2 beta',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../../../../_static/gnd-20121206-favicon.ico"/>
    <link rel="top" title="Fudge and GND 1.2 beta documentation" href="../../../../index.html" />
    <link rel="up" title="Module code" href="../../../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../../index.html">Fudge and GND 1.2 beta documentation</a> &raquo;</li>
          <li><a href="../../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for fudge.legacy.endl.endlZA</h1><div class="highlight"><pre>
<span class="c"># &lt;&lt;BEGIN-copyright&gt;&gt;</span>
<span class="c"># &lt;&lt;END-copyright&gt;&gt;</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This module contains the class endlZA.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">ZNameErrorCounter</span> <span class="o">=</span> <span class="mi">0</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">tempfile</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">fudge</span> <span class="kn">import</span> <span class="n">fudgeDefaults</span><span class="p">,</span> <span class="n">fudgeParameters</span>
<span class="kn">from</span> <span class="nn">fudge.core.utilities</span> <span class="kn">import</span> <span class="n">fudgeExceptions</span><span class="p">,</span> <span class="n">brb</span>
<span class="kn">from</span> <span class="nn">fudge.core.math</span> <span class="kn">import</span> <span class="n">endl2dmathClasses</span>
<span class="kn">from</span> <span class="nn">fudge.processing</span> <span class="kn">import</span> <span class="n">bdfls</span>
<span class="kn">import</span> <span class="nn">fudgeDocumentationFile</span>
<span class="kn">import</span> <span class="nn">endlFile</span>
<span class="kn">import</span> <span class="nn">endl2</span>
<span class="kn">import</span> <span class="nn">endlmisc</span>
<span class="kn">import</span> <span class="nn">endlIClasses</span>
<span class="kn">import</span> <span class="nn">endl_C</span>
<span class="kn">import</span> <span class="nn">endl_y</span>
<span class="kn">import</span> <span class="nn">endl_I</span>
<span class="kn">import</span> <span class="nn">endl_Z</span>
<span class="kn">import</span> <span class="nn">endlReactionParameters</span>
<span class="k">try</span> <span class="p">:</span>
    <span class="kn">from</span> <span class="nn">fudge.structure</span> <span class="kn">import</span> <span class="n">xensl</span>
<span class="k">except</span> <span class="p">:</span>
    <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&#39;Could not import xensl.py&#39;</span> <span class="p">)</span>

<div class="viewcode-block" id="endlZA"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA">[docs]</a><span class="k">class</span> <span class="nc">endlZA</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class contains the information for an ENDL za.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">ZA</span><span class="p">,</span> <span class="n">yi</span><span class="p">,</span> <span class="n">database</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">release</span> <span class="o">=</span> <span class="s">&#39;current&#39;</span><span class="p">,</span> <span class="n">workDir</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">suffix</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">readOnly</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Creates a new endlZA object.&quot;&quot;&quot;</span>

        <span class="k">if</span><span class="p">(</span> <span class="n">bdflsFile</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdfls</span><span class="o">.</span><span class="n">getDefaultBdfls</span><span class="p">(</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span> <span class="o">=</span> <span class="n">bdflsFile</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sZA</span> <span class="o">=</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">strZASuffix</span><span class="p">(</span> <span class="n">ZA</span><span class="p">,</span> <span class="n">suffix</span> <span class="p">)</span>
        <span class="n">ZA_</span><span class="p">,</span> <span class="n">suffix_</span> <span class="o">=</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">intZASuffix</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">sZA</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span> <span class="o">=</span> <span class="n">ZA_</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Z</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">A</span> <span class="o">=</span> <span class="n">endl2</span><span class="o">.</span><span class="n">ZandAFromZA</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">suffix</span> <span class="o">=</span> <span class="n">suffix_</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">targetName</span>   <span class="o">=</span> <span class="n">endl2</span><span class="o">.</span><span class="n">nameForYoOrZA</span><span class="p">(</span>   <span class="bp">self</span><span class="o">.</span><span class="n">sZA</span><span class="p">,</span> <span class="n">NameASeperator</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">ZAOnly</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">AddNatural</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">m_to_m1</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">suffixSeperator</span> <span class="o">=</span> <span class="s">&#39;_&#39;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">targetSymbol</span> <span class="o">=</span> <span class="n">endl2</span><span class="o">.</span><span class="n">endlToGNDName</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">sZA</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">targetSymbol</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yiTags</span> <span class="o">=</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">incidentParticleTags</span><span class="p">(</span> <span class="n">yi</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yiTags</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">projectileName</span> <span class="o">=</span> <span class="n">endl2</span><span class="o">.</span><span class="n">endlToGNDName</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">readOnly</span> <span class="o">=</span> <span class="n">readOnly</span> <span class="ow">or</span> <span class="n">fudgeParameters</span><span class="o">.</span><span class="n">ReadOnly</span>
        <span class="n">gappsDir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span> <span class="s">&#39;/usr/gapps/data/nuclear&#39;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">documentation</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">database</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>                    <span class="c"># This is a designer isotope.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">DesignerIsotope</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="s">&quot;Designer isotope&quot;</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">workDir</span> <span class="o">==</span> <span class="s">&#39;&#39;</span> <span class="p">)</span> <span class="p">:</span> <span class="n">workDir</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">if</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">readOnly</span> <span class="p">)</span> <span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">workDir</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">(</span> <span class="p">)</span>
                <span class="k">else</span> <span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="o">=</span> <span class="n">workDir</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">gappsDir</span> <span class="o">==</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="p">)[:</span><span class="nb">len</span><span class="p">(</span> <span class="n">gappsDir</span> <span class="p">)]</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span> <span class="s">&#39;development&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span> <span class="s">&#39;cannot make workDir point to /usr/gapps/data/nuclear, except in a development sub-directory&#39;</span> <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="o">=</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">appendyiDirIfNeeded</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span> <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sZA</span> <span class="p">)</span>
                <span class="k">if</span><span class="p">(</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span> <span class="n">fudgeParameters</span><span class="o">.</span><span class="n">VerboseMode</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;workDir =&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Source directory =&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">DesignerIsotope</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">Status</span> <span class="p">)</span> <span class="o">=</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">getFullPath</span><span class="p">(</span> <span class="n">database</span><span class="p">,</span> <span class="n">fudgeDefaults</span><span class="o">.</span><span class="n">ENDL_DATABASE_DIR</span> <span class="p">)</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">Status</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="p">,</span> <span class="n">Status</span> <span class="p">)</span> <span class="o">=</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">getFullPath</span><span class="p">(</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span> <span class="n">database</span><span class="p">,</span> <span class="s">&#39;ascii&#39;</span> <span class="p">),</span> \
                <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span> <span class="n">fudgeDefaults</span><span class="o">.</span><span class="n">TRANSLATED_DATABASE_DIR</span><span class="p">,</span> <span class="n">release</span> <span class="p">)</span> <span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span> <span class="n">Status</span> <span class="o">!=</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Error in endlZA.__init__: ZA sub-directory is not a directory or does not exist&quot;</span> <span class="p">)</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">workDir</span> <span class="o">==</span> <span class="s">&#39;&#39;</span> <span class="p">)</span> <span class="p">:</span> <span class="n">workDir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">appendyiDirIfNeeded</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span> <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sZA</span> <span class="p">)</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>                <span class="c"># Does the ZA directory exist</span>
                <span class="k">if</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">readOnly</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="o">=</span> <span class="bp">None</span>
                <span class="k">else</span> <span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">workDir</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">(</span> <span class="p">)</span>
                    <span class="k">else</span> <span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="o">=</span> <span class="n">workDir</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">gappsDir</span> <span class="o">==</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="p">)[:</span><span class="nb">len</span><span class="p">(</span> <span class="n">gappsDir</span> <span class="p">)]</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="k">if</span><span class="p">(</span> <span class="s">&#39;development&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span> <span class="s">&#39;cannot make workDir point to /usr/gapps/data/nuclear, except in a development sub-directory&#39;</span> <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="o">=</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">appendyiDirIfNeeded</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span> <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sZA</span> <span class="p">)</span>
                    <span class="k">if</span><span class="p">(</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span> <span class="n">fudgeParameters</span><span class="o">.</span><span class="n">VerboseMode</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;workDir =&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Source directory =&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span>
                <span class="n">F</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="p">)</span>
                <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="o">!=</span> <span class="bp">None</span> <span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">samefile</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">fudgeParameters</span><span class="o">.</span><span class="n">VerboseMode</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> 
                        <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&#39;Are you sure you know what you are doing as database and work directories are the same?&#39;</span> <span class="p">)</span>
                <span class="k">else</span> <span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">readOnly</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">F</span> <span class="p">:</span>
                            <span class="n">fp</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">f</span> <span class="p">)</span>
                            <span class="k">try</span> <span class="p">:</span>
                                <span class="k">if</span><span class="p">(</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span> <span class="n">fp</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span> <span class="n">fp</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span><span class="p">,</span> <span class="n">f</span> <span class="p">)</span> <span class="p">)</span>
                            <span class="k">except</span> <span class="p">:</span>
                                <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&#39;Could not copy source file </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">fp</span> <span class="p">)</span>
                <span class="n">F</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span> <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">F</span> <span class="p">:</span>        <span class="c"># Process only yo##c##i###s### files and create list self.filelist[]</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span> <span class="s">r&quot;yo\d\dc\d\di\d\d\ds\d\d\d$&quot;</span><span class="p">,</span> <span class="n">f</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlFile</span><span class="o">.</span><span class="n">endlFile</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="n">f</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span> <span class="p">)</span> <span class="p">)</span>
                <span class="n">documentationFileName</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="s">&#39;documentation.txt&#39;</span> <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">documentation</span> <span class="o">=</span> <span class="bp">None</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span> <span class="n">documentationFileName</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">documentation</span> <span class="o">=</span> <span class="n">fudgeDocumentationFile</span><span class="o">.</span><span class="n">fudgeDocumentationFile</span><span class="p">(</span> <span class="n">documentationFileName</span> <span class="p">)</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Error in endlZA.__init__: database </span><span class="si">%s</span><span class="s"> does not contain isotope = </span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">ZA_</span> <span class="p">)</span> <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__getattr__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">name</span> <span class="p">)</span> <span class="p">:</span>

        <span class="k">global</span> <span class="n">ZNameErrorCounter</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">[</span> <span class="s">&#39;ZName&#39;</span><span class="p">,</span> <span class="s">&#39;ZSymbol&#39;</span> <span class="p">]</span> <span class="p">)</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">ZNameErrorCounter</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s"> ------------------------- Warning -------------------------&quot;</span>
                <span class="k">print</span> <span class="s">&quot;  You have just used &#39;</span><span class="si">%s</span><span class="s">&#39; which is being deprecated in version 3.&quot;</span> <span class="o">%</span> <span class="n">name</span>
                <span class="k">print</span> <span class="s">&quot;  ZName and ZSymbol are deprecated members of endlZA. Please&quot;</span>
                <span class="k">print</span> <span class="s">&quot;  use targetName and targetSymbol instead. This message is only&quot;</span>
                <span class="k">print</span> <span class="s">&quot;  printed once.&quot;</span>
                <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">  Traceback information to follow:&quot;</span>
                <span class="kn">import</span> <span class="nn">traceback</span>
                <span class="n">traceback</span><span class="o">.</span><span class="n">print_stack</span><span class="p">(</span> <span class="p">)</span>
                <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s"> -----------------------------------------------------------&quot;</span>
            <span class="n">ZNameErrorCounter</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">name</span> <span class="o">==</span> <span class="s">&#39;ZName&#39;</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">targetName</span> <span class="p">)</span>
            <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">targetSymbol</span> <span class="p">)</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span> <span class="s">&quot;endlZA instance has no attribute &#39;</span><span class="si">%s</span><span class="s">&#39;&quot;</span> <span class="o">%</span> <span class="n">name</span> <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">index</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls findData( yo, C, I, S, X1, X2, X3, X4, Q ) and returns the matching item.</span>
<span class="sd">For example, if za is an endlZA object then either of the two methods below </span>
<span class="sd">can be used to get a reference to the neutron in-elastic cross section,</span>
<span class="sd">&gt;&gt;&gt; i1 = za[ ( 1, 11, 1, 0 ) ]</span>
<span class="sd">&gt;&gt;&gt; i1 = za.findData( 1, 11, 1, 0 )</span>
<span class="sd">&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">index</span> <span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="p">)</span> <span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Error in endlZA.__getitem__: index must contain at least yo, C and I, ( yo, C, I, S, X1, X2, X3, X4, Q )&quot;</span> <span class="p">)</span>
        <span class="k">elif</span> <span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">index</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">9</span> <span class="p">)</span> <span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Error in endlZA.__getitem__: index must contain only ( yo, C, I, S, X1, X2, X3, X4, Q )&quot;</span> <span class="p">)</span>
        <span class="n">yo</span> <span class="o">=</span> <span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">C</span> <span class="o">=</span> <span class="n">index</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">I</span> <span class="o">=</span> <span class="n">index</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">S_XnQ</span> <span class="o">=</span> <span class="p">[</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span> <span class="p">]</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">index</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">3</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">S_XnQ</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">index</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">3</span><span class="p">]</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">findData</span><span class="p">(</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S_XnQ</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">S_XnQ</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">S_XnQ</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">S_XnQ</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">S_XnQ</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">S_XnQ</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="p">)</span>

<div class="viewcode-block" id="endlZA.addEndlFile"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.addEndlFile">[docs]</a>    <span class="k">def</span> <span class="nf">addEndlFile</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">endlfile</span><span class="p">,</span> <span class="n">replace</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">checkHeaders</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">halflife</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">templateData</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Adds endlFile instance endlfile to self.  If replace is 0 and file exist in self, then</span>
<span class="sd">        a raise is executed.  If replace is 1 and file exist, a warning message is printed</span>
<span class="sd">        and endlfile replaces the existing file.  If replace is niether 0 or 1, any existing</span>
<span class="sd">        file in self is replaced by endlfile without any notification.  If checkHeaders is true,</span>
<span class="sd">        the headers of endlfile are compared to other headers in self, and modified if needed.</span>
<span class="sd">        A reference to endlfile is returned.&quot;&quot;&quot;</span>

        <span class="k">if</span><span class="p">(</span> <span class="n">templateData</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">f</span><span class="o">.</span><span class="n">C</span> <span class="o">!=</span> <span class="n">endlfile</span><span class="o">.</span><span class="n">C</span> <span class="p">)</span> <span class="p">:</span> <span class="k">continue</span>
                <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">levels</span> <span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">h</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">68</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="n">templateData</span> <span class="o">=</span> <span class="n">l</span>
                        <span class="k">break</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">templateData</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span> <span class="p">:</span>
                    <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">levels</span> <span class="p">:</span>
                        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">h</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">68</span> <span class="p">)</span> <span class="p">:</span>
                            <span class="n">templateData</span> <span class="o">=</span> <span class="n">l</span>
                            <span class="k">break</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">replace</span> <span class="p">)</span> <span class="p">:</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span> <span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">endlfile</span><span class="o">.</span><span class="n">name</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">replace</span> <span class="p">)</span> <span class="p">:</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&quot;Warning in endlZA.addEndlFile: file exist and is being replaced&quot;</span> <span class="p">)</span>
                    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="k">break</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addFile</span><span class="p">(</span> <span class="n">endlfile</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="n">endlfile</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">endlfile</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="n">endlfile</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="n">halflife</span> <span class="o">=</span> <span class="n">halflife</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">endlfile</span><span class="o">.</span><span class="n">levels</span> <span class="o">==</span> <span class="p">[]</span> <span class="p">)</span> <span class="p">:</span> <span class="n">endlfile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">endlfile</span><span class="o">.</span><span class="n">levels</span> <span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">addEndlData</span><span class="p">(</span> <span class="n">l</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">checkHeaders</span> <span class="p">)</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">templateData</span> <span class="o">!=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">C</span> <span class="o">!=</span> <span class="mi">10</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">C</span> <span class="o">!=</span> <span class="n">templateData</span><span class="o">.</span><span class="n">C</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&quot;Warning in endlZA.addEndlFile: template reaction not the same as new data, so Q and temperature may not be correct.&quot;</span> <span class="p">)</span>
                <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">levels</span> <span class="p">:</span>
                    <span class="n">l</span><span class="o">.</span><span class="n">setZA</span><span class="p">(</span> <span class="n">templateData</span><span class="o">.</span><span class="n">getZA</span><span class="p">(</span> <span class="p">)</span> <span class="p">)</span>
                    <span class="n">l</span><span class="o">.</span><span class="n">setMass</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span><span class="o">.</span><span class="n">mass</span><span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">getZA</span><span class="p">(</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span>
                    <span class="n">l</span><span class="o">.</span><span class="n">setYi</span><span class="p">(</span> <span class="n">templateData</span><span class="o">.</span><span class="n">getYi</span><span class="p">(</span> <span class="p">)</span> <span class="p">)</span>
                    <span class="n">l</span><span class="o">.</span><span class="n">setHalflife</span><span class="p">(</span> <span class="n">templateData</span><span class="o">.</span><span class="n">getHalflife</span><span class="p">(</span> <span class="p">)</span> <span class="p">)</span>
                    <span class="n">l</span><span class="o">.</span><span class="n">setTemperature</span><span class="p">(</span> <span class="n">templateData</span><span class="o">.</span><span class="n">getTemperature</span><span class="p">(</span> <span class="p">)</span> <span class="p">)</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">C</span> <span class="o">==</span> <span class="n">templateData</span><span class="o">.</span><span class="n">C</span> <span class="p">)</span> <span class="p">:</span> <span class="n">l</span><span class="o">.</span><span class="n">setQ</span><span class="p">(</span> <span class="n">templateData</span><span class="o">.</span><span class="n">getQ</span><span class="p">(</span> <span class="p">)</span> <span class="p">)</span>
<span class="c">#                    if( len( l.h[0] ) &gt; 34 ) :</span>
<span class="c">#                        l.h[0] = templateData.h[0][:25] + l.h[0][25:34] + templateData.h[0][34:]</span>
<span class="c">#                    else :</span>
<span class="c">#                        l.h[0] = copy.deepcopy.templateData.h[0]</span>
<span class="c">#                    l.setYo( endlfile.yo )</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">C</span> <span class="o">!=</span> <span class="mi">10</span> <span class="p">)</span> <span class="p">:</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&quot;Warning in endlZA.addEndlFile: no template data found, so Q and temperature may not be correct.&quot;</span> <span class="p">)</span>
                <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">levels</span> <span class="p">:</span>
                    <span class="n">l</span><span class="o">.</span><span class="n">setZA</span><span class="p">(</span> <span class="n">f</span><span class="o">.</span><span class="n">ZA</span> <span class="p">)</span>
                    <span class="n">l</span><span class="o">.</span><span class="n">setMass</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span><span class="o">.</span><span class="n">mass</span><span class="p">(</span> <span class="n">f</span><span class="o">.</span><span class="n">ZA</span> <span class="p">)</span> <span class="p">)</span>
                    <span class="n">l</span><span class="o">.</span><span class="n">setYi</span><span class="p">(</span> <span class="n">f</span><span class="o">.</span><span class="n">yi</span> <span class="p">)</span>
                    <span class="n">l</span><span class="o">.</span><span class="n">setHalflife</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span><span class="o">.</span><span class="n">halflife</span><span class="p">(</span> <span class="n">f</span><span class="o">.</span><span class="n">ZA</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span> <span class="n">f</span>
</div>
<div class="viewcode-block" id="endlZA.addFile"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.addFile">[docs]</a>    <span class="k">def</span> <span class="nf">addFile</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">halflife</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">printWarnings</span> <span class="o">=</span> <span class="bp">True</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Adds the (yo, C, I, S) file to endlZA.  If the file already exist a raise is executed.&quot;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="p">(</span> <span class="n">I</span> <span class="o">==</span> <span class="mi">10</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">I</span> <span class="o">==</span> <span class="mi">11</span> <span class="p">)</span> <span class="p">)</span> <span class="ow">and</span> <span class="n">printWarnings</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&quot;Warning in endlZA.addFile: I-values of 10 or 11 may be overwritten in processing&quot;</span> <span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="n">I</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="n">yo</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Error in endlZA.addFile: For I = 0, yo must also be 0&quot;</span> <span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">c</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;yo</span><span class="si">%2.2d</span><span class="s">c</span><span class="si">%2.2d</span><span class="s">i</span><span class="si">%3.3d</span><span class="s">s</span><span class="si">%3.3d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span> <span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="n">fudgeExceptions</span><span class="o">.</span><span class="n">ENDL_addFileException_FileExist</span><span class="p">(</span> <span class="s">&quot;Error in endlZA.addFile: file already exist&quot;</span> <span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span>  <span class="o">&gt;</span> <span class="n">name</span> <span class="p">)</span> <span class="p">:</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">if</span> <span class="p">(</span> <span class="n">c</span> <span class="p">)</span> <span class="p">:</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">endlFile</span><span class="o">.</span><span class="n">endlFile</span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="s">&quot;Designer File&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span><span class="p">,</span> <span class="n">halflife</span> <span class="o">=</span> <span class="n">halflife</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span> <span class="n">i</span><span class="p">,</span> <span class="n">f</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">f</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.changeFileYoCIS"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.changeFileYoCIS">[docs]</a>    <span class="k">def</span> <span class="nf">changeFileYoCIS</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="nb">file</span><span class="p">,</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">deleteOldFile</span> <span class="o">=</span> <span class="bp">True</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Changes endlFile object file&#39;s yo-, C-, I- and S-values to yo, C, I and S.</span>
<span class="sd">        If deleteOldFile is true, the old file is deleted (a new file is not created unless method save is called).&quot;&quot;&quot;</span>

        <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="nb">file</span><span class="o">.</span><span class="n">yo</span> <span class="o">==</span> <span class="n">yo</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="nb">file</span><span class="o">.</span><span class="n">C</span> <span class="o">==</span> <span class="n">C</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="nb">file</span><span class="o">.</span><span class="n">I</span> <span class="o">==</span> <span class="n">I</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="nb">file</span><span class="o">.</span><span class="n">S</span> <span class="o">==</span> <span class="n">S</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span>
        <span class="n">oldName</span> <span class="o">=</span> <span class="nb">file</span><span class="o">.</span><span class="n">name</span>
        <span class="nb">file</span><span class="o">.</span><span class="n">setYiZAYoCISs</span><span class="p">(</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">S</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">deleteOldFile</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;rm -rf &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="n">oldName</span>
            <span class="k">if</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="o">!=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> 
                <span class="k">if</span> <span class="p">(</span> <span class="n">fudgeParameters</span><span class="o">.</span><span class="n">VerboseMode</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;executing system command &gt;&gt;&gt;&quot;</span><span class="p">,</span> <span class="n">cmd</span>
                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span> <span class="n">cmd</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.check"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">dQ_MeV</span> <span class="o">=</span> <span class="mf">10e-3</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="mf">10e-3</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">checkForEnDepData</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">normTolerance</span> <span class="o">=</span> <span class="mf">1e-5</span><span class="p">,</span> <span class="n">allowZeroE</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
        <span class="n">checkList</span> <span class="o">=</span> <span class="p">{},</span> <span class="n">crossSectionsOnly</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Checks all read in data in self.&quot;</span>

        <span class="n">checkListKeys</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&#39;checkEMin&#39;</span> <span class="p">:</span> <span class="bp">True</span><span class="p">,</span> <span class="s">&#39;checkMissing&#39;</span> <span class="p">:</span> <span class="bp">True</span><span class="p">,</span> <span class="s">&#39;checkSubChecks&#39;</span> <span class="p">:</span> <span class="bp">True</span><span class="p">,</span> <span class="s">&#39;energyBalance&#39;</span> <span class="p">:</span> <span class="mf">10e-3</span><span class="p">,</span> <span class="s">&#39;maxGammaMultiplicity&#39;</span> <span class="p">:</span> <span class="mf">100.</span><span class="p">,</span>
            <span class="s">&#39;crossSectionEnergyMax&#39;</span> <span class="p">:</span> <span class="mi">20</span> <span class="p">}</span>
        <span class="k">for</span> <span class="n">checkKey</span> <span class="ow">in</span> <span class="n">checkList</span> <span class="p">:</span> <span class="n">checkListKeys</span><span class="p">[</span><span class="n">checkKey</span><span class="p">]</span> <span class="o">=</span> <span class="n">checkList</span><span class="p">[</span><span class="n">checkKey</span><span class="p">]</span>
        <span class="n">maxGammaMultiplicity</span> <span class="o">=</span> <span class="n">checkListKeys</span><span class="p">[</span><span class="s">&#39;maxGammaMultiplicity&#39;</span><span class="p">]</span>
        <span class="n">ErrMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">targetParameters</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&#39;T&#39;</span> <span class="p">:</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;ELevel&#39;</span> <span class="p">:</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;halflife&#39;</span> <span class="p">:</span> <span class="bp">None</span> <span class="p">}</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">f</span><span class="o">.</span><span class="n">levels</span> <span class="o">==</span> <span class="p">[]</span> <span class="p">)</span> <span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">checkListKeys</span><span class="p">[</span><span class="s">&#39;checkSubChecks&#39;</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span> <span class="p">:</span> 
                <span class="n">allowZeroE_</span> <span class="o">=</span> <span class="n">allowZeroE</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">f</span><span class="o">.</span><span class="n">I</span> <span class="ow">in</span> <span class="p">[</span> <span class="mi">941</span><span class="p">,</span> <span class="mi">942</span> <span class="p">]</span> <span class="p">)</span> <span class="p">:</span> <span class="n">allowZeroE_</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="n">ErrMsgs</span> <span class="o">+=</span> <span class="n">f</span><span class="o">.</span><span class="n">check</span><span class="p">(</span> <span class="n">targetParameters</span> <span class="o">=</span> <span class="n">targetParameters</span><span class="p">,</span> <span class="n">dQ_MeV</span> <span class="o">=</span> <span class="n">dQ_MeV</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="n">dThreshold_MeV</span><span class="p">,</span> <span class="n">xCloseEps</span> <span class="o">=</span> <span class="n">xCloseEps</span><span class="p">,</span>
                    <span class="n">allowZeroE</span> <span class="o">=</span> <span class="n">allowZeroE_</span><span class="p">,</span> <span class="n">normTolerance</span> <span class="o">=</span> <span class="n">normTolerance</span><span class="p">,</span> <span class="n">maxAbsFloatValue</span> <span class="o">=</span> <span class="n">maxAbsFloatValue</span> <span class="p">)</span>
        <span class="n">reactionsDatas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findReactionsDatas</span><span class="p">(</span> <span class="p">)</span>
        <span class="n">crossSectionEnergyMax</span> <span class="o">=</span> <span class="n">checkListKeys</span><span class="p">[</span><span class="s">&#39;crossSectionEnergyMax&#39;</span><span class="p">]</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">type</span><span class="p">(</span> <span class="n">crossSectionEnergyMax</span> <span class="p">)</span> <span class="o">!=</span> <span class="nb">type</span><span class="p">(</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">crossSectionEnergyMax</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span> <span class="n">crossSectionEnergyMax</span> <span class="p">)</span>
            <span class="n">I0s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findDatas</span><span class="p">(</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> 
            <span class="k">for</span> <span class="n">I0</span> <span class="ow">in</span> <span class="n">I0s</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">I0</span><span class="o">.</span><span class="n">xMax</span><span class="p">(</span> <span class="p">)</span> <span class="o">&lt;</span> <span class="n">crossSectionEnergyMax</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">I0</span><span class="o">.</span><span class="n">getValue</span><span class="p">(</span> <span class="n">I0</span><span class="o">.</span><span class="n">xMax</span><span class="p">(</span> <span class="p">)</span> <span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">yi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span><span class="p">,</span> <span class="n">ZA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="n">suffix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">suffix</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">I0</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">I0</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">I0</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="n">I0</span><span class="o">.</span><span class="n">X1</span><span class="p">,</span> \
                            <span class="n">X2</span> <span class="o">=</span> <span class="n">I0</span><span class="o">.</span><span class="n">X2</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="n">I0</span><span class="o">.</span><span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">I0</span><span class="o">.</span><span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">I0</span><span class="o">.</span><span class="n">Q</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="s">&#39;non zero termination of cross section data below EMax&#39;</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">reactionDatas</span> <span class="ow">in</span> <span class="n">reactionsDatas</span> <span class="p">:</span>
            <span class="n">I0</span> <span class="o">=</span> <span class="n">reactionDatas</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">C</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">X1</span><span class="p">,</span> <span class="n">X2</span><span class="p">,</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">I0</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">I0</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="n">I0</span><span class="o">.</span><span class="n">X1</span><span class="p">,</span> <span class="n">I0</span><span class="o">.</span><span class="n">X2</span><span class="p">,</span> <span class="n">I0</span><span class="o">.</span><span class="n">X3</span><span class="p">,</span> <span class="n">I0</span><span class="o">.</span><span class="n">X4</span><span class="p">,</span> <span class="n">I0</span><span class="o">.</span><span class="n">Q</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">I0</span><span class="o">.</span><span class="n">I</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">yi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span><span class="p">,</span> <span class="n">ZA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="n">suffix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">suffix</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">S</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="n">X1</span><span class="p">,</span> \
                    <span class="n">X2</span> <span class="o">=</span> <span class="n">X2</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="s">&#39;missing I = 0 data&#39;</span> <span class="p">)</span> <span class="p">)</span>
                <span class="k">continue</span>
            <span class="n">energyDepedentQ</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">C</span> <span class="o">==</span> <span class="mi">15</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">promptAndDelayed</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">reactionDatas</span> <span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">data</span><span class="o">.</span><span class="n">I</span> <span class="o">==</span> <span class="mi">7</span> <span class="p">)</span> <span class="p">:</span> <span class="n">promptAndDelayed</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">data</span><span class="o">.</span><span class="n">S</span> <span class="p">)</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">data</span><span class="o">.</span><span class="n">I</span> <span class="o">==</span> <span class="mi">12</span> <span class="p">)</span> <span class="p">:</span> <span class="n">energyDepedentQ</span> <span class="o">=</span> <span class="n">data</span>
                <span class="k">if</span><span class="p">(</span> <span class="mi">0</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">promptAndDelayed</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">yi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span><span class="p">,</span> <span class="n">ZA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="n">suffix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">suffix</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> \
                    <span class="n">I</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>  <span class="n">X1</span> <span class="o">=</span> <span class="n">X1</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="n">X2</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="s">&#39;missing I = 7, S = 0 data&#39;</span> <span class="p">)</span> <span class="p">)</span>
                <span class="k">if</span><span class="p">(</span> <span class="mi">7</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">promptAndDelayed</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">yi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span><span class="p">,</span> <span class="n">ZA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="n">suffix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">suffix</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> \
                    <span class="n">I</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>  <span class="n">X1</span> <span class="o">=</span> <span class="n">X1</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="n">X2</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="s">&#39;missing I = 7, S = 7 data&#39;</span> <span class="p">)</span> <span class="p">)</span>
                <span class="k">if</span><span class="p">(</span> <span class="mi">17</span> <span class="ow">in</span> <span class="n">promptAndDelayed</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">yi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span><span class="p">,</span> <span class="n">ZA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="n">suffix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">suffix</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="mi">17</span><span class="p">,</span> \
                    <span class="n">I</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>  <span class="n">X1</span> <span class="o">=</span> <span class="n">X1</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="n">X2</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="s">&#39;unsupported I = 7, S = 17 data found&#39;</span> <span class="p">)</span> <span class="p">)</span>
            <span class="n">EMinI0</span> <span class="o">=</span> <span class="n">I0</span><span class="o">.</span><span class="n">xMin</span><span class="p">(</span> <span class="p">)</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">checkListKeys</span><span class="p">[</span><span class="s">&#39;checkEMin&#39;</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">reactionDatas</span> <span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">data</span><span class="o">.</span><span class="n">I</span> <span class="o">&lt;</span> <span class="mi">20</span> <span class="p">)</span> <span class="p">:</span>             <span class="c"># 20 is URR probability tables.</span>
                        <span class="k">if</span><span class="p">(</span> <span class="n">data</span><span class="o">.</span><span class="n">columns</span> <span class="o">==</span> <span class="mi">4</span> <span class="p">)</span> <span class="p">:</span>
                            <span class="n">E</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">EMin</span><span class="p">(</span> <span class="p">)</span>
                        <span class="k">else</span> <span class="p">:</span>
                            <span class="n">E</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">xMin</span><span class="p">(</span> <span class="p">)</span>
                        <span class="k">if</span><span class="p">(</span> <span class="n">E</span> <span class="o">&lt;</span> <span class="n">EMinI0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">yi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span><span class="p">,</span> <span class="n">ZA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="n">suffix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">suffix</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> \
                            <span class="n">message</span> <span class="o">=</span> <span class="s">&quot;first E value = </span><span class="si">%e</span><span class="s"> is less than I = 0&#39;s first E value = </span><span class="si">%e</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">E</span><span class="p">,</span> <span class="n">EMinI0</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span>
                        <span class="k">if</span><span class="p">(</span> <span class="n">E</span> <span class="o">&gt;</span> <span class="p">(</span> <span class="n">EMinI0</span> <span class="o">+</span> <span class="n">dThreshold_MeV</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">yi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span><span class="p">,</span> <span class="n">ZA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="n">suffix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">suffix</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> \
                            <span class="n">message</span> <span class="o">=</span> <span class="s">&quot;first E value = </span><span class="si">%e</span><span class="s"> is greater than I = 0&#39;s first E value = </span><span class="si">%e</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">E</span><span class="p">,</span> <span class="n">EMinI0</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span>
            <span class="n">yoCounts</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">yos</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">I0</span><span class="o">.</span><span class="n">C</span> <span class="o">==</span> <span class="mi">15</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">yoCounts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
                <span class="n">yos</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">1</span> <span class="p">]</span>
                <span class="n">yosRes</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">1</span> <span class="p">]</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="n">residualZA</span><span class="p">,</span> <span class="n">yosTuple</span><span class="p">,</span> <span class="n">QDummy</span> <span class="o">=</span> <span class="n">endl2</span><span class="o">.</span><span class="n">residualZA_yos_Q</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">printQWarning</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span> <span class="p">)</span>
                <span class="n">yos</span> <span class="o">+=</span> <span class="n">yosTuple</span>                     <span class="c"># This is done because a list, [], is wanted and not a tuple, ().</span>
                <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">yos</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">yos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="k">if</span><span class="p">(</span> <span class="n">yos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">3</span> <span class="p">)</span> <span class="p">:</span>        <span class="c"># Fission</span>
                            <span class="n">yos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                        <span class="k">elif</span><span class="p">(</span> <span class="n">yos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">4</span> <span class="p">)</span> <span class="p">:</span>      <span class="c"># many yos[1]</span>
                            <span class="n">yos</span> <span class="o">=</span> <span class="p">[</span> <span class="n">yos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">]</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">yos</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="n">yos</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">endl2</span><span class="o">.</span><span class="n">ZAToYo</span><span class="p">(</span> <span class="n">yos</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">)</span>
                <span class="n">yosRes</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span> <span class="n">yos</span> <span class="p">)</span>
                <span class="k">try</span> <span class="p">:</span>
                    <span class="n">iyo</span> <span class="o">=</span> <span class="n">endl2</span><span class="o">.</span><span class="n">ZAToYo</span><span class="p">(</span> <span class="n">residualZA</span> <span class="p">)</span>
                    <span class="n">yosRes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">iyo</span> <span class="p">)</span>
                <span class="k">except</span> <span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">for</span> <span class="n">yo</span> <span class="ow">in</span> <span class="n">yos</span> <span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">yo</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="n">iyo</span> <span class="o">=</span> <span class="n">endl2</span><span class="o">.</span><span class="n">ZAToYo</span><span class="p">(</span> <span class="n">yo</span> <span class="p">)</span>
                        <span class="n">yoCounts</span><span class="p">[</span><span class="n">iyo</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">reactionDatas</span> <span class="p">:</span>
                    <span class="n">yo</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">yo</span>
                    <span class="k">if</span><span class="p">(</span> <span class="mi">9</span> <span class="o">&lt;</span> <span class="n">yo</span> <span class="o">&lt;</span> <span class="mi">20</span> <span class="p">)</span> <span class="p">:</span> <span class="n">yo</span> <span class="o">-=</span> <span class="mi">10</span> 
                    <span class="k">if</span><span class="p">(</span> <span class="n">yo</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="k">continue</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">yo</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">yosRes</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">yo</span> <span class="o">==</span> <span class="mi">7</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="mi">10</span> <span class="o">&lt;</span> <span class="n">C</span> <span class="o">&lt;</span> <span class="mi">50</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">continue</span>
                        <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">yi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span><span class="p">,</span> <span class="n">ZA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="n">suffix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">suffix</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> \
                            <span class="n">message</span> <span class="o">=</span> <span class="s">&quot;yo = </span><span class="si">%d</span><span class="s"> invalid for this reaction&quot;</span> <span class="o">%</span> <span class="n">data</span><span class="o">.</span><span class="n">yo</span> <span class="p">)</span> <span class="p">)</span>
            <span class="n">yosTotal</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">yo</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">yoCounts</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">yosTotal</span> <span class="o">+=</span> <span class="n">yoCounts</span><span class="p">[</span><span class="n">yo</span><span class="p">]</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">yoCounts</span><span class="p">[</span><span class="n">yo</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">yoCounts</span><span class="p">[</span><span class="n">yo</span><span class="p">]</span> <span class="o">=</span> <span class="n">yo</span>            <span class="c"># Now if yo present, set yoCounts[yo] to yo&#39;s ID.</span>
            <span class="k">try</span> <span class="p">:</span>
                <span class="n">iyo</span> <span class="o">=</span> <span class="n">endl2</span><span class="o">.</span><span class="n">ZAToYo</span><span class="p">(</span> <span class="n">residualZA</span> <span class="p">)</span>
                <span class="n">yoCounts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">iyo</span> <span class="o">+</span> <span class="mi">10</span>
            <span class="k">except</span> <span class="p">:</span>
                <span class="n">yoCounts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">reactionDatas</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">data</span><span class="o">.</span><span class="n">yo</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">yosRes</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">data</span><span class="o">.</span><span class="n">yo</span> <span class="o">==</span> <span class="mi">7</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="mi">10</span> <span class="o">&lt;</span> <span class="n">C</span> <span class="o">&lt;</span> <span class="mi">50</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="n">data</span><span class="o">.</span><span class="n">I</span> <span class="o">!=</span> <span class="mi">10</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="n">yoCounts</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mi">7</span>
            <span class="k">for</span> <span class="n">yo</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span> <span class="mi">20</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">datas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findDatas</span><span class="p">(</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">S</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="n">X1</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="n">X2</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span> <span class="p">)</span>
                <span class="n">Is</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">datas</span> <span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">data</span><span class="o">.</span><span class="n">I</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">Is</span> <span class="p">)</span> <span class="p">:</span> <span class="n">Is</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">I</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="n">Is</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">I</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">for</span> <span class="n">I</span> <span class="ow">in</span> <span class="n">Is</span> <span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">Is</span><span class="p">[</span><span class="n">I</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span> 
                        <span class="n">datas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findDatas</span><span class="p">(</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">S</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="n">I</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="n">X1</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="n">X2</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span> <span class="p">)</span>
                        <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">yi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span><span class="p">,</span> <span class="n">ZA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="n">suffix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">suffix</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">datas</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">message</span> <span class="o">=</span> <span class="s">&quot;multiple data found&quot;</span> <span class="p">)</span> <span class="p">)</span>
            <span class="n">totalEnergyDeposition</span> <span class="o">=</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="p">(</span> <span class="p">[]</span> <span class="p">)</span>
            <span class="n">energyDepositionToGammasPresent</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="k">for</span> <span class="n">yo</span> <span class="ow">in</span> <span class="n">yoCounts</span> <span class="p">:</span>                                        <span class="c"># yoCounts[0] is the residual yo if one exists.</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">yo</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">crossSectionsOnly</span> <span class="p">:</span>
                    <span class="n">yoMsg</span> <span class="o">=</span> <span class="bp">None</span>
                    <span class="n">datas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findDatas</span><span class="p">(</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span> <span class="p">),</span> <span class="n">S</span> <span class="o">=</span> <span class="n">S</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="n">X1</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="n">X2</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span> <span class="p">)</span>
                    <span class="n">lenI4</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="n">Is</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">datas</span> <span class="p">:</span>
                        <span class="k">if</span><span class="p">(</span> <span class="n">data</span><span class="o">.</span><span class="n">I</span> <span class="o">==</span> <span class="mi">4</span> <span class="p">)</span> <span class="p">:</span> <span class="n">lenI4</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span> <span class="n">data</span> <span class="p">)</span>
                        <span class="n">Is</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">data</span><span class="o">.</span><span class="n">I</span> <span class="p">)</span>
                    <span class="n">I1present</span> <span class="o">=</span> <span class="mi">1</span> <span class="ow">in</span> <span class="n">Is</span>
                    <span class="n">I3present</span> <span class="o">=</span> <span class="mi">3</span> <span class="ow">in</span> <span class="n">Is</span>
                    <span class="n">I4present</span> <span class="o">=</span> <span class="mi">4</span> <span class="ow">in</span> <span class="n">Is</span>
                    <span class="n">I9present</span> <span class="o">=</span> <span class="mi">9</span> <span class="ow">in</span> <span class="n">Is</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">C</span> <span class="o">==</span> <span class="mi">46</span> <span class="ow">and</span> <span class="n">yo</span> <span class="o">==</span> <span class="mi">7</span> <span class="ow">and</span> <span class="n">I1present</span> <span class="ow">and</span> <span class="p">(</span> <span class="ow">not</span> <span class="n">I3present</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span> <span class="n">I4present</span> <span class="ow">and</span> <span class="n">lenI4</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="n">yoMsg</span> <span class="o">=</span> <span class="s">&#39;missing I = 3 or 4 (l=0) data to go with I = 1 data&#39;</span>
                    <span class="k">elif</span><span class="p">(</span> <span class="n">I3present</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="k">if</span><span class="p">(</span> <span class="ow">not</span> <span class="n">I1present</span> <span class="p">)</span> <span class="p">:</span>
                             <span class="n">yoMsg</span> <span class="o">=</span> <span class="s">&#39;missing I = 1 data to go with I = 3 data&#39;</span>
                        <span class="k">else</span> <span class="p">:</span>
                            <span class="n">I1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findData</span><span class="p">(</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">S</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="n">X1</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="n">X2</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span><span class="p">,</span> <span class="n">ifMultipleReturnFirst</span> <span class="o">=</span> <span class="bp">True</span> <span class="p">)</span>
                            <span class="n">I3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findData</span><span class="p">(</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">S</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="n">X1</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="n">X2</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span><span class="p">,</span> <span class="n">ifMultipleReturnFirst</span> <span class="o">=</span> <span class="bp">True</span> <span class="p">)</span>
                            <span class="n">I1XArray</span> <span class="o">=</span> <span class="n">I1</span><span class="o">.</span><span class="n">xArray</span><span class="p">(</span> <span class="p">)</span>
                            <span class="n">I3TArray</span> <span class="o">=</span> <span class="n">I3</span><span class="o">.</span><span class="n">tArray</span><span class="p">(</span> <span class="p">)</span>
                            <span class="k">if</span><span class="p">(</span> <span class="n">I1XArray</span> <span class="o">!=</span> <span class="n">I3TArray</span> <span class="p">)</span> <span class="p">:</span>
                                <span class="n">yoMsg</span> <span class="o">=</span> <span class="s">&#39;mismatch in I = 1 and I = 3 incident energies&#39;</span>
                            <span class="k">else</span> <span class="p">:</span>
                                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">EmuP1</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="n">I1</span><span class="o">.</span><span class="n">data</span> <span class="p">)</span> <span class="p">:</span>
                                    <span class="n">E1</span><span class="p">,</span> <span class="n">muP1</span> <span class="o">=</span> <span class="n">EmuP1</span>
                                    <span class="n">E3</span><span class="p">,</span> <span class="n">muEpP3</span> <span class="o">=</span> <span class="n">I3</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                                    <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">muP1</span> <span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span> <span class="n">muEpP3</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                                        <span class="n">yoMsg</span> <span class="o">=</span> <span class="s">&#39;mismatch in I = 1 and I = 3 number of mus for E = </span><span class="si">%e</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">E1</span>
                                    <span class="k">else</span> <span class="p">:</span>
                                        <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">muP</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="n">muP1</span> <span class="p">)</span> <span class="p">:</span>
                                            <span class="k">if</span><span class="p">(</span> <span class="n">muP</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">muEpP3</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span>
                                                <span class="n">yoMsg</span> <span class="o">=</span> <span class="s">&#39;mismatch in I = 1 and I = 3 mus for E = </span><span class="si">%e</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">E1</span>
                                                <span class="k">break</span>
                    <span class="k">elif</span><span class="p">(</span> <span class="ow">not</span> <span class="n">I4present</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="n">okay</span> <span class="o">=</span>          <span class="ow">not</span> <span class="p">(</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span>  <span class="o">==</span> <span class="mi">3006</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="n">yo</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="n">C</span> <span class="o">==</span> <span class="mi">22</span> <span class="p">)</span> <span class="p">)</span> <span class="c"># Special case for break up of residual in ENDL</span>
                        <span class="n">okay</span> <span class="o">=</span> <span class="n">okay</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span>  <span class="o">==</span> <span class="mi">6012</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="n">yo</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="n">C</span> <span class="o">==</span> <span class="mi">27</span> <span class="p">)</span> <span class="p">)</span>
                        <span class="k">if</span><span class="p">(</span> <span class="n">I0</span><span class="o">.</span><span class="n">S</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span>
                            <span class="k">if</span><span class="p">(</span> <span class="n">yo</span> <span class="ow">in</span> <span class="n">yos</span> <span class="p">)</span> <span class="p">:</span> <span class="n">okay</span> <span class="o">=</span> <span class="bp">False</span>
                        <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">yosTotal</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="ow">and</span> <span class="n">okay</span> <span class="p">)</span> <span class="p">:</span>               <span class="c"># yosTotal does not count the residual, so 2-body must have yosTotal = 1.</span>
                            <span class="n">yoMsg</span> <span class="o">=</span> <span class="s">&#39;missing I = 3 or 4 data&#39;</span>
                        <span class="k">elif</span><span class="p">(</span> <span class="ow">not</span> <span class="n">I1present</span> <span class="p">)</span> <span class="p">:</span>
                            <span class="n">yoMsg</span> <span class="o">=</span> <span class="s">&#39;missing I = 1 data&#39;</span>
                        <span class="k">else</span> <span class="p">:</span>
                            <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">A</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="p">(</span> <span class="n">I0</span><span class="o">.</span><span class="n">C</span> <span class="o">&lt;</span> <span class="mi">50</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">I0</span><span class="o">.</span><span class="n">C</span> <span class="o">&gt;</span> <span class="mi">59</span> <span class="p">)</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span> <span class="o">!=</span> <span class="n">yo</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> 
                                <span class="n">yoMsg</span> <span class="o">=</span> <span class="s">&#39;natural target cannot have only I = 1 data for this reaction&#39;</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">yoMsg</span> <span class="o">!=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">yi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span><span class="p">,</span> <span class="n">ZA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="n">suffix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">suffix</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">S</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="n">X1</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="n">X2</span><span class="p">,</span> \
                            <span class="n">X3</span> <span class="o">=</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s"> for yo = </span><span class="si">%2d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">yoMsg</span><span class="p">,</span> <span class="n">yo</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">I3present</span> <span class="ow">and</span> <span class="n">I4present</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">yi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span><span class="p">,</span> <span class="n">ZA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="n">suffix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">suffix</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">S</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="n">X1</span><span class="p">,</span> \
                            <span class="n">X2</span> <span class="o">=</span> <span class="n">X2</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="s">&#39;I = 3 and 4 present for yo = </span><span class="si">%2d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">yo</span> <span class="p">)</span> <span class="p">)</span>
                    <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="mi">10</span> <span class="o">&lt;</span> <span class="n">C</span> <span class="o">&lt;</span> <span class="mi">50</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="n">yo</span> <span class="o">==</span> <span class="mi">7</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="ow">not</span> <span class="n">I9present</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">yi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span><span class="p">,</span> <span class="n">ZA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="n">suffix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">suffix</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">S</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="n">X1</span><span class="p">,</span> \
                            <span class="n">X2</span> <span class="o">=</span> <span class="n">X2</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="s">&#39;missing I = 9 data for yo =  7&#39;</span> <span class="p">)</span> <span class="p">)</span>
                        <span class="k">if</span><span class="p">(</span> <span class="ow">not</span> <span class="n">I9present</span> <span class="p">)</span> <span class="p">:</span> <span class="n">yoMsg</span> <span class="o">=</span> <span class="s">&#39;missing I = 9 data&#39;</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">checkForEnDepData</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="k">try</span> <span class="p">:</span>
                            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findData</span><span class="p">(</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">S</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="n">X1</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="n">X2</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span><span class="p">,</span> <span class="n">ifMultipleReturnFirst</span> <span class="o">=</span> <span class="bp">True</span> <span class="p">)</span>
                            <span class="n">totalEnergyDeposition</span> <span class="o">=</span> <span class="n">totalEnergyDeposition</span> <span class="o">+</span> <span class="n">data</span>
                            <span class="k">if</span><span class="p">(</span> <span class="n">yo</span> <span class="o">==</span> <span class="mi">7</span> <span class="p">)</span> <span class="p">:</span> <span class="n">energyDepositionToGammasPresent</span> <span class="o">=</span> <span class="bp">True</span>
                        <span class="k">except</span> <span class="p">:</span>
                            <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">yi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span><span class="p">,</span> <span class="n">ZA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="n">suffix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">suffix</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">S</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="n">X1</span><span class="p">,</span> 
                                <span class="n">X2</span> <span class="o">=</span> <span class="n">X2</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="s">&#39;missing I = 10 for yo = </span><span class="si">%2d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">yo</span> <span class="p">)</span> <span class="p">)</span>
            <span class="n">gammaMultiplicities</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findDatas</span><span class="p">(</span> <span class="n">yo</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">S</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="n">X1</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="n">X2</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span> <span class="p">)</span>
            <span class="k">for</span> <span class="n">gamma</span> <span class="ow">in</span> <span class="n">gammaMultiplicities</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">data</span><span class="o">.</span><span class="n">yMax</span><span class="p">(</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="n">maxGammaMultiplicity</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">yi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span><span class="p">,</span> <span class="n">ZA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="n">suffix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">suffix</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span> 
                    <span class="n">S</span> <span class="o">=</span> <span class="n">S</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="n">X1</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="n">X2</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="s">&#39;large gamma multiplicity = </span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">data</span><span class="o">.</span><span class="n">yMax</span><span class="p">(</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">checkForEnDepData</span> <span class="ow">and</span> <span class="p">(</span> <span class="n">yoCounts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="p">(</span> <span class="n">C</span> <span class="o">&lt;</span> <span class="mi">50</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">C</span> <span class="o">&gt;</span> <span class="mi">57</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">try</span> <span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findData</span><span class="p">(</span> <span class="n">yo</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">S</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="n">X1</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="n">X2</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span><span class="p">,</span> <span class="n">ifMultipleReturnFirst</span> <span class="o">=</span> <span class="bp">True</span> <span class="p">)</span>
                    <span class="n">totalEnergyDeposition</span> <span class="o">=</span> <span class="n">totalEnergyDeposition</span> <span class="o">+</span> <span class="n">data</span>
                <span class="k">except</span> <span class="p">:</span>
                    <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">yi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span><span class="p">,</span> <span class="n">ZA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="n">suffix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">suffix</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">S</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="n">X1</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="n">X2</span><span class="p">,</span> \
                            <span class="n">X3</span> <span class="o">=</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="s">&#39;missing I = 11 for yo = </span><span class="si">%2d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">yo</span> <span class="p">)</span> <span class="p">)</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">checkForEnDepData</span> <span class="ow">and</span> <span class="p">(</span> <span class="p">(</span> <span class="n">C</span> <span class="o">&lt;</span> <span class="mi">50</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">C</span> <span class="o">&gt;</span> <span class="mi">57</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="nb">type</span><span class="p">(</span> <span class="n">energyDepedentQ</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="n">energyDepedentQ</span> <span class="o">=</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="p">(</span> <span class="p">[</span> <span class="p">[</span> <span class="n">I0</span><span class="o">.</span><span class="n">xMin</span><span class="p">(</span> <span class="p">),</span> <span class="n">Q</span> <span class="p">],</span> <span class="p">[</span> <span class="n">I0</span><span class="o">.</span><span class="n">xMax</span><span class="p">(</span> <span class="p">),</span> <span class="n">Q</span> <span class="p">]</span> <span class="p">]</span> <span class="p">)</span>
                <span class="n">incidentEnergy</span> <span class="o">=</span> <span class="n">endl2dmathClasses</span><span class="o">.</span><span class="n">endl2dmath</span><span class="p">(</span> <span class="p">[</span> <span class="p">[</span> <span class="n">I0</span><span class="o">.</span><span class="n">xMin</span><span class="p">(</span> <span class="p">),</span> <span class="n">I0</span><span class="o">.</span><span class="n">xMin</span><span class="p">(</span> <span class="p">)</span> <span class="p">],</span> <span class="p">[</span> <span class="n">I0</span><span class="o">.</span><span class="n">xMax</span><span class="p">(</span> <span class="p">),</span> <span class="n">I0</span><span class="o">.</span><span class="n">xMax</span><span class="p">(</span> <span class="p">)</span> <span class="p">]</span> <span class="p">]</span> <span class="p">)</span>
                <span class="n">dELevels</span> <span class="o">=</span> <span class="mf">0.</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">S</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">C</span> <span class="ow">in</span> <span class="p">[</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">45</span> <span class="p">]</span> <span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">energyDepositionToGammasPresent</span> <span class="p">)</span> <span class="p">:</span> <span class="n">dELevels</span> <span class="o">-=</span> <span class="n">I0</span><span class="o">.</span><span class="n">getX1</span><span class="p">(</span> <span class="p">)</span>
                <span class="n">dE</span> <span class="o">=</span> <span class="n">totalEnergyDeposition</span> <span class="o">-</span> <span class="p">(</span> <span class="n">incidentEnergy</span> <span class="o">+</span> <span class="n">energyDepedentQ</span> <span class="o">+</span> <span class="n">dELevels</span> <span class="p">)</span>
<span class="c"># I0.getELevel( )</span>
                <span class="n">dEMax</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span> <span class="n">checkListKeys</span><span class="p">[</span><span class="s">&#39;energyBalance&#39;</span><span class="p">]</span> <span class="p">)</span>
                <span class="n">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
                <span class="k">for</span> <span class="n">E</span><span class="p">,</span> <span class="n">deltaE</span> <span class="ow">in</span> <span class="n">dE</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>
                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span><span class="p">(</span> <span class="nb">abs</span><span class="p">(</span> <span class="n">deltaE</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="n">dEMax</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="p">(</span> <span class="n">yi</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ZA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="n">suffix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">suffix</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">S</span><span class="p">,</span> \
                        <span class="n">X1</span> <span class="o">=</span> <span class="n">X1</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="n">X2</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="s">&#39;energy balance issue at E(</span><span class="si">%6d</span><span class="s">) = </span><span class="si">%e</span><span class="s"> (dE = </span><span class="si">%e</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">i</span><span class="p">,</span> <span class="n">E</span><span class="p">,</span> <span class="n">deltaE</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span>
        <span class="n">ErrMsgs</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span> <span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">sortOrder</span> <span class="o">=</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="o">.</span><span class="n">sortOrder</span>
        <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="o">.</span><span class="n">sortOrder</span> <span class="o">=</span> <span class="p">[</span> <span class="s">&#39;database&#39;</span><span class="p">,</span> <span class="s">&#39;yi&#39;</span><span class="p">,</span> <span class="s">&#39;ZA&#39;</span><span class="p">,</span> <span class="s">&#39;suffix&#39;</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="s">&#39;S&#39;</span><span class="p">,</span> <span class="s">&#39;X1&#39;</span><span class="p">,</span> <span class="s">&#39;yo&#39;</span><span class="p">,</span> <span class="s">&#39;Q&#39;</span><span class="p">,</span> <span class="s">&#39;I&#39;</span><span class="p">,</span> <span class="s">&#39;X2&#39;</span><span class="p">,</span> <span class="s">&#39;X3&#39;</span><span class="p">,</span> <span class="s">&#39;X4&#39;</span> <span class="p">]</span>
        <span class="k">while</span><span class="p">(</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">ErrMsgs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">ErrMsgs</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="nb">type</span><span class="p">(</span> <span class="n">ErrMsgs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">message</span> <span class="p">)</span> <span class="o">!=</span> <span class="nb">type</span><span class="p">(</span> <span class="p">[]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ErrMsgs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="p">[</span> <span class="n">ErrMsgs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">message</span> <span class="p">]</span>
                <span class="k">if</span><span class="p">(</span> <span class="nb">type</span><span class="p">(</span> <span class="n">ErrMsgs</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">message</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span> <span class="p">[]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="n">ErrMsgs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">message</span> <span class="o">+=</span> <span class="n">ErrMsgs</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">message</span>
                <span class="k">else</span> <span class="p">:</span>
                    <span class="n">ErrMsgs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">ErrMsgs</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">message</span> <span class="p">)</span>
                <span class="k">del</span> <span class="n">ErrMsgs</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">endlmisc</span><span class="o">.</span><span class="n">endlCheckerObject</span><span class="o">.</span><span class="n">sortOrder</span> <span class="o">=</span> <span class="n">sortOrder</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">ErrMsgs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.clean"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.clean">[docs]</a>    <span class="k">def</span> <span class="nf">clean</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Removes all I=10 and I=11 data files from self.&quot;</span>

        <span class="n">r</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span> <span class="p">)</span> <span class="p">)</span>
        <span class="n">r</span><span class="o">.</span><span class="n">reverse</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">r</span> <span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">I</span> <span class="o">==</span> <span class="mi">10</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">I</span> <span class="o">==</span> <span class="mi">11</span> <span class="p">)</span> <span class="p">:</span> <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="endlZA.CList"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.CList">[docs]</a>    <span class="k">def</span> <span class="nf">CList</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Returns the list of sorted C-values for self.&quot;</span>

        <span class="n">cl</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">C</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">cl</span> <span class="p">)</span> <span class="p">:</span> <span class="n">cl</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">C</span> <span class="p">)</span>
        <span class="n">cl</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">cl</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.convertS7ForOldProcessing"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.convertS7ForOldProcessing">[docs]</a>    <span class="k">def</span> <span class="nf">convertS7ForOldProcessing</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;This method removes all S = 7, fission delayed nuclear data, data except I = 7 data </span>
<span class="sd">    and collapses the I = 7 data to a single data set, since ndfgen cannot handle non I = 7, </span>
<span class="sd">    S = 7 data and can only handle a single I = 7, S = 7 data set.&quot;&quot;&quot;</span>

        <span class="n">delayedFileList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">(</span> <span class="n">C</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="mi">7</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">delayedFile</span> <span class="ow">in</span> <span class="n">delayedFileList</span> <span class="p">:</span> 
            <span class="k">if</span><span class="p">(</span> <span class="n">delayedFile</span><span class="o">.</span><span class="n">I</span> <span class="o">!=</span> <span class="mi">7</span> <span class="p">)</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">removeFile</span><span class="p">(</span> <span class="n">delayedFile</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="n">delayedFile</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">delayedFile</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="n">delayedFile</span><span class="o">.</span><span class="n">S</span> <span class="p">)</span>
        <span class="n">delayedFileList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">(</span> <span class="n">C</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">7</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">delayedFileList</span> <span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">delayedFile</span> <span class="o">=</span> <span class="n">delayedFileList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">delayedFile</span><span class="o">.</span><span class="n">levels</span> <span class="o">==</span> <span class="p">[]</span> <span class="p">)</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">(</span> <span class="n">C</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">7</span> <span class="p">)</span>
            <span class="n">datas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findDatas</span><span class="p">(</span> <span class="n">C</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">7</span> <span class="p">)</span>
            <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">datas</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">firstData</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">datas</span> <span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">firstData</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="n">delayedData</span> <span class="o">=</span> <span class="n">data</span>
                        <span class="n">firstData</span> <span class="o">=</span> <span class="bp">False</span>
                    <span class="k">else</span> <span class="p">:</span>
                        <span class="n">delayedData</span> <span class="o">=</span> <span class="n">delayedData</span> <span class="o">+</span> <span class="n">data</span>
                        <span class="n">delayedFile</span><span class="o">.</span><span class="n">unreadData</span><span class="p">(</span> <span class="n">X1</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">X1</span> <span class="p">)</span>
                <span class="n">datas</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span> <span class="n">delayedData</span> <span class="p">)</span>
                <span class="n">datas</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">setX1</span><span class="p">(</span> <span class="mf">0.</span> <span class="p">)</span>
        <span class="k">elif</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">delayedFileList</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Error in endlZA.convertS7ForOldProcessing: multiple I = 7, S = 7 data files.&quot;</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.convertI4ForOldProcessing"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.convertI4ForOldProcessing">[docs]</a>    <span class="k">def</span> <span class="nf">convertI4ForOldProcessing</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">nMu</span> <span class="o">=</span> <span class="mi">21</span><span class="p">,</span> <span class="n">lMax</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">skipIf_deuteron_S8</span> <span class="o">=</span> <span class="bp">True</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;This method finds all I = 4 data with Legendre order greater than 0 in self and converts</span>
<span class="sd">    it into I = 1 and 3 data so the mcfgen can process it.  See method convertToUI3 in class</span>
<span class="sd">    endlI4 for meaning of nMu and lMax.  If skipIf_deuteron_S8 is true, than for ZA == 1002 the</span>
<span class="sd">    S = 8 data is not converted as mcfgen was designed to ignore this data in ENDL94 and its</span>
<span class="sd">    descendent data sets.&quot;&quot;&quot;</span>

        <span class="n">I4s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findDatas</span><span class="p">(</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">4</span> <span class="p">)</span>
        <span class="n">I4sToRemove</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">I4</span> <span class="ow">in</span> <span class="n">I4s</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">skipIf_deuteron_S8</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span> <span class="o">==</span> <span class="mi">1002</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="n">I4</span><span class="o">.</span><span class="n">S</span> <span class="o">==</span> <span class="mi">8</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">continue</span>
            <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">I4</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span> <span class="n">fudgeParameters</span><span class="o">.</span><span class="n">VerboseMode</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&#39;converting yo = </span><span class="si">%2d</span><span class="s">, C = </span><span class="si">%2d</span><span class="s">, S = </span><span class="si">%3d</span><span class="s"> to I = 1 and 3&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">I4</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="n">I4</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">I4</span><span class="o">.</span><span class="n">S</span> <span class="p">)</span>
                <span class="n">I3</span> <span class="o">=</span> <span class="n">I4</span><span class="o">.</span><span class="n">convertToUI3</span><span class="p">(</span> <span class="n">nMu</span> <span class="o">=</span> <span class="n">nMu</span><span class="p">,</span> <span class="n">lMax</span> <span class="o">=</span> <span class="n">lMax</span> <span class="p">)</span>
                <span class="n">I1</span> <span class="o">=</span> <span class="n">I3</span><span class="o">.</span><span class="n">reduceToEMuP</span><span class="p">(</span> <span class="n">normalize</span> <span class="o">=</span> <span class="bp">True</span> <span class="p">)</span>
                <span class="n">I3</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span> <span class="p">)</span>

                <span class="n">I3File</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findFile</span><span class="p">(</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">I4</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">I4</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">I4</span><span class="o">.</span><span class="n">S</span> <span class="p">)</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">I3File</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">I3File</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addFile</span><span class="p">(</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">I4</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">I4</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">I4</span><span class="o">.</span><span class="n">S</span> <span class="p">)</span>
                <span class="n">I3File</span><span class="o">.</span><span class="n">addEndlData</span><span class="p">(</span> <span class="n">I3</span> <span class="p">)</span>

                <span class="n">I1File</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findFile</span><span class="p">(</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">I4</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">I4</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">I4</span><span class="o">.</span><span class="n">S</span> <span class="p">)</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">I1File</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">I1File</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addFile</span><span class="p">(</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">I4</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">I4</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">I4</span><span class="o">.</span><span class="n">S</span> <span class="p">)</span>
                <span class="n">I1File</span><span class="o">.</span><span class="n">addEndlData</span><span class="p">(</span> <span class="n">I1</span> <span class="p">)</span>

                <span class="n">yoCIS</span> <span class="o">=</span> <span class="p">[</span> <span class="n">I4</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="n">I4</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">I4</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="n">I4</span><span class="o">.</span><span class="n">S</span> <span class="p">]</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">yoCIS</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">I4sToRemove</span> <span class="p">)</span> <span class="p">:</span> <span class="n">I4sToRemove</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">yoCIS</span> <span class="p">)</span>

        <span class="k">for</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span> <span class="ow">in</span> <span class="n">I4sToRemove</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">removeFile</span><span class="p">(</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.SListForC"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.SListForC">[docs]</a>    <span class="k">def</span> <span class="nf">SListForC</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">C</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Returns the list of S-values for C-value of self.&quot;</span>

        <span class="n">sl</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">C</span> <span class="o">==</span> <span class="n">C</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">S</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sl</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="n">sl</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">S</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">sl</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.cs"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.cs">[docs]</a>    <span class="k">def</span> <span class="nf">cs</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls findData( 0, C, 0, S, X1, X2, X3, X4, Q ) and returns the item. Deprecated method, will not be in version 4.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">findData</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">X1</span><span class="p">,</span> <span class="n">X2</span><span class="p">,</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.file"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.file">[docs]</a>    <span class="k">def</span> <span class="nf">file</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Deprecated method, use findFile instead. This method will not be in version 4.&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">findFile</span><span class="p">(</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">S</span> <span class="p">)</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.findFile"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.findFile">[docs]</a>    <span class="k">def</span> <span class="nf">findFile</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns reference to file matching yo, C, I and S. If no file matches, None is returned. If multiple</span>
<span class="sd">        files match, an FUDGE_Exception is raised.&quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findFiles</span><span class="p">(</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span> <span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span> <span class="n">a</span> <span class="o">==</span> <span class="p">[]</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span><span class="p">(</span> <span class="bp">None</span> <span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">a</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&quot;  yo   C   I   S&quot;</span> <span class="p">)</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">a</span> <span class="p">:</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&quot; </span><span class="si">%3d</span><span class="s"> </span><span class="si">%3d</span><span class="s"> </span><span class="si">%3d</span><span class="s"> </span><span class="si">%3d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">f</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">S</span> <span class="p">)</span> <span class="p">)</span>
            <span class="k">raise</span> <span class="n">fudgeExceptions</span><span class="o">.</span><span class="n">FUDGE_Exception</span><span class="p">(</span> <span class="s">&quot;Error in endlZA.file: multiple files found (see &#39;yo   C   I   S&#39; list above)&quot;</span> <span class="p">)</span>
        <span class="k">return</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="endlZA.files"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.files">[docs]</a>    <span class="k">def</span> <span class="nf">files</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Deprecated method, use findFiles instead. This method will not be in version 4.&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">findFiles</span><span class="p">(</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">S</span> <span class="p">)</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.findFiles"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.findFiles">[docs]</a>    <span class="k">def</span> <span class="nf">findFiles</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of files matching yo, C, I and S&quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span> <span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span> <span class="n">f</span><span class="o">.</span><span class="n">IsyoCIS</span><span class="p">(</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">f</span> <span class="p">)</span>
        <span class="k">return</span> <span class="n">a</span>
</div>
<div class="viewcode-block" id="endlZA.findItems"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.findItems">[docs]</a>    <span class="k">def</span> <span class="nf">findItems</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Deprecated method, use findDatas instead. This method will not be in version 4.&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">findDatas</span><span class="p">(</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">S</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="n">X1</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="n">X2</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span> <span class="p">)</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.findDatas"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.findDatas">[docs]</a>    <span class="k">def</span> <span class="nf">findDatas</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of items matching yo, C, I, S, X1, X2, X3, X4 and Q.  yo, C, I and S</span>
<span class="sd">        can be a list of integers (e.g., findDatas( C = [ 10, 11 ] ). The value None means to match all.&quot;&quot;&quot;</span>

        <span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span> <span class="p">:</span> 
            <span class="k">if</span> <span class="p">(</span> <span class="n">f</span><span class="o">.</span><span class="n">IsyoCIS</span><span class="p">(</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span> <span class="n">f</span><span class="o">.</span><span class="n">levels</span> <span class="o">==</span> <span class="p">[]</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Error in endlZA.findDatas: one or more data files not read&quot;</span> <span class="p">)</span>
                <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">levels</span> <span class="p">:</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="p">(</span> <span class="n">X1</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">X1</span> <span class="o">==</span> <span class="n">l</span><span class="o">.</span><span class="n">X1</span> <span class="p">)</span> <span class="p">)</span> <span class="ow">and</span>
                         <span class="p">(</span> <span class="p">(</span> <span class="n">X2</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">X2</span> <span class="o">==</span> <span class="n">l</span><span class="o">.</span><span class="n">X2</span> <span class="p">)</span> <span class="p">)</span> <span class="ow">and</span>
                         <span class="p">(</span> <span class="p">(</span> <span class="n">X3</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">X3</span> <span class="o">==</span> <span class="n">l</span><span class="o">.</span><span class="n">X3</span> <span class="p">)</span> <span class="p">)</span> <span class="ow">and</span>
                         <span class="p">(</span> <span class="p">(</span> <span class="n">X4</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">X4</span> <span class="o">==</span> <span class="n">l</span><span class="o">.</span><span class="n">X4</span> <span class="p">)</span> <span class="p">)</span> <span class="ow">and</span>
                         <span class="p">(</span> <span class="p">(</span> <span class="n">Q</span>  <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">Q</span>  <span class="o">==</span> <span class="n">l</span><span class="o">.</span><span class="n">Q</span>  <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">l</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">items</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.findItem"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.findItem">[docs]</a>    <span class="k">def</span> <span class="nf">findItem</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Deprecated method, use findData instead. This method will not be in version 4.&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">findData</span><span class="p">(</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">S</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="n">X1</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="n">X2</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span> <span class="p">)</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.findData"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.findData">[docs]</a>    <span class="k">def</span> <span class="nf">findData</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">ifMultipleReturnFirst</span> <span class="o">=</span> <span class="bp">False</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns a single item matching yo, C, I, S, X1, X2, X3, X4 and Q.&quot;&quot;&quot;</span>

        <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findDatas</span><span class="p">(</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">X1</span><span class="p">,</span> <span class="n">X2</span><span class="p">,</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span> <span class="n">f</span> <span class="o">==</span> <span class="p">[]</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Error in endlZA.findData: no match for (yo, C, I, S, X1, X2, X3, X4, Q) = (</span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">)&quot;</span> <span class="o">%</span> \
                <span class="p">(</span> <span class="sb">`yo`</span><span class="p">,</span> <span class="sb">`C`</span><span class="p">,</span> <span class="sb">`I`</span><span class="p">,</span> <span class="sb">`S`</span><span class="p">,</span> <span class="sb">`X1`</span><span class="p">,</span> <span class="sb">`X2`</span><span class="p">,</span> <span class="sb">`X3`</span><span class="p">,</span> <span class="sb">`X4`</span><span class="p">,</span> <span class="sb">`Q`</span> <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span> <span class="n">s</span> <span class="p">)</span>
        <span class="k">elif</span> <span class="p">(</span> <span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">f</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="ow">not</span> <span class="n">ifMultipleReturnFirst</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;The following values missing &quot;</span>
            <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">List of (yo, C, I, S, X1, X2, X3, X4, Q) values&quot;</span>
            <span class="k">print</span> <span class="s">&quot;     yo   C    I   S         X1             X2             X3             X4             Q&quot;</span>
            <span class="n">missing</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">]</span>
            <span class="n">q_0</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">f</span> <span class="p">:</span> 
                <span class="n">missing</span> <span class="o">=</span> <span class="p">[</span> <span class="n">missing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">q_0</span><span class="o">.</span><span class="n">yo</span> <span class="o">!=</span> <span class="n">q</span><span class="o">.</span><span class="n">yo</span> <span class="p">),</span> <span class="n">missing</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">q_0</span><span class="o">.</span><span class="n">C</span> <span class="o">!=</span> <span class="n">q</span><span class="o">.</span><span class="n">C</span> <span class="p">),</span> 
                    <span class="n">missing</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">q_0</span><span class="o">.</span><span class="n">I</span> <span class="o">!=</span> <span class="n">q</span><span class="o">.</span><span class="n">I</span> <span class="p">),</span> <span class="n">missing</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">q_0</span><span class="o">.</span><span class="n">S</span> <span class="o">!=</span> <span class="n">q</span><span class="o">.</span><span class="n">S</span> <span class="p">),</span> <span class="n">missing</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">q_0</span><span class="o">.</span><span class="n">X1</span> <span class="o">!=</span> <span class="n">q</span><span class="o">.</span><span class="n">X1</span> <span class="p">),</span>
                    <span class="n">missing</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">q_0</span><span class="o">.</span><span class="n">X2</span> <span class="o">!=</span> <span class="n">q</span><span class="o">.</span><span class="n">X2</span> <span class="p">),</span> <span class="n">missing</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">q_0</span><span class="o">.</span><span class="n">X3</span> <span class="o">!=</span> <span class="n">q</span><span class="o">.</span><span class="n">X3</span> <span class="p">),</span> <span class="n">missing</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">q_0</span><span class="o">.</span><span class="n">X4</span> <span class="o">!=</span> <span class="n">q</span><span class="o">.</span><span class="n">X4</span> <span class="p">),</span>
                    <span class="n">missing</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">q_0</span><span class="o">.</span><span class="n">Q</span> <span class="o">!=</span> <span class="n">q</span><span class="o">.</span><span class="n">Q</span> <span class="p">)</span> <span class="p">]</span>
                <span class="k">print</span> <span class="s">&quot;    (</span><span class="si">%2d</span><span class="s">, </span><span class="si">%2d</span><span class="s">, </span><span class="si">%3d</span><span class="s">, </span><span class="si">%2d</span><span class="s">, </span><span class="si">%14.6e</span><span class="s"> </span><span class="si">%14.6e</span><span class="s"> </span><span class="si">%14.6e</span><span class="s"> </span><span class="si">%14.6e</span><span class="s"> </span><span class="si">%14.6e</span><span class="s">)&quot;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">q</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="n">q</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">q</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="n">q</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="n">q</span><span class="o">.</span><span class="n">X1</span><span class="p">,</span> <span class="n">q</span><span class="o">.</span><span class="n">X2</span><span class="p">,</span> <span class="n">q</span><span class="o">.</span><span class="n">X3</span><span class="p">,</span> <span class="n">q</span><span class="o">.</span><span class="n">X4</span><span class="p">,</span> <span class="n">q</span><span class="o">.</span><span class="n">Q</span> <span class="p">)</span>
            <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Values not specified are -&quot;</span><span class="p">,</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">yo</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;yo -&quot;</span><span class="p">,</span>
            <span class="k">if</span><span class="p">(</span>  <span class="n">C</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;C -&quot;</span><span class="p">,</span>
            <span class="k">if</span><span class="p">(</span>  <span class="n">I</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;I -&quot;</span><span class="p">,</span>
            <span class="k">if</span><span class="p">(</span>  <span class="n">S</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;S -&quot;</span><span class="p">,</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">X1</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;X1 -&quot;</span><span class="p">,</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">X2</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;X2 -&quot;</span><span class="p">,</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">X3</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;X3 -&quot;</span><span class="p">,</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">X4</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;X4 -&quot;</span><span class="p">,</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">Q</span>  <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;Q -&quot;</span><span class="p">,</span>
            <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Additional values required are -&quot;</span><span class="p">,</span> 
            <span class="k">if</span><span class="p">(</span> <span class="n">missing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;yo -&quot;</span><span class="p">,</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">missing</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;C -&quot;</span><span class="p">,</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">missing</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;I -&quot;</span><span class="p">,</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">missing</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;S -&quot;</span><span class="p">,</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">missing</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;X1 -&quot;</span><span class="p">,</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">missing</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;X2 -&quot;</span><span class="p">,</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">missing</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;X3 -&quot;</span><span class="p">,</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">missing</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;X4 -&quot;</span><span class="p">,</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">missing</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;Q -&quot;</span><span class="p">,</span>
            <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Error in endlZA.findData: multiple objects found matching (yo, C, I, S, X1, X2, X3, X4, Q) (see above Traceback)&quot;</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.findReactionsDatas"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.findReactionsDatas">[docs]</a>    <span class="k">def</span> <span class="nf">findReactionsDatas</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of reactionDatas for each reaction in self where reactionDatas is a list of</span>
<span class="sd">        all data for a reaction.&quot;&quot;&quot;</span>

        <span class="n">reactionsDatas</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">reactions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reactionList</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">reaction</span> <span class="ow">in</span> <span class="n">reactions</span> <span class="p">:</span>
            <span class="n">datas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findDatas</span><span class="p">(</span> <span class="n">C</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">X1</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">X2</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">Q</span> <span class="p">)</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">datas</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">C</span> <span class="o">==</span> <span class="mi">15</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">datas</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findDatas</span><span class="p">(</span> <span class="n">C</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">X2</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">Q</span> <span class="p">)</span>
            <span class="n">Is</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">datas</span> <span class="p">:</span> <span class="n">Is</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">data</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="n">data</span> <span class="p">]</span> <span class="p">)</span>
            <span class="n">Is</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span> <span class="p">)</span>
            <span class="n">datas</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">yo</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">Is</span> <span class="p">:</span> <span class="n">datas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">data</span> <span class="p">)</span>
            <span class="n">reactionsDatas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">datas</span> <span class="p">)</span>

        <span class="k">return</span><span class="p">(</span> <span class="n">reactionsDatas</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.fixHeaders"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.fixHeaders">[docs]</a>    <span class="k">def</span> <span class="nf">fixHeaders</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">yi</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">ZA</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">ELevel</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">temperature</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">dTemperatureEps</span> <span class="o">=</span> <span class="mf">1e-4</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;This method makes the headers for all the data in self be consistent (e.g., makes all the</span>
<span class="sd">        temperatures the same). Items the are made consistent are ZA, yi, mass, ELevel, halflife, temperature</span>
<span class="sd">        amoung all the data and yo, C, I and S within a file. yi, ZA, ELevel and temperature can be inputted.</span>
<span class="sd">        For input parameters of None, the C = 10, I = 0 file values are used. If this file does not exist,</span>
<span class="sd">        a raise is executed, Mass and halflife are retrieved from the bdfls file.&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">getAnyData</span><span class="p">(</span> <span class="n">anyData</span> <span class="p">)</span> <span class="p">:</span>
            <span class="sd">&quot;&quot;&quot;Attempts to find a dataset that is complete enough to determine. If one is not found a raise is executed.&quot;&quot;&quot;</span>

            <span class="k">if</span><span class="p">(</span> <span class="n">anyData</span> <span class="o">!=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span><span class="p">(</span> <span class="n">anyData</span> <span class="p">)</span>
            <span class="n">anyDatas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findDatas</span><span class="p">(</span> <span class="p">)</span>
            <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">anyDatas</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span><span class="p">(</span> <span class="n">anyDatas</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
            <span class="k">raise</span> <span class="n">fudgeExceptions</span><span class="o">.</span><span class="n">ENDL_fixHeadersException_NoC10Data</span><span class="p">(</span> <span class="s">&#39;No dataset is complete enough for determining required information.&#39;</span> <span class="p">)</span>

        <span class="n">anyData</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">readIfNotRead</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">yi</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>  <span class="n">ZA</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">ELevel</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">temperature</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">anyData</span> <span class="o">=</span> <span class="n">getAnyData</span><span class="p">(</span> <span class="n">anyData</span> <span class="p">)</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">yi</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">yi</span> <span class="o">=</span> <span class="n">anyData</span><span class="o">.</span><span class="n">getYi</span><span class="p">(</span> <span class="p">)</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">ZA</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ZA</span> <span class="o">=</span> <span class="n">anyData</span><span class="o">.</span><span class="n">getZA</span><span class="p">(</span> <span class="p">)</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">ELevel</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">ELevel</span> <span class="o">=</span> <span class="n">anyData</span><span class="o">.</span><span class="n">getELevel</span><span class="p">(</span> <span class="p">)</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">temperature</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">temperature</span> <span class="o">=</span> <span class="n">anyData</span><span class="o">.</span><span class="n">getTemperature</span><span class="p">(</span> <span class="p">)</span>
        <span class="n">mass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span><span class="o">.</span><span class="n">mass</span><span class="p">(</span> <span class="n">ZA</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">mass</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">anyData</span> <span class="o">=</span> <span class="n">getAnyData</span><span class="p">(</span> <span class="n">anyData</span> <span class="p">)</span>
            <span class="n">mass</span> <span class="o">=</span> <span class="n">anyData</span><span class="o">.</span><span class="n">getMass</span><span class="p">(</span> <span class="p">)</span>
        <span class="n">halflife</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span><span class="o">.</span><span class="n">halflife</span><span class="p">(</span> <span class="n">ZA</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">halflife</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
            <span class="k">try</span> <span class="p">:</span>
                <span class="n">anyData</span> <span class="o">=</span> <span class="n">getAnyData</span><span class="p">(</span> <span class="n">anyData</span> <span class="p">)</span>
                <span class="n">halflife</span> <span class="o">=</span> <span class="n">anyData</span><span class="o">.</span><span class="n">getHalflife</span><span class="p">(</span> <span class="p">)</span>
            <span class="k">except</span> <span class="p">:</span>
                <span class="n">halflife</span> <span class="o">=</span> <span class="mf">0.</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">AFromZA</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span> <span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">halflife</span> <span class="o">=</span> <span class="mf">1e50</span>
        <span class="n">datas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findDatas</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">datas</span> <span class="p">:</span>
            <span class="n">data</span><span class="o">.</span><span class="n">setMass</span><span class="p">(</span> <span class="n">mass</span> <span class="p">)</span>
            <span class="n">data</span><span class="o">.</span><span class="n">setELevel</span><span class="p">(</span> <span class="n">ELevel</span> <span class="p">)</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">halflife</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">halflife</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">getHalflife</span><span class="p">(</span> <span class="p">)</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="n">data</span><span class="o">.</span><span class="n">setHalflife</span><span class="p">(</span> <span class="n">halflife</span> <span class="p">)</span>
            <span class="n">data</span><span class="o">.</span><span class="n">setTemperature</span><span class="p">(</span> <span class="n">temperature</span> <span class="p">)</span>
        <span class="n">files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findFiles</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">files</span> <span class="p">:</span> <span class="nb">file</span><span class="o">.</span><span class="n">setYiZAYoCISs</span><span class="p">(</span> <span class="n">yi</span> <span class="o">=</span> <span class="n">yi</span><span class="p">,</span> <span class="n">ZA</span> <span class="o">=</span> <span class="n">ZA</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.fixupReactions"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.fixupReactions">[docs]</a>    <span class="k">def</span> <span class="nf">fixupReactions</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">fixReactions</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">fixReactionsEps</span> <span class="o">=</span> <span class="mf">1e-3</span><span class="p">,</span> <span class="n">fixReactionsQuery</span> <span class="o">=</span> <span class="bp">True</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;If the parameter fixReactions is one (or a list containing one or more) of the following </span>
<span class="sd">        &#39;Q&#39;, &#39;X1, &#39;X2, &#39;X3&#39; or &#39;X4&#39;, this method will try to find data sets which are not considered </span>
<span class="sd">        to be for the same reaction due to slightly different value(s) in the members as given by </span>
<span class="sd">        fixReactions, but are within fixReactionsEps (e.g., fixReactions = [&#39;Q&#39;, &#39;X1&#39;]). If </span>
<span class="sd">        fixReactionsQuery is true, you will be asked for your option on reaction parameters that </span>
<span class="sd">        this method deems the same.&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">compareValue</span><span class="p">(</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">doIt</span><span class="p">,</span> <span class="n">eps</span> <span class="p">)</span> <span class="p">:</span>
            <span class="sd">&quot;&quot;&quot;For internal use only.&quot;&quot;&quot;</span>

            <span class="k">if</span><span class="p">(</span> <span class="n">doIt</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">theSame</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span> <span class="n">v2</span> <span class="o">-</span> <span class="n">v1</span> <span class="p">)</span> <span class="o">&lt;=</span> <span class="p">(</span> <span class="nb">abs</span><span class="p">(</span> <span class="n">v1</span> <span class="p">)</span> <span class="o">+</span> <span class="nb">abs</span><span class="p">(</span> <span class="n">v2</span> <span class="p">)</span> <span class="p">)</span> <span class="o">*</span> <span class="n">eps</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="n">theSame</span> <span class="o">=</span> <span class="n">v1</span> <span class="o">==</span> <span class="n">v2</span>
            <span class="k">return</span><span class="p">(</span> <span class="n">theSame</span> <span class="p">)</span>

        <span class="k">if</span><span class="p">(</span> <span class="n">fixReactions</span> <span class="o">!=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">doIt</span> <span class="o">=</span> <span class="mi">7</span> <span class="o">*</span> <span class="p">[</span> <span class="bp">False</span> <span class="p">]</span>
            <span class="n">doIts</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&#39;X1&#39;</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">&#39;X2&#39;</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">&#39;X3&#39;</span> <span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s">&#39;X4&#39;</span> <span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s">&#39;Q&#39;</span> <span class="p">:</span> <span class="mi">6</span> <span class="p">}</span>
            <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">fixReactions</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">r</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span> <span class="s">&#39;Q&#39;</span><span class="p">,</span> <span class="s">&#39;X1&#39;</span><span class="p">,</span> <span class="s">&#39;X2&#39;</span><span class="p">,</span> <span class="s">&#39;X3&#39;</span><span class="p">,</span> <span class="s">&#39;X4&#39;</span> <span class="p">]</span> <span class="p">)</span> <span class="p">:</span> 
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">Error endlZA.fixupReactions: </span><span class="si">%s</span><span class="s"> not a valid fixReactions option&#39;</span> <span class="o">%</span> <span class="n">r</span> <span class="p">)</span>
                <span class="n">doIt</span><span class="p">[</span><span class="n">doIts</span><span class="p">[</span><span class="n">r</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">reactions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reactionList</span><span class="p">(</span> <span class="p">)</span>
            <span class="n">COld</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="n">oldIndex</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span> <span class="n">reactions</span> <span class="p">)</span>
            <span class="k">for</span> <span class="n">reaction</span> <span class="ow">in</span> <span class="n">reactions</span> <span class="p">:</span>
                <span class="n">oldIndex</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">oldIndex</span>
                <span class="k">while</span><span class="p">(</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="n">nextReaction</span> <span class="o">=</span> <span class="n">reactions</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
                    <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">nextReaction</span><span class="o">.</span><span class="n">C</span> <span class="o">==</span> <span class="n">reaction</span><span class="o">.</span><span class="n">C</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="n">nextReaction</span><span class="o">.</span><span class="n">S</span> <span class="o">==</span> <span class="n">reaction</span><span class="o">.</span><span class="n">S</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="c"># Same C and S.</span>
                        <span class="n">theSame</span> <span class="o">=</span> <span class="bp">True</span>
                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span> <span class="s">&#39;X1&#39;</span><span class="p">,</span> <span class="s">&#39;X2&#39;</span><span class="p">,</span> <span class="s">&#39;X3&#39;</span><span class="p">,</span> <span class="s">&#39;X4&#39;</span><span class="p">,</span> <span class="s">&#39;Q&#39;</span> <span class="p">]:</span>
                            <span class="n">theSame</span> <span class="o">=</span> <span class="n">theSame</span> <span class="ow">and</span> <span class="n">compareValue</span><span class="p">(</span> <span class="n">reaction</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">nextReaction</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">doIt</span><span class="p">[</span><span class="n">doIts</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">fixReactionsEps</span> <span class="p">)</span>
                        <span class="k">if</span><span class="p">(</span> <span class="n">theSame</span> <span class="p">)</span> <span class="p">:</span>
                            <span class="k">if</span><span class="p">(</span> <span class="n">fixReactionsQuery</span> <span class="p">)</span> <span class="p">:</span>
                                <span class="k">while</span><span class="p">(</span> <span class="bp">True</span> <span class="p">)</span> <span class="p">:</span>
                                    <span class="k">print</span> <span class="s">&#39;Reaction set one:&#39;</span>
                                    <span class="n">datas1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findDatas</span><span class="p">(</span> <span class="n">C</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">Q</span><span class="p">,</span> \
                                        <span class="n">X1</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">X1</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">X2</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">X4</span> <span class="p">)</span>
                                    <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">datas1</span> <span class="p">:</span> <span class="k">print</span> <span class="n">data</span>
                                    <span class="k">print</span>
                                    <span class="k">print</span> <span class="s">&#39;Reaction set two:&#39;</span>
                                    <span class="n">datas2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findDatas</span><span class="p">(</span><span class="n">C</span> <span class="o">=</span> <span class="n">nextReaction</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">S</span><span class="o">=</span><span class="n">nextReaction</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">nextReaction</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> \
                                        <span class="n">X1</span> <span class="o">=</span> <span class="n">nextReaction</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">X2</span><span class="o">=</span><span class="n">nextReaction</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">X3</span><span class="o">=</span><span class="n">nextReaction</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">X4</span><span class="o">=</span><span class="n">nextReaction</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
                                    <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">datas2</span> <span class="p">:</span> <span class="k">print</span> <span class="n">data</span>
                                    <span class="n">response</span> <span class="o">=</span> <span class="n">brb</span><span class="o">.</span><span class="n">Pause</span><span class="p">(</span> <span class="s">&#39;Are they the same (y/n)? : [y] &#39;</span> <span class="p">)</span>
                                    <span class="k">if</span><span class="p">(</span> <span class="n">response</span> <span class="ow">in</span> <span class="p">[</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;n&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span> <span class="p">]</span> <span class="p">)</span> <span class="p">:</span>
                                        <span class="k">if</span><span class="p">(</span> <span class="n">response</span> <span class="o">==</span> <span class="s">&#39;n&#39;</span> <span class="p">)</span> <span class="p">:</span> <span class="n">theSame</span> <span class="o">=</span> <span class="bp">False</span>
                                        <span class="k">break</span>
                                    <span class="k">else</span> <span class="p">:</span>
                                        <span class="k">print</span> <span class="s">&#39;Please respond with y or n&#39;</span>
                            <span class="k">else</span> <span class="p">:</span>
                                <span class="n">datas2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findDatas</span><span class="p">(</span><span class="n">C</span> <span class="o">=</span> <span class="n">nextReaction</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">S</span><span class="o">=</span><span class="n">nextReaction</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">nextReaction</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> \
                                    <span class="n">X1</span> <span class="o">=</span> <span class="n">nextReaction</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">X2</span><span class="o">=</span><span class="n">nextReaction</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">X3</span><span class="o">=</span><span class="n">nextReaction</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">X4</span><span class="o">=</span><span class="n">nextReaction</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
                        <span class="k">if</span><span class="p">(</span> <span class="n">theSame</span> <span class="p">)</span> <span class="p">:</span>
                            <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">datas2</span> <span class="p">:</span>
                                <span class="n">data</span><span class="o">.</span><span class="n">setX1</span><span class="p">(</span> <span class="n">reaction</span><span class="o">.</span><span class="n">X1</span> <span class="p">)</span>
                                <span class="n">data</span><span class="o">.</span><span class="n">setX2</span><span class="p">(</span> <span class="n">reaction</span><span class="o">.</span><span class="n">X2</span> <span class="p">)</span>
                                <span class="n">data</span><span class="o">.</span><span class="n">setX3</span><span class="p">(</span> <span class="n">reaction</span><span class="o">.</span><span class="n">X3</span> <span class="p">)</span>
                                <span class="n">data</span><span class="o">.</span><span class="n">setX4</span><span class="p">(</span> <span class="n">reaction</span><span class="o">.</span><span class="n">X4</span> <span class="p">)</span>
                                <span class="n">data</span><span class="o">.</span><span class="n">setQ</span><span class="p">(</span> <span class="n">reaction</span><span class="o">.</span><span class="n">Q</span> <span class="p">)</span>
                                <span class="n">reactions</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">endlReactionParameters</span><span class="o">.</span><span class="n">endlReactionParameters</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)</span>
                    <span class="k">else</span> <span class="p">:</span>
                        <span class="k">break</span>
                    <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
        </div>
<div class="viewcode-block" id="endlZA.fixQandThresholds"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.fixQandThresholds">[docs]</a>    <span class="k">def</span> <span class="nf">fixQandThresholds</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">specialCases</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">endlIClasses</span><span class="o">.</span><span class="n">fixThresholdMode_RaiseOnly</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="mf">10e-3</span><span class="p">,</span> <span class="n">EFloor</span> <span class="o">=</span> <span class="mf">1e-11</span><span class="p">,</span>
        <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;This methods fixes all the Qs and thresholds for all the data in self. Also, this method makes sures </span>
<span class="sd">        that the first energy point is greater than or equal to EFloor for all data. If the threshold is moved </span>
<span class="sd">        by more than threshold_MeV_shiftWarning, a warning is printed.&quot;&quot;&quot;</span>

        <span class="k">try</span> <span class="p">:</span>
            <span class="n">C1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findData</span><span class="p">(</span> <span class="n">C</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">)</span>
            <span class="n">C1</span><span class="o">.</span><span class="n">setQ</span><span class="p">(</span> <span class="mf">0.</span> <span class="p">)</span>
        <span class="k">except</span> <span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">I0s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findDatas</span><span class="p">(</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">I0</span> <span class="ow">in</span> <span class="n">I0s</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">I0</span><span class="o">.</span><span class="n">C</span> <span class="ow">in</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span> <span class="p">]</span> <span class="p">)</span> <span class="p">:</span> <span class="k">continue</span>
            <span class="n">Ss</span> <span class="o">=</span> <span class="p">[</span> <span class="n">I0</span><span class="o">.</span><span class="n">S</span> <span class="p">]</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">I0</span><span class="o">.</span><span class="n">C</span> <span class="o">==</span> <span class="mi">15</span> <span class="p">)</span> <span class="p">:</span> <span class="n">Ss</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="mi">7</span> <span class="p">)</span>
            <span class="n">datas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findDatas</span><span class="p">(</span> <span class="n">C</span> <span class="o">=</span> <span class="n">I0</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">Ss</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="n">I0</span><span class="o">.</span><span class="n">X1</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="n">I0</span><span class="o">.</span><span class="n">X2</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="n">I0</span><span class="o">.</span><span class="n">X3</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="n">I0</span><span class="o">.</span><span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">I0</span><span class="o">.</span><span class="n">Q</span> <span class="p">)</span>
            <span class="n">doFixQandThreshold</span> <span class="o">=</span> <span class="ow">not</span> <span class="p">(</span> <span class="p">(</span> <span class="n">I0</span><span class="o">.</span><span class="n">C</span> <span class="o">&lt;</span> <span class="mi">8</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span> <span class="mi">49</span> <span class="o">&lt;</span> <span class="n">I0</span><span class="o">.</span><span class="n">C</span> <span class="o">&lt;</span> <span class="mi">58</span> <span class="p">)</span> <span class="p">)</span>
            <span class="n">threshold</span> <span class="o">=</span> <span class="mf">0.</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">doFixQandThreshold</span> <span class="p">)</span> <span class="p">:</span> <span class="n">Q</span><span class="p">,</span> <span class="n">threshold</span> <span class="o">=</span> <span class="n">I0</span><span class="o">.</span><span class="n">fixQandThreshold</span><span class="p">(</span> <span class="n">specialCases</span> <span class="o">=</span> <span class="n">specialCases</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode</span><span class="p">,</span> 
                <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="n">dThreshold_MeV</span><span class="p">,</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="p">)</span>
            <span class="n">EMinI0</span> <span class="o">=</span> <span class="n">I0</span><span class="o">.</span><span class="n">xMin</span><span class="p">(</span> <span class="p">)</span>
            <span class="n">EMinNext</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="n">EMin13479</span> <span class="o">=</span> <span class="n">EMinI0</span>
            <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">datas</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">data</span><span class="o">.</span><span class="n">I</span> <span class="o">&gt;</span> <span class="mi">9</span> <span class="p">)</span> <span class="p">:</span> <span class="k">continue</span>
                <span class="n">EMin_</span><span class="p">,</span> <span class="n">EMinNext_</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">getEMin_EMinNext</span><span class="p">(</span> <span class="p">)</span>
                <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">EMinNext</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span> <span class="n">EMinNext_</span> <span class="o">&lt;</span> <span class="n">EMinNext</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EMinNext</span> <span class="o">=</span> <span class="n">EMinNext_</span>
                <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">EMin_</span> <span class="o">!=</span> <span class="bp">None</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="n">data</span><span class="o">.</span><span class="n">I</span> <span class="ow">in</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EMin13479</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="n">EMin13479</span><span class="p">,</span> <span class="n">EMin_</span> <span class="p">)</span>
            <span class="n">EMin</span> <span class="o">=</span> <span class="n">EMinI0</span>

            <span class="n">yos</span> <span class="o">=</span> <span class="n">endl_C</span><span class="o">.</span><span class="n">endl_C_yoInfo</span><span class="p">(</span> <span class="n">I0</span><span class="o">.</span><span class="n">C</span> <span class="p">)</span>                                  <span class="c"># Attempt to handle charged particle &quot;Coulomb barrier&quot; threshold.</span>
            <span class="n">CoulombBarrier</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">yos</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span>   <span class="n">yos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1000</span> <span class="p">)</span> <span class="p">:</span>                                         <span class="c"># Charged particles if first out.</span>
                    <span class="n">CoulombBarrier</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">elif</span><span class="p">(</span> <span class="p">(</span> <span class="n">yos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">endl_C</span><span class="o">.</span><span class="n">yoX</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="n">yos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1000</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>        <span class="c"># nX for a charged particle.</span>
                    <span class="n">CoulombBarrier</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">elif</span><span class="p">(</span> <span class="p">(</span> <span class="n">yos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">endl_C</span><span class="o">.</span><span class="n">yo_eq_yi</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>     <span class="c"># yo = yi</span>
                    <span class="n">CoulombBarrier</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="ow">not</span> <span class="n">CoulombBarrier</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="n">EMin13479</span> <span class="o">&gt;=</span> <span class="n">threshold</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>       <span class="c"># Additional check for &quot;Coulomb barrier&quot;</span>
                <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">datas</span> <span class="p">:</span>                                             <span class="c"># if I = 1, 3, 4, 7 and 9 data&#39;s EMin are all the same</span>
                    <span class="n">CoulombBarrier</span> <span class="o">=</span> <span class="bp">True</span>                                       <span class="c"># most (hopefully) likely a charged particle came out first,</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">data</span><span class="o">.</span><span class="n">I</span> <span class="ow">in</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span> <span class="p">]</span> <span class="p">)</span> <span class="p">:</span>                         <span class="c"># at least ENDF data is like this.</span>
                        <span class="k">if</span><span class="p">(</span> <span class="n">data</span><span class="o">.</span><span class="n">getEMin_EMinNext</span><span class="p">(</span> <span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">EMin13479</span> <span class="p">)</span> <span class="p">:</span> <span class="n">CoulombBarrier</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">EMin</span> <span class="o">&lt;</span> <span class="n">EFloor</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&#39;Info endlZA.fixQandThresholds: moving EMin = </span><span class="si">%e</span><span class="s"> to EFloor = </span><span class="si">%e</span><span class="s"> for ZA = </span><span class="si">%d</span><span class="s">, C = </span><span class="si">%d</span><span class="s">, S = </span><span class="si">%d</span><span class="s">, X1 = </span><span class="si">%e</span><span class="s">&#39;</span> <span class="o">%</span> \
                    <span class="p">(</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">EFloor</span><span class="p">,</span> <span class="n">I0</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="n">I0</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">I0</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="n">I0</span><span class="o">.</span><span class="n">X1</span> <span class="p">)</span> <span class="p">)</span>
                <span class="n">EMin</span> <span class="o">=</span> <span class="n">EFloor</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">EMin13479</span> <span class="o">&lt;</span> <span class="n">EFloor</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&#39;Info endlZA.fixQandThresholds: moving EMin13479 = </span><span class="si">%e</span><span class="s"> to EFloor = </span><span class="si">%e</span><span class="s"> for ZA = </span><span class="si">%d</span><span class="s">, C = </span><span class="si">%d</span><span class="s">, S = </span><span class="si">%d</span><span class="s">, X1 = </span><span class="si">%e</span><span class="s">&#39;</span> <span class="o">%</span> \
                    <span class="p">(</span> <span class="n">EMin13479</span><span class="p">,</span> <span class="n">EFloor</span><span class="p">,</span> <span class="n">I0</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="n">I0</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">I0</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="n">I0</span><span class="o">.</span><span class="n">X1</span> <span class="p">))</span>
                <span class="n">EMin13479</span> <span class="o">=</span> <span class="n">EFloor</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">CoulombBarrier</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">EMin13479</span> <span class="o">&lt;</span> <span class="n">threshold</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="n">EMin</span> <span class="o">=</span> <span class="n">threshold</span>
                <span class="k">else</span> <span class="p">:</span>
                    <span class="n">EMin</span> <span class="o">=</span> <span class="n">EMin13479</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">EMin</span> <span class="o">&lt;</span> <span class="n">EMinI0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">I0</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">I0</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">]</span> <span class="p">)</span>
            <span class="k">elif</span><span class="p">(</span> <span class="n">threshold</span> <span class="o">&gt;</span> <span class="mf">0.</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">EMinNext</span> <span class="o">&lt;=</span> <span class="n">threshold</span> <span class="p">)</span> <span class="p">:</span> <span class="n">EMin</span> <span class="o">=</span> <span class="n">threshold</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">doFixQandThreshold</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">datas</span> <span class="p">:</span>
                    <span class="n">data</span><span class="o">.</span><span class="n">fixQandThreshold</span><span class="p">(</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">Q</span><span class="p">,</span> <span class="n">specialCases</span> <span class="o">=</span> <span class="n">specialCases</span><span class="p">,</span> <span class="n">fixThresholdMode</span> <span class="o">=</span> <span class="n">fixThresholdMode</span><span class="p">,</span> <span class="n">dThreshold_MeV</span> <span class="o">=</span> <span class="n">dThreshold_MeV</span><span class="p">,</span> 
                        <span class="n">EMin</span> <span class="o">=</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="o">=</span> <span class="n">threshold_MeV_shiftWarning</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.getDocumentation"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.getDocumentation">[docs]</a>    <span class="k">def</span> <span class="nf">getDocumentation</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return None if there is not documentation file, otherwise, the text of the documentation file is returned.&quot;&quot;&quot;</span>

        <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">documentation</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span><span class="p">(</span> <span class="bp">None</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">documentation</span><span class="o">.</span><span class="n">getText</span><span class="p">(</span> <span class="p">)</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.setDocumentation"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.setDocumentation">[docs]</a>    <span class="k">def</span> <span class="nf">setDocumentation</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">text</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Sets self&#39;s documentation text to text.&quot;&quot;&quot;</span>

        <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">documentation</span> <span class="ow">is</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">documentation</span> <span class="o">=</span> <span class="n">fudgeDocumentationFile</span><span class="o">.</span><span class="n">fudgeDocumentationFile</span><span class="p">(</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="s">&#39;documentation.txt&#39;</span> <span class="p">)</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">documentation</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span> <span class="n">text</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.heat"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.heat">[docs]</a>    <span class="k">def</span> <span class="nf">heat</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="n">interpolationAccuracy</span> <span class="o">=</span> <span class="mf">0.002</span><span class="p">,</span> <span class="n">heatAllPoints</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">doNotThin</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">EMin</span> <span class="o">=</span> <span class="mf">1e-11</span><span class="p">,</span>
        <span class="n">heatBelowThreshold</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">removeClosePoints</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">heatAllEDomain</span> <span class="o">=</span> <span class="bp">True</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calls heat method for all cross section data (i.e., I = 0). and sets the temperature in the header for all data to T.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">(</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">False</span> <span class="p">)</span>
        <span class="n">datas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findDatas</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">datas</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">data</span><span class="o">.</span><span class="n">I</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">set</span><span class="p">(</span> <span class="n">data</span><span class="o">.</span><span class="n">heat</span><span class="p">(</span> <span class="n">T</span><span class="p">,</span> <span class="n">interpolationAccuracy</span> <span class="o">=</span> <span class="n">interpolationAccuracy</span><span class="p">,</span> <span class="n">heatAllPoints</span> <span class="o">=</span> <span class="n">heatAllPoints</span><span class="p">,</span> <span class="n">doNotThin</span> <span class="o">=</span> <span class="n">doNotThin</span><span class="p">,</span>
                <span class="n">EMin</span> <span class="o">=</span> <span class="n">EMin</span><span class="p">,</span> <span class="n">heatBelowThreshold</span> <span class="o">=</span> <span class="n">heatBelowThreshold</span><span class="p">,</span> <span class="n">removeClosePoints</span> <span class="o">=</span> <span class="n">removeClosePoints</span><span class="p">,</span> <span class="n">heatAllEDomain</span> <span class="o">=</span> <span class="n">heatAllEDomain</span> <span class="p">)</span> <span class="p">)</span>
            <span class="n">data</span><span class="o">.</span><span class="n">setTemperature</span><span class="p">(</span> <span class="n">T</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.info"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.info">[docs]</a>    <span class="k">def</span> <span class="nf">info</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Prints Source, Z, mass and halflife for self.&quot;</span>

        <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span><span class="o">.</span><span class="n">mass</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span> <span class="p">)</span>
        <span class="n">l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span><span class="o">.</span><span class="n">halflife</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span> <span class="p">)</span>
        <span class="k">print</span> <span class="s">&quot;Source =&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span>
        <span class="k">print</span> <span class="s">&quot;suffix =&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">suffix</span>
        <span class="k">print</span> <span class="s">&quot;Working directory =&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span>
        <span class="k">print</span> <span class="s">&quot;yi = </span><span class="si">%d</span><span class="s"> </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">, Z name = </span><span class="si">%s</span><span class="s">, mass = </span><span class="si">%e</span><span class="s">, halflife = </span><span class="si">%e</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yiTags</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">yiTags</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">endl_Z</span><span class="o">.</span><span class="n">endl_ZLabel</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span> <span class="o">/</span> <span class="mi">1000</span> <span class="p">),</span> <span class="n">m</span><span class="p">,</span> <span class="n">l</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.ll"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.ll">[docs]</a>    <span class="k">def</span> <span class="nf">ll</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Prints a long listing of the data in self.&quot;</span>

        <span class="k">print</span> <span class="s">&quot;Source =&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span>
        <span class="k">print</span> <span class="s">&quot;          Size   File name     ( yo,  C,   I,   S )    ------  yo ------  C-desc Comment&quot;</span>
        <span class="k">print</span> <span class="s">&quot;-----------------------------------------------------------------------------------&quot;</span>
        <span class="n">sC</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%%%d</span><span class="s">s&quot;</span> <span class="o">%</span> <span class="n">endl_C</span><span class="o">.</span><span class="n">endl_CLabelMaxWidth</span><span class="p">(</span> <span class="p">)</span>
        <span class="n">sY</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%%%d</span><span class="s">s&quot;</span> <span class="o">%</span> <span class="n">endl_y</span><span class="o">.</span><span class="n">endl_yLongLabelMaxWidth</span><span class="p">(</span> <span class="p">)</span>
<span class="c">#       sI = &quot;%%%ds&quot; % endl_I.endl_ILabelMaxWidth( )</span>
        <span class="n">Counter</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span> <span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">IsyoCIS</span><span class="p">(</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;------&quot;</span>
                <span class="n">r</span> <span class="o">=</span> <span class="s">&quot;r&quot;</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">levels</span> <span class="o">==</span> <span class="p">[]</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="n">r</span> <span class="o">=</span> <span class="s">&quot;-&quot;</span>
                <span class="k">else</span> <span class="p">:</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">levels</span> <span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span> <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%6d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">levels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
                <span class="k">print</span> <span class="s">&quot;</span><span class="si">%3d</span><span class="s"> </span><span class="si">%s%s</span><span class="s"> </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">Counter</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">l</span><span class="o">.</span><span class="n">mode</span><span class="p">,</span> <span class="n">s</span> <span class="p">),</span> 
                <span class="k">print</span> <span class="n">l</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s">&quot;[( </span><span class="si">%2d</span><span class="s">, </span><span class="si">%2d</span><span class="s">, </span><span class="si">%3d</span><span class="s">, </span><span class="si">%3d</span><span class="s"> )]&quot;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="n">l</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">l</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="n">l</span><span class="o">.</span><span class="n">S</span> <span class="p">),</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">endl_y</span><span class="o">.</span><span class="n">endl_yLongLabel</span><span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">yo</span> <span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span> <span class="n">s</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">s</span> <span class="o">=</span> <span class="s">&quot; &quot;</span>
                <span class="k">print</span> <span class="n">sY</span> <span class="o">%</span> <span class="n">s</span><span class="p">,</span>
                <span class="k">print</span> <span class="n">sC</span> <span class="o">%</span> <span class="n">endl_C</span><span class="o">.</span><span class="n">endl_CLabel</span><span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">C</span> <span class="p">),</span>
<span class="c">#               print sI % endl_I.endl_ILabel( l.I ),</span>
                <span class="k">print</span> <span class="n">endl_I</span><span class="o">.</span><span class="n">endl_ILabel</span><span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">I</span> <span class="p">),</span>
                <span class="k">if</span>   <span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">S</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;for levels&quot;</span><span class="p">,</span>
                <span class="k">elif</span> <span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">S</span> <span class="o">==</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;for pre-equilibrium &quot;</span><span class="p">,</span>
                <span class="k">elif</span> <span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">S</span> <span class="o">==</span> <span class="mi">3</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;for gamma production&quot;</span><span class="p">,</span>
                <span class="k">elif</span> <span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">S</span> <span class="o">==</span> <span class="mi">7</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;for delayed&quot;</span><span class="p">,</span>
                <span class="k">print</span>
                <span class="k">if</span> <span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">levels</span> <span class="o">!=</span> <span class="p">[]</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">levels</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">l</span><span class="o">.</span><span class="n">levels</span> <span class="p">:</span>
                        <span class="k">print</span> <span class="s">&quot;    </span><span class="si">%10d</span><span class="s">                [( </span><span class="si">%2d</span><span class="s">, </span><span class="si">%2d</span><span class="s">, </span><span class="si">%3d</span><span class="s">, </span><span class="si">%3d</span><span class="s">, </span><span class="si">%e</span><span class="s">, </span><span class="si">%e</span><span class="s">, </span><span class="si">%e</span><span class="s">, </span><span class="si">%e</span><span class="s">, </span><span class="si">%e</span><span class="s"> )]&quot;</span> <span class="o">%</span> \
                            <span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">q</span> <span class="p">),</span> <span class="n">l</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="n">l</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">l</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="n">l</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="n">q</span><span class="o">.</span><span class="n">X1</span><span class="p">,</span> <span class="n">q</span><span class="o">.</span><span class="n">X2</span><span class="p">,</span> <span class="n">q</span><span class="o">.</span><span class="n">X3</span><span class="p">,</span> <span class="n">q</span><span class="o">.</span><span class="n">X4</span><span class="p">,</span> <span class="n">q</span><span class="o">.</span><span class="n">Q</span> <span class="p">)</span>
            <span class="n">Counter</span> <span class="o">=</span> <span class="n">Counter</span> <span class="o">+</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="endlZA.llcs"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.llcs">[docs]</a>    <span class="k">def</span> <span class="nf">llcs</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Prints a long listing of cross sections, same as ll( yo = None, C, I = 0, S ).</span>
<span class="sd">         Deprecated method, will not be in version 4.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ll</span><span class="p">(</span> <span class="bp">None</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">S</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.ls"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.ls">[docs]</a>    <span class="k">def</span> <span class="nf">ls</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">w</span> <span class="o">=</span> <span class="mi">3</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Prints a short listing of the data in self.&quot;</span>

        <span class="k">print</span> <span class="s">&quot;Source =&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span>
        <span class="n">d</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">Counter</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span> <span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">IsyoCIS</span><span class="p">(</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s">&quot;</span><span class="si">%3d</span><span class="s"> </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">Counter</span><span class="p">,</span> <span class="n">l</span><span class="o">.</span><span class="n">__repr__</span><span class="p">(</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span>
            <span class="n">Counter</span> <span class="o">=</span> <span class="n">Counter</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">brb</span><span class="o">.</span><span class="n">tlist</span><span class="p">(</span> <span class="n">d</span><span class="p">,</span> <span class="n">w</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.lscs"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.lscs">[docs]</a>    <span class="k">def</span> <span class="nf">lscs</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">w</span> <span class="o">=</span> <span class="mi">3</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Prints a short listing of cross sections, same as ls( yo = None, C = C, I = 0, S = S, w = w ).</span>
<span class="sd">         Deprecated method, will not be in version 4.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ls</span><span class="p">(</span> <span class="bp">None</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">S</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.plotcs"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.plotcs">[docs]</a>    <span class="k">def</span> <span class="nf">plotcs</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Plots cross section data for C_Value = C and S_Value = S.  Deprecated method, will not be in version 4.&quot;</span>

        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span> <span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">IsyoCIS</span><span class="p">(</span> <span class="bp">None</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">S</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">levels</span> <span class="o">!=</span> <span class="p">[]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">sS</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
                <span class="k">if</span> <span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">S</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span> <span class="n">sS</span> <span class="o">=</span> <span class="s">&quot;for levels&quot;</span>
                <span class="n">l</span><span class="o">.</span><span class="n">levels</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span> <span class="n">ylabel</span> <span class="o">=</span> <span class="n">endl_C</span><span class="o">.</span><span class="n">endl_CLabel</span><span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">C</span> <span class="p">)</span> <span class="o">+</span> <span class="s">&quot; Cross section &quot;</span> <span class="o">+</span> <span class="n">sS</span> <span class="o">+</span> <span class="s">&quot; (barn)&quot;</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.reactionList"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.reactionList">[docs]</a>    <span class="k">def</span> <span class="nf">reactionList</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of all possible reactions (excluding C = 1). Each element of the list is a</span>
<span class="sd">        list of [ C, S, X1, X2, X3, X4, Q ] for a reaction.&quot;&quot;&quot;</span>

        <span class="n">csxqs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">CList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CList</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">C</span> <span class="ow">in</span> <span class="n">CList</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">C</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span> <span class="k">continue</span>
            <span class="n">sxqs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SXList</span><span class="p">(</span> <span class="n">C</span> <span class="p">)</span>
            <span class="k">for</span> <span class="n">sxq</span> <span class="ow">in</span> <span class="n">sxqs</span> <span class="p">:</span> <span class="n">csxqs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">endlReactionParameters</span><span class="o">.</span><span class="n">endlReactionParameters</span><span class="p">(</span> <span class="n">C</span><span class="p">,</span> <span class="n">sxq</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">sxq</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">sxq</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">sxq</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">sxq</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">sxq</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">csxqs</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.read"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.read">[docs]</a>    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">printWarning</span> <span class="o">=</span> <span class="bp">True</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Reads in all data matching yo, C, I and S. If printWarning is True and data has already be read in, a warning message is printed.&quot;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">DesignerIsotope</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="n">fudgeExceptions</span><span class="o">.</span><span class="n">ENDL_DesignerIsotopeReadException</span><span class="p">(</span> <span class="s">&quot;Error endlZA.read: cannot read designer isotope data from file&quot;</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span> <span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">IsyoCIS</span><span class="p">(</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">levels</span> <span class="o">!=</span> <span class="p">[]</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">printWarning</span> <span class="p">)</span> <span class="p">:</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&quot;Warning in endlZA.read: yo = </span><span class="si">%d</span><span class="s">, C = </span><span class="si">%d</span><span class="s">, I = </span><span class="si">%d</span><span class="s"> and S = </span><span class="si">%d</span><span class="s"> already read.&quot;</span> <span class="o">%</span> \
                        <span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="n">l</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">l</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="n">l</span><span class="o">.</span><span class="n">S</span> <span class="p">)</span> <span class="p">)</span>
                <span class="k">else</span> <span class="p">:</span>
                    <span class="n">l</span><span class="o">.</span><span class="n">read</span><span class="p">(</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.readIfNotRead"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.readIfNotRead">[docs]</a>    <span class="k">def</span> <span class="nf">readIfNotRead</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Reads in all data matching yo, C, I and S which is not currently read in.&quot;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">DesignerIsotope</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span>
        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span> <span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">IsyoCIS</span><span class="p">(</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">levels</span> <span class="o">==</span> <span class="p">[]</span> <span class="p">)</span> <span class="p">:</span> <span class="n">l</span><span class="o">.</span><span class="n">read</span><span class="p">(</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.readcs"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.readcs">[docs]</a>    <span class="k">def</span> <span class="nf">readcs</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Reads in all unread cross section data with C_Value = C and S_Value = S. Deprecated method, will not be in version 4.&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">(</span> <span class="n">yo</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">S</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.removeFile"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.removeFile">[docs]</a>    <span class="k">def</span> <span class="nf">removeFile</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes self&#39;s reference to all files matching yo, C, I and S and deletes them from the working directory.  Also see unreadFile.&quot;&quot;&quot;</span>

        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span> <span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">while</span><span class="p">(</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">IsyoCIS</span><span class="p">(</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="o">!=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;rm -rf &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="n">fudgeParameters</span><span class="o">.</span><span class="n">VerboseMode</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;executing system command &gt;&gt;&gt;&quot;</span><span class="p">,</span> <span class="n">cmd</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span> <span class="n">cmd</span> <span class="p">)</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
            <span class="n">n</span> <span class="o">-=</span> <span class="mi">1</span>
</div>
<div class="viewcode-block" id="endlZA.save"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.save">[docs]</a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">path</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="nb">file</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Saves all data matching yo, C, I and S to path = path and file = file.  In general file should not be specified.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="n">path</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Error in endlZA.save: project does not have a work directory.&quot;</span> <span class="p">)</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">workDir</span>
        <span class="k">if</span><span class="p">(</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span> <span class="n">path</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span> <span class="n">path</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span> <span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">IsyoCIS</span><span class="p">(</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">levels</span> <span class="o">!=</span> <span class="p">[]</span> <span class="p">)</span> <span class="p">:</span> 
                    <span class="n">file_</span> <span class="o">=</span> <span class="nb">file</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="n">file_</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">file_</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">name</span>
                    <span class="n">Name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span> <span class="n">path</span><span class="p">,</span> <span class="n">file_</span> <span class="p">)</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="n">fudgeParameters</span><span class="o">.</span><span class="n">VerboseMode</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="k">print</span> <span class="s">&quot;Saving data to file&quot;</span><span class="p">,</span> <span class="n">Name</span>
                    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span> <span class="n">Name</span><span class="p">,</span> <span class="s">&quot;w&quot;</span> <span class="p">)</span>
                    <span class="n">l</span><span class="o">.</span><span class="n">save</span><span class="p">(</span> <span class="n">f</span> <span class="p">)</span>
                    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="ow">not</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">documentation</span> <span class="ow">is</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">documentation</span><span class="o">.</span><span class="n">write</span><span class="p">(</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="o">.</span><span class="n">join</span><span class="p">(</span> <span class="p">(</span> <span class="n">path</span><span class="p">,</span> <span class="s">&#39;documentation.txt&#39;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.savecs"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.savecs">[docs]</a>    <span class="k">def</span> <span class="nf">savecs</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">path</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Saves all cross section data matching C and S. Deprecated method, will not be in version 4.&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span> <span class="n">yo</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">S</span><span class="p">,</span> <span class="n">path</span> <span class="o">=</span> <span class="n">path</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.sumcs"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.sumcs">[docs]</a>    <span class="k">def</span> <span class="nf">sumcs</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Returns a endl2dmath object for the sum of all cross secitions for reactions 10 &lt;= C &lt; 50.&quot;</span>

        <span class="k">def</span> <span class="nf">sortfunc4sumcs_</span><span class="p">(</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="p">)</span> <span class="p">:</span>
            <span class="s">&quot;For internal use only.&quot;</span>

            <span class="k">if</span> <span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">x</span> <span class="p">)</span>  <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span> <span class="n">y</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">x</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span> <span class="n">y</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="mi">0</span>
            <span class="k">return</span> <span class="mi">1</span>

        <span class="n">cs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findDatas</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)</span>
        <span class="n">cs</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span> <span class="n">sortfunc4sumcs_</span> <span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">cs</span> <span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span> <span class="mi">10</span> <span class="o">&lt;=</span> <span class="n">i</span><span class="o">.</span><span class="n">C</span> <span class="o">&lt;</span> <span class="mi">50</span> <span class="p">)</span> <span class="p">:</span> <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="n">i</span>                           <span class="c"># Only want 10 &lt;= C &lt; 50.</span>
        <span class="k">return</span> <span class="n">s</span>
</div>
<div class="viewcode-block" id="endlZA.SXList"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.SXList">[docs]</a>    <span class="k">def</span> <span class="nf">SXList</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">C</span> <span class="p">)</span> <span class="p">:</span>
        <span class="s">&quot;Returns a sorted list of S- and X-values (and Q) for all reaction of type C in self, excluding S = 7.&quot;</span>

        <span class="n">sxl</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">f</span><span class="o">.</span><span class="n">C</span> <span class="o">==</span> <span class="n">C</span> <span class="p">)</span>  <span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span> <span class="n">f</span><span class="o">.</span><span class="n">levels</span> <span class="o">==</span> <span class="p">[]</span> <span class="p">)</span> <span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span> <span class="p">)</span>
                <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">levels</span> <span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">C</span> <span class="o">==</span> <span class="mi">15</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">S</span> <span class="o">==</span> <span class="mi">7</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">continue</span>
                    <span class="n">sx</span> <span class="o">=</span> <span class="p">[</span> <span class="n">l</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="n">l</span><span class="o">.</span><span class="n">X1</span><span class="p">,</span> <span class="n">l</span><span class="o">.</span><span class="n">X2</span><span class="p">,</span> <span class="n">l</span><span class="o">.</span><span class="n">X3</span><span class="p">,</span> <span class="n">l</span><span class="o">.</span><span class="n">X4</span><span class="p">,</span> <span class="n">l</span><span class="o">.</span><span class="n">Q</span> <span class="p">]</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="n">sx</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sxl</span> <span class="p">)</span> <span class="p">:</span> <span class="n">sxl</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">sx</span> <span class="p">)</span>
        <span class="n">sxl</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">sxl</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.unreadFile"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.unreadFile">[docs]</a>    <span class="k">def</span> <span class="nf">unreadFile</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">yo</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes self&#39;s reference to all files matching yo, C, I and S.  Also see removeFile.&quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filelist</span> <span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span> <span class="n">f</span><span class="o">.</span><span class="n">IsyoCIS</span><span class="p">(</span> <span class="n">yo</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">S</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">levels</span> <span class="o">=</span> <span class="p">[]</span>
</div>
<div class="viewcode-block" id="endlZA.toZAsFrame"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.toZAsFrame">[docs]</a>    <span class="k">def</span> <span class="nf">toZAsFrame</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">workDir</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">I3ToI4lMax</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;This methods boosts the data in self to invert the projectile/target particles.&quot;&quot;&quot;</span>

        <span class="k">class</span> <span class="nc">dummy</span> <span class="p">:</span>

            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">yo</span> <span class="o">=</span> <span class="mi">100</span>

        <span class="k">def</span> <span class="nf">addFile</span><span class="p">(</span> <span class="n">newData</span><span class="p">,</span> <span class="n">halflife</span> <span class="p">)</span> <span class="p">:</span>

            <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">newData</span><span class="o">.</span><span class="n">yo</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">)</span> <span class="ow">and</span> <span class="p">(</span> <span class="n">newData</span><span class="o">.</span><span class="n">C</span> <span class="ow">in</span> <span class="p">[</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">yo</span> <span class="o">=</span> <span class="n">newData</span><span class="o">.</span><span class="n">yo</span> <span class="o">+</span> <span class="mi">10</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">newData</span><span class="o">.</span><span class="n">yo</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="p">)</span> <span class="p">:</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">newData</span><span class="o">.</span><span class="n">yo</span> <span class="o">-</span> <span class="mi">10</span>
                <span class="n">newData</span><span class="o">.</span><span class="n">setYo</span><span class="p">(</span> <span class="n">yo</span> <span class="p">)</span>
            <span class="nb">file</span> <span class="o">=</span> <span class="n">newTarget</span><span class="o">.</span><span class="n">findFile</span><span class="p">(</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">newData</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="n">newData</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="n">newData</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="n">newData</span><span class="o">.</span><span class="n">S</span> <span class="p">)</span>
            <span class="k">if</span><span class="p">(</span> <span class="nb">file</span> <span class="ow">is</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="nb">file</span> <span class="o">=</span> <span class="n">newTarget</span><span class="o">.</span><span class="n">addFile</span><span class="p">(</span> <span class="n">newData</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="n">newData</span><span class="o">.</span><span class="n">C</span><span class="p">,</span> <span class="n">newData</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="n">newData</span><span class="o">.</span><span class="n">S</span><span class="p">,</span> <span class="n">halflife</span><span class="p">,</span> <span class="n">printWarnings</span> <span class="o">=</span> <span class="bp">True</span> <span class="p">)</span>
            <span class="nb">file</span><span class="o">.</span><span class="n">addEndlData</span><span class="p">(</span> <span class="n">newData</span> <span class="p">)</span>

        <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1001</span><span class="p">,</span> <span class="mi">1002</span><span class="p">,</span> <span class="mi">1003</span><span class="p">,</span> <span class="mi">2003</span><span class="p">,</span> <span class="mi">2004</span> <span class="p">]</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span> <span class="s">&#39;Cannot convert to </span><span class="si">%d</span><span class="s"> as projectile&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">readIfNotRead</span><span class="p">(</span> <span class="p">)</span>
        <span class="n">newTarget</span> <span class="o">=</span> <span class="n">endlZA</span><span class="p">(</span> <span class="n">endl2</span><span class="o">.</span><span class="n">yoToZA</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span> <span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">bdflsFile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span><span class="p">,</span> <span class="n">workDir</span> <span class="o">=</span> <span class="n">workDir</span><span class="p">,</span> <span class="n">readOnly</span> <span class="o">=</span> <span class="bp">False</span> <span class="p">)</span>
        <span class="n">newProjectileMass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span><span class="o">.</span><span class="n">mass</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="p">)</span>
        <span class="n">newTargetMass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span><span class="o">.</span><span class="n">mass</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span> <span class="p">)</span>
        <span class="n">halflife</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span><span class="o">.</span><span class="n">halflife</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span> <span class="p">)</span>
        <span class="n">datas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findReactionsDatas</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">datas</span> <span class="p">:</span>
            <span class="k">for</span> <span class="n">datum</span> <span class="ow">in</span> <span class="n">data</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">datum</span><span class="o">.</span><span class="n">I</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="n">addFile</span><span class="p">(</span> <span class="n">datum</span><span class="o">.</span><span class="n">toZAsFrame</span><span class="p">(</span> <span class="n">newProjectileMass</span><span class="p">,</span> <span class="n">newTargetMass</span><span class="p">,</span> <span class="n">halflife</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span> <span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="n">halflife</span> <span class="p">)</span>
                    <span class="k">break</span>
            <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">dummy</span><span class="p">(</span> <span class="p">)</span> <span class="p">)</span>
            <span class="n">yo</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">for</span> <span class="n">datum</span> <span class="ow">in</span> <span class="n">data</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">datum</span><span class="o">.</span><span class="n">yo</span> <span class="o">!=</span> <span class="n">yo</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">yo</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="n">yoDatas</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span> <span class="p">)</span>
                        <span class="n">Is</span> <span class="o">=</span> <span class="p">[</span> <span class="n">I</span> <span class="k">for</span> <span class="n">I</span><span class="p">,</span> <span class="n">yoData</span> <span class="ow">in</span> <span class="n">yoDatas</span> <span class="p">]</span>
                        <span class="n">newDatas</span> <span class="o">=</span> <span class="p">[]</span>
                        <span class="k">if</span><span class="p">(</span> <span class="n">Is</span> <span class="o">==</span> <span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="p">)</span> <span class="p">:</span>
                            <span class="n">newDatas</span> <span class="o">=</span> <span class="n">yoDatas</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">toZAsFrame</span><span class="p">(</span> <span class="n">newProjectileMass</span><span class="p">,</span> <span class="n">newTargetMass</span><span class="p">,</span> <span class="n">halflife</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span> <span class="p">)</span>
                        <span class="k">elif</span><span class="p">(</span> <span class="n">Is</span> <span class="o">==</span> <span class="p">[</span> <span class="mi">4</span> <span class="p">]</span> <span class="p">)</span> <span class="p">:</span>
                            <span class="n">newDatas</span> <span class="o">=</span> <span class="n">yoDatas</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">toZAsFrame</span><span class="p">(</span> <span class="n">newProjectileMass</span><span class="p">,</span> <span class="n">newTargetMass</span><span class="p">,</span> <span class="n">halflife</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span> <span class="p">)</span>
                        <span class="k">elif</span><span class="p">(</span> <span class="n">Is</span> <span class="o">==</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span> <span class="p">]</span> <span class="p">)</span> <span class="p">:</span>                <span class="c"># The logic in this elif assumes toZAsFrame returns one data set each.</span>
                            <span class="k">print</span> <span class="s">&#39;WARNING from endlZA.toZAsFrame: Discarded I = 1 data from I = [ 1, 4 ] set for oldYi = </span><span class="si">%d</span><span class="s">, oldYo = </span><span class="si">%d</span><span class="s"> and C = </span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> \
                                <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span><span class="p">,</span> <span class="n">yoDatas</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="n">yoDatas</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">C</span> <span class="p">)</span>
                            <span class="n">newDatas_</span> <span class="o">=</span> <span class="n">yoDatas</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">toZAsFrame</span><span class="p">(</span> <span class="n">newProjectileMass</span><span class="p">,</span> <span class="n">newTargetMass</span><span class="p">,</span> <span class="n">halflife</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span> <span class="p">)</span>
                            <span class="n">newDatas</span> <span class="o">=</span> <span class="n">newDatas_</span> <span class="o">+</span> <span class="n">yoDatas</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">toZAsFrame</span><span class="p">(</span> <span class="n">newProjectileMass</span><span class="p">,</span> <span class="n">newTargetMass</span><span class="p">,</span> <span class="n">halflife</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span> <span class="p">)</span>
                        <span class="k">elif</span><span class="p">(</span> <span class="n">Is</span> <span class="o">==</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span> <span class="p">]</span> <span class="p">)</span> <span class="p">:</span>
                            <span class="k">print</span> <span class="s">&#39;WARNING from endlZA.toZAsFrame: Converting I = 1,3 to I = 4, lMax = </span><span class="si">%d</span><span class="s"> for oldYi = </span><span class="si">%d</span><span class="s">, oldYo = </span><span class="si">%d</span><span class="s"> and C = </span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> \
                                <span class="p">(</span> <span class="n">I3ToI4lMax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yi</span><span class="p">,</span> <span class="n">yoDatas</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">yo</span><span class="p">,</span> <span class="n">yoDatas</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">C</span> <span class="p">)</span>
                            <span class="n">I4</span> <span class="o">=</span> <span class="n">yoDatas</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">convertToI4</span><span class="p">(</span> <span class="n">yoDatas</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">I3ToI4lMax</span> <span class="p">)</span>
                            <span class="n">newDatas</span> <span class="o">=</span> <span class="n">I4</span><span class="o">.</span><span class="n">toZAsFrame</span><span class="p">(</span> <span class="n">newProjectileMass</span><span class="p">,</span> <span class="n">newTargetMass</span><span class="p">,</span> <span class="n">halflife</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span> <span class="p">)</span>
                        <span class="k">else</span> <span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span> <span class="s">&#39;Distribution combination I = </span><span class="si">%s</span><span class="s"> not supported&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">Is</span> <span class="p">)</span> <span class="p">)</span>
                        <span class="k">for</span> <span class="n">newData</span> <span class="ow">in</span> <span class="n">newDatas</span> <span class="p">:</span> <span class="n">addFile</span><span class="p">(</span> <span class="n">newData</span><span class="p">,</span> <span class="n">halflife</span> <span class="p">)</span>
                    <span class="n">yoDatas</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">datum</span><span class="o">.</span><span class="n">yo</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">yo</span> <span class="o">=</span> <span class="n">datum</span><span class="o">.</span><span class="n">yo</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">yo</span> <span class="o">==</span> <span class="mi">100</span> <span class="p">)</span> <span class="p">:</span> <span class="k">break</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">datum</span><span class="o">.</span><span class="n">I</span> <span class="ow">in</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span> <span class="p">]</span> <span class="p">)</span> <span class="p">:</span> <span class="n">yoDatas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">datum</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="n">datum</span> <span class="p">]</span> <span class="p">)</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">datum</span><span class="o">.</span><span class="n">I</span> <span class="o">==</span> <span class="mi">9</span> <span class="p">)</span> <span class="p">:</span> <span class="n">addFile</span><span class="p">(</span> <span class="n">datum</span><span class="o">.</span><span class="n">toZAsFrame</span><span class="p">(</span> <span class="n">newProjectileMass</span><span class="p">,</span> <span class="n">newTargetMass</span><span class="p">,</span> <span class="n">halflife</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bdflsFile</span> <span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="n">halflife</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">newTarget</span> <span class="p">)</span>
        </div>
<div class="viewcode-block" id="endlZA.toGND"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.toGND">[docs]</a>    <span class="k">def</span> <span class="nf">toGND</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">xenslIsotopes</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">testing</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">verbose</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span>

        <span class="kn">import</span> <span class="nn">fudge.legacy.converting.endlToGND</span> <span class="kn">as</span> <span class="nn">endlToGND</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">endlToGND</span><span class="o">.</span><span class="n">toGND</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">xenslIsotopes</span> <span class="o">=</span> <span class="n">xenslIsotopes</span><span class="p">,</span> <span class="n">testing</span> <span class="o">=</span> <span class="n">testing</span><span class="p">,</span> <span class="n">verbose</span> <span class="o">=</span> <span class="n">verbose</span> <span class="p">)</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.adjustcs"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.adjustcs">[docs]</a>    <span class="k">def</span> <span class="nf">adjustcs</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">X1</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">X2</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">X3</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">X4</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">Q</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="mf">5.e-5</span><span class="p">,</span> <span class="n">csRelChangeNotice</span> <span class="o">=</span> <span class="o">.</span><span class="mi">1</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Adjust the cross section given by C, S, X1, X2, X3, X4 and Q  so that the total cross section remains fixed.  </span>
<span class="sd">        If C = 1 (i.e., total cross section), then the total is adjusted to keep the others at there current values.&quot;&quot;&quot;</span>

        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sumcs</span><span class="p">(</span> <span class="p">)</span>                                           <span class="c"># Calulate the new sum.</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cs</span><span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>                                            <span class="c"># Get the current total cross section.</span>
        <span class="k">if</span> <span class="p">(</span> <span class="n">C</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">:</span>                                             <span class="c"># Adjust the total cross section.</span>
            <span class="n">old_a</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">copyData</span><span class="p">(</span> <span class="p">)</span>
            <span class="n">t</span><span class="o">.</span><span class="n">set</span><span class="p">(</span> <span class="n">s</span> <span class="p">)</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">t</span>
        <span class="k">else</span> <span class="p">:</span>                                                      <span class="c"># Adjust some other cross section.</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">t</span> <span class="o">-</span> <span class="n">s</span>                                               <span class="c"># The difference.</span>
            <span class="n">s</span> <span class="o">=</span> <span class="p">(</span> <span class="n">t</span> <span class="o">+</span> <span class="n">s</span> <span class="p">)</span> <span class="o">/</span> <span class="mf">2.</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">d</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>                            <span class="c"># Set small relative differences to zero.</span>
                <span class="k">if</span> <span class="p">(</span> <span class="nb">abs</span><span class="p">(</span> <span class="n">d</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="o">&lt;</span> <span class="n">f</span> <span class="o">*</span> <span class="n">s</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span> <span class="n">d</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.</span>
            <span class="n">d</span><span class="o">.</span><span class="n">trim</span><span class="p">(</span> <span class="p">)</span>                                               <span class="c"># Remove trailing and ending zeros.</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">d</span> <span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span>
            <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cs</span><span class="p">(</span> <span class="n">C</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">X1</span><span class="p">,</span> <span class="n">X2</span><span class="p">,</span> <span class="n">X3</span><span class="p">,</span> <span class="n">X4</span><span class="p">,</span> <span class="n">Q</span> <span class="p">)</span>                      <span class="c"># Get cross section to adjust.</span>
            <span class="n">old_a</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">copyData</span><span class="p">(</span> <span class="p">)</span>
            <span class="n">a</span><span class="o">.</span><span class="n">set</span><span class="p">(</span> <span class="n">a</span> <span class="o">+</span> <span class="n">d</span> <span class="p">)</span>                                      <span class="c"># Adjust cross section.</span>
            <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">emin</span> <span class="o">=</span> <span class="mf">0.</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>                                   <span class="c"># Check for negative cross sections.</span>
                <span class="k">if</span> <span class="p">(</span> <span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="n">c</span> <span class="o">=</span> <span class="n">c</span> <span class="o">+</span> <span class="mi">1</span>
                    <span class="n">emin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="n">emin</span><span class="p">,</span> <span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="mi">5</span> <span class="p">)</span> <span class="p">:</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&quot;Warning in endlZA.adjustcs: negative cross section </span><span class="si">%e</span><span class="s"> </span><span class="si">%e</span><span class="s"> set to 0.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>
                    <span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.</span>
            <span class="k">if</span> <span class="p">(</span> <span class="n">c</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&quot;Warning in endlZA.adjustcs: </span><span class="si">%d</span><span class="s"> negative cross sections set to 0 (</span><span class="si">%e</span><span class="s">).&quot;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">c</span><span class="p">,</span> <span class="n">emin</span> <span class="p">)</span> <span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="p">(</span> <span class="n">old_a</span> <span class="o">+</span> <span class="n">a</span> <span class="p">)</span> <span class="o">/</span> <span class="mf">2.</span>
        <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">rcmax</span> <span class="o">=</span> <span class="mf">0.</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>                                           <span class="c"># Check for large, compared to csRelChangeNotice,</span>
            <span class="k">if</span> <span class="p">(</span> <span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mf">0.</span> <span class="p">)</span> <span class="p">:</span>                                     <span class="c"># relative difference between a and old_a.</span>
                <span class="n">v</span><span class="p">,</span> <span class="n">i</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">GetValueNIndex</span><span class="p">(</span> <span class="n">e</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">i</span> <span class="p">)</span>
                <span class="n">vold</span><span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="n">old_a</span><span class="o">.</span><span class="n">GetValueNIndex</span><span class="p">(</span> <span class="n">e</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">j</span> <span class="p">)</span>
                <span class="n">rc</span> <span class="o">=</span> <span class="p">(</span> <span class="n">v</span> <span class="o">-</span> <span class="n">vold</span> <span class="p">)</span> <span class="o">/</span> <span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="p">(</span> <span class="nb">abs</span><span class="p">(</span> <span class="n">rc</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="n">csRelChangeNotice</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="nb">abs</span><span class="p">(</span> <span class="n">rc</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="nb">abs</span><span class="p">(</span> <span class="n">rcmax</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="n">rcmax</span> <span class="o">=</span> <span class="n">rc</span>
                    <span class="n">c</span> <span class="o">=</span> <span class="n">c</span> <span class="o">+</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="mi">5</span> <span class="p">)</span> <span class="p">:</span>
                        <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&quot;Warning in endlZA.adjustcs: relative change of </span><span class="si">%e</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="n">rc</span> <span class="p">)</span>
                        <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&quot;       Value at E = </span><span class="si">%e</span><span class="s"> changed from </span><span class="si">%e</span><span class="s"> to </span><span class="si">%e</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">e</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">vold</span><span class="p">,</span> <span class="n">v</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span> <span class="n">c</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&quot;Warning in endlZA.adjustcs: </span><span class="si">%d</span><span class="s"> relative changes greater than </span><span class="si">%e</span><span class="s"> found (</span><span class="si">%e</span><span class="s">).&quot;</span> \
            <span class="o">%</span> <span class="p">(</span> <span class="n">c</span><span class="p">,</span> <span class="n">csRelChangeNotice</span><span class="p">,</span> <span class="n">rcmax</span> <span class="p">)</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.adjustcsWithWeights"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.adjustcsWithWeights">[docs]</a>    <span class="k">def</span> <span class="nf">adjustcsWithWeights</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">CsNWeights</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="mf">5.e-5</span><span class="p">,</span> <span class="n">total</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Adjusts the cross sections given by CsNWeights, so that the total cross section </span>
<span class="sd">        remains fixed. CsNWeights is a list of C-value and weight. For example, a CsNWeights </span>
<span class="sd">        of [ [ 10, 6 ], [ 11, 4 ], [ 12, 2 ] ] would adjust the C = 10 cross section by</span>
<span class="sd">        50% of the different, the C = 11 cross section by 33.3% of the different and the C = 12</span>
<span class="sd">        cross section by 16.7% of the different. Relative total cross section less than f are set to 0.&quot;&quot;&quot;</span>

        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sumcs</span><span class="p">(</span> <span class="p">)</span>                                       <span class="c"># Calulate the new sum.</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">total</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">total</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cs</span><span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>              <span class="c"># Get the current total cross section.</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">total</span> <span class="o">-</span> <span class="n">s</span>                                           <span class="c"># The difference.</span>
        <span class="n">s</span> <span class="o">=</span> <span class="p">(</span> <span class="n">total</span> <span class="o">+</span> <span class="n">s</span> <span class="p">)</span> <span class="o">/</span> <span class="mf">2.</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">xy</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">data</span> <span class="p">:</span>                                      <span class="c"># Set small relative differences to zero.</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nb">abs</span><span class="p">(</span> <span class="n">xy</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="o">&lt;</span> <span class="n">f</span> <span class="o">*</span> <span class="n">s</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">:</span> <span class="n">xy</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">d</span><span class="o">.</span><span class="n">trim</span><span class="p">(</span> <span class="p">)</span>                                               <span class="c"># Remove trailing and ending zeros.</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">d</span> <span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span>
        <span class="n">csNWs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">totalWeight</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mf">1e-8</span>
        <span class="k">for</span> <span class="n">CNW</span> <span class="ow">in</span> <span class="n">CsNWeights</span> <span class="p">:</span>
            <span class="n">csList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findDatas</span><span class="p">(</span> <span class="n">C</span> <span class="o">=</span> <span class="n">CNW</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span>
            <span class="k">for</span> <span class="n">cs</span> <span class="ow">in</span> <span class="n">csList</span> <span class="p">:</span>
                <span class="n">w</span> <span class="o">=</span> <span class="n">CNW</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">CNW</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span> <span class="n">w</span> <span class="o">=</span> <span class="n">cs</span>
                <span class="n">totalWeight</span> <span class="o">=</span> <span class="n">totalWeight</span> <span class="o">+</span> <span class="n">w</span>
                <span class="n">csNWs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">cs</span> <span class="p">)</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">d</span> <span class="o">/</span> <span class="n">totalWeight</span>
        <span class="k">for</span> <span class="n">cs</span> <span class="ow">in</span> <span class="n">csNWs</span> <span class="p">:</span>
            <span class="n">cs</span><span class="o">.</span><span class="n">set</span><span class="p">(</span> <span class="n">cs</span> <span class="o">*</span> <span class="p">(</span> <span class="mf">1.</span> <span class="o">+</span> <span class="n">d</span> <span class="p">)</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="endlZA.syncLevelEnergies"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlZA.endlZA.syncLevelEnergies">[docs]</a>    <span class="k">def</span> <span class="nf">syncLevelEnergies</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">checkOnly</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">isomerMinimumHalflife</span> <span class="o">=</span> <span class="bp">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Synchronizes the level energies of the target, and discrete states of the residual</span>
<span class="sd">        with a database containing the accepted level energies for all nuclei. The residual</span>
<span class="sd">        level energies are synchronized for both the inelastic S=1 data (X1), and isomers (X4).</span>
<span class="sd">        Checks that the isomer level labels m? are consistent with the levels given in the database.</span>
<span class="sd">        If checkOnly = True then only check against database and print differences,</span>
<span class="sd">        else if checkOnly = False then make the changes to the data.</span>
<span class="sd">        If isomerMinimumHalflife is given then sets this variable in the Levels class before performing sync.&quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">isomerMinimumHalflife</span> <span class="p">:</span> <span class="n">xensl</span><span class="o">.</span><span class="n">isomerMinimumHalflife</span> <span class="o">=</span> <span class="n">isomerMinimumHalflife</span>
        <span class="n">targetLevels</span> <span class="o">=</span> <span class="n">xensl</span><span class="o">.</span><span class="n">Levels</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span> <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">suffix</span> <span class="p">:</span>
            <span class="n">targetEnergy</span> <span class="o">=</span> <span class="n">targetLevels</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">suffix</span> <span class="p">)</span><span class="o">.</span><span class="n">energy</span>
            <span class="c"># check isomer level is actually labeled as a metastable state</span>
            <span class="k">if</span> <span class="s">&#39;m&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">suffix</span> <span class="p">:</span>
                <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">targetLevels</span><span class="o">.</span><span class="n">metastables</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="k">if</span> <span class="n">targetEnergy</span> <span class="o">==</span> <span class="n">targetLevels</span><span class="p">(</span> <span class="n">m</span> <span class="p">)</span><span class="o">.</span><span class="n">energy</span> <span class="p">:</span> <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&#39;WARNING: Isomer level energy </span><span class="si">%s</span><span class="s">, not a known isomer for target ZA=</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">targetEnergy</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sZA</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="n">targetEnergy</span> <span class="o">=</span> <span class="mf">0.</span>

        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">findDatas</span><span class="p">(</span> <span class="p">)</span> <span class="p">:</span>
            <span class="c"># check target energy levels</span>
            <span class="k">if</span> <span class="n">targetLevels</span><span class="p">(</span> <span class="n">d</span><span class="o">.</span><span class="n">ELevel</span> <span class="p">)</span><span class="o">.</span><span class="n">energy</span> <span class="o">!=</span> <span class="n">targetEnergy</span> <span class="p">:</span>
                <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&#39;WARNING: Isomer label </span><span class="si">%s</span><span class="s"> with level energy </span><span class="si">%s</span><span class="s"> for ZA=</span><span class="si">%s</span><span class="s">, does not match level energy </span><span class="si">%s</span><span class="s"> given in database&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">suffix</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">ELevel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="n">targetEnergy</span> <span class="p">)</span> <span class="p">)</span>
            <span class="k">if</span> <span class="n">d</span><span class="o">.</span><span class="n">ELevel</span> <span class="o">!=</span> <span class="n">targetEnergy</span> <span class="p">:</span>
                <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&#39;Changing level energy from </span><span class="si">%s</span><span class="s"> to </span><span class="si">%s</span><span class="s"> for target ZA=</span><span class="si">%s</span><span class="se">\n</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">d</span><span class="o">.</span><span class="n">ELevel</span><span class="p">,</span> <span class="n">targetEnergy</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sZA</span><span class="p">,</span> <span class="n">d</span> <span class="p">)</span> <span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">checkOnly</span> <span class="p">:</span> <span class="n">d</span><span class="o">.</span><span class="n">ELevel</span> <span class="o">=</span> <span class="n">targetEnergy</span>
            <span class="n">residualZA</span> <span class="o">=</span> <span class="n">endl2</span><span class="o">.</span><span class="n">residualZA_yos_Q</span><span class="p">(</span> <span class="n">d</span><span class="o">.</span><span class="n">yi</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">ZA</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">C</span> <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">residualZA</span> <span class="p">:</span> <span class="k">continue</span>
            <span class="n">residualLevels</span> <span class="o">=</span> <span class="n">xensl</span><span class="o">.</span><span class="n">Levels</span><span class="p">(</span> <span class="n">residualZA</span> <span class="p">)</span>
            <span class="c"># check S=1 levels</span>
            <span class="k">if</span> <span class="n">d</span><span class="o">.</span><span class="n">S</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">d</span><span class="o">.</span><span class="n">X1</span> <span class="o">!=</span> <span class="n">residualLevels</span><span class="p">(</span> <span class="n">d</span><span class="o">.</span><span class="n">X1</span> <span class="p">)</span><span class="o">.</span><span class="n">energy</span> <span class="p">:</span>
                <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&#39;Changing discrete state energy from </span><span class="si">%s</span><span class="s"> to </span><span class="si">%s</span><span class="s"> for residual ZA=</span><span class="si">%s</span><span class="se">\n</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">d</span><span class="o">.</span><span class="n">X1</span><span class="p">,</span> <span class="n">residualLevels</span><span class="p">(</span> <span class="n">d</span><span class="o">.</span><span class="n">X1</span> <span class="p">)</span><span class="o">.</span><span class="n">energy</span><span class="p">,</span> <span class="n">residualZA</span><span class="p">,</span> <span class="n">d</span> <span class="p">)</span> <span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">checkOnly</span> <span class="p">:</span> <span class="n">d</span><span class="o">.</span><span class="n">X1</span> <span class="o">=</span> <span class="n">residualLevels</span><span class="p">(</span> <span class="n">d</span><span class="o">.</span><span class="n">X1</span> <span class="p">)</span><span class="o">.</span><span class="n">energy</span>
            <span class="c"># check residual isomer levels</span>
            <span class="k">if</span> <span class="n">d</span><span class="o">.</span><span class="n">X4</span> <span class="o">!=</span> <span class="n">residualLevels</span><span class="p">(</span> <span class="n">d</span><span class="o">.</span><span class="n">X4</span> <span class="p">)</span><span class="o">.</span><span class="n">energy</span> <span class="p">:</span>
                <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&#39;Changing isomer level energy from </span><span class="si">%s</span><span class="s"> to </span><span class="si">%s</span><span class="s"> for residual ZA=</span><span class="si">%s</span><span class="se">\n</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">d</span><span class="o">.</span><span class="n">X4</span><span class="p">,</span> <span class="n">residualLevels</span><span class="p">(</span> <span class="n">d</span><span class="o">.</span><span class="n">X4</span> <span class="p">)</span><span class="o">.</span><span class="n">energy</span><span class="p">,</span> <span class="n">residualZA</span><span class="p">,</span> <span class="n">d</span> <span class="p">)</span> <span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">checkOnly</span> <span class="p">:</span> <span class="n">d</span><span class="o">.</span><span class="n">X4</span> <span class="o">=</span> <span class="n">residualLevels</span><span class="p">(</span> <span class="n">d</span><span class="o">.</span><span class="n">X4</span> <span class="p">)</span><span class="o">.</span><span class="n">energy</span>
            <span class="c"># check isomer level is actually labeled as a metastable state</span>
            <span class="k">if</span> <span class="n">d</span><span class="o">.</span><span class="n">X4</span> <span class="p">:</span>
                <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">residualLevels</span><span class="o">.</span><span class="n">metastables</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span> <span class="p">)</span> <span class="p">:</span>
                    <span class="k">if</span> <span class="n">residualLevels</span><span class="p">(</span> <span class="n">d</span><span class="o">.</span><span class="n">X4</span> <span class="p">)</span><span class="o">.</span><span class="n">energy</span> <span class="o">==</span> <span class="n">residualLevels</span><span class="p">(</span> <span class="n">m</span> <span class="p">)</span><span class="o">.</span><span class="n">energy</span> <span class="p">:</span> <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">endlmisc</span><span class="o">.</span><span class="n">printWarning</span><span class="p">(</span> <span class="s">&#39;WARNING: Isomer level energy </span><span class="si">%s</span><span class="s">, not a known isomer for residual ZA=</span><span class="si">%s</span><span class="se">\n</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">d</span><span class="o">.</span><span class="n">X4</span><span class="p">,</span> <span class="n">residualZA</span><span class="p">,</span> <span class="n">d</span> <span class="p">)</span> <span class="p">)</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../../index.html">
              <img class="logo" src="../../../../_static/gnd.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../../index.html">Fudge and GND 1.2 beta documentation</a> &raquo;</li>
          <li><a href="../../../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, B.Beck, D. Brown, C. Mattoon, N. Patel, N. Summers.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>